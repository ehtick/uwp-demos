<Page
    x:Class="Mockup.View.Property.PropertyPanel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Mockup.View.Property"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:businessobject="using:Mockup.BusinessObject"
    xmlns:viewmodel="using:Mockup.ViewModel"
    xmlns:viewProperty="using:Mockup.View.Property"
    xmlns:utility="using:Mockup.Utility"
    xmlns:input="using:Syncfusion.UI.Xaml.Controls.Input"
    xmlns:layout="using:Syncfusion.UI.Xaml.Controls.Layout"
    xmlns:Interactivity="using:Microsoft.Xaml.Interactivity" 
    xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
    >
    <Page.Resources>
        <businessobject:PropertyEditorUIConverter x:Key="converterUI"/>
        <businessobject:ComboBoxSelectedItemToDouble x:Key="comboBoxSelectedItemToDouble"/>        
        <businessobject:BooleanToVisibilityConverter x:Key="booleanToVisibilityConverter"/>
        <businessobject:NullToVisibilityConverter x:Key="nullToVisibilityConverter"/>
        
        
        <Style TargetType="ContentControl" x:Key="colorpopup">  
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <StackPanel Orientation="Horizontal">
                            <Button>
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border Width="40" Height="25" Background="#ffffff"></Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                            <Button>
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border Width="40" Height="25" Background="#ffa9a9"></Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                        </StackPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

                    

        <Popup x:Name="editProperties" IsOpen="{Binding SelectedDiagram.SelectedItems.OpenEditPanel}"
               HorizontalOffset="{Binding SelectedDiagram.SelectedItems.PropertyPanelOffsetX, Mode=TwoWay}"
               VerticalOffset="{Binding SelectedDiagram.SelectedItems.PropertyPanelOffsetY, Mode=TwoWay}" 
               Opened="Popup_Opened"
               >
            <StackPanel Background="#2e3138" Width="250" Height="420" PointerPressed="textpropertiespanel_PointerPressed" PointerReleased="textpropertiespanel_PointerReleased" PointerMoved="textProperties_PointerMoved">
                <Grid Height="30">
                    <TextBlock Text="Edit" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="20,5,0,0"/>
                    <Path Data="M482.2174,586.4791L567.4014,586.4791" Stretch="Fill"  Stroke="#7c7c7c" StrokeThickness="1" StrokeDashArray="1,1" VerticalAlignment="Bottom" />
                </Grid>
                <Grid Margin="35,10,0,0">
                    <Button x:Name="groupicon" BorderThickness="0" Width="30" Height="30"
                            Command="{Binding SelectedDiagram.Info.Commands.Group}"
                            IsEnabled="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"
                            >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Group"/>
                        </ToolTipService.ToolTip>
                        <Button.Template>
                            <ControlTemplate>
                                <Border x:Name="groupiconBorder" Background="Transparent" CornerRadius="5">
                                    <Path x:Name="groupiconpath" Data="M14,14 L16,14 16,16 14,16 z M0,14 L2.0000001,14 2.0000001,16 0,16 z M11.000008,6.3490107 L11.000008,10.999003 6.2930038,10.999003 C6.8519948,12.213007 8.0719967,13.062006 9.4939947,13.062006 11.441002,13.062006 13.025002,11.478007 13.025002,9.5310087 13.025002,8.1240039 12.193001,6.9170113 11.000008,6.3490107 z M9.4939947,6.0000117 C7.5470023,6.0000117 5.9630017,7.5830116 5.9630017,9.5310087 5.9630017,9.6910048 5.9890027,9.8450041 6.009999,9.9990034 L10.000007,9.9990034 10.000007,6.0510066 C9.8329992,6.026005 9.6669989,6.0000117 9.4939947,6.0000117 z M4.0000032,3.9990054 L4.0000032,9.9990034 5.0099983,9.9990034 C4.9939919,9.8430052 4.9630013,9.6910048 4.9630011,9.5310087 4.9630013,7.0320091 6.9950001,4.9990051 9.4939947,4.9990051 9.6669989,4.9990051 9.8320074,5.0320096 10.000007,5.0510068 L10.000007,3.9990054 z M3.0000027,2.9990054 L11.000008,2.9990054 11.000008,5.2760053 C12.756005,5.901005 14.025003,7.5620079 14.025003,9.5310087 14.025003,12.030009 11.993004,14.062006 9.4939947,14.062006 7.5119987,14.062006 5.8419995,12.775004 5.2280009,10.999003 L3.0000027,10.999003 z M14,0 L16,0 16,2.0000001 14,2.0000001 z M0,0 L2.0000001,0 2.0000001,2.0000001 0,2.0000001 z" Fill="#d8d7d6" Height="16" Width="16" Margin="-8"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="groupiconBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="groupiconpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="groupiconBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="groupiconpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Enabled">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="groupiconpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Disabled">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="groupiconpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="True">
                                            <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="False">
                                            <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=groupiconBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=groupiconBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding Path=IsOpen, ElementName=editProperties}"  Value="True">
                                            <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Button x:Name="ungroupicon" Width="30" Height="30" Margin="50,0,0,0"
                            IsEnabled="{Binding SelectedDiagram.SelectedItems.IsGroupSelected}"
                            Command="{Binding SelectedDiagram.Info.Commands.UnGroup}"
                            >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Un Group"/>
                        </ToolTipService.ToolTip>
                        <Button.Template>
                            <ControlTemplate>
                                <Border x:Name="ungroupiconBorder" Background="Transparent" CornerRadius="5">
                                    <Path x:Name="ungroupiconPath" Data="M14.000002,14.001 L16.000002,14.001 16.000002,16.000999 14.000002,16.000999 z M5.0000016,14.001 L7.0000016,14.001 7.0000016,16.000999 5.0000016,16.000999 z M10.000002,10.001 L12.000002,10.001 12.000002,12.001 10.000002,12.001 z M1.4306008E-06,10.001 L2.0000016,10.001 2.0000016,12.001 1.4306008E-06,12.001 z M8.9999988,7.2770021 C8.268996,7.6370027 7.6790001,8.2360018 7.3399956,8.9799984 L8.9999988,8.9799984 z M10.548995,6.904001 C10.360999,6.904001 10.179999,6.9310015 9.9999988,6.9590013 L9.9999988,9.9799984 7.0639946,9.9799984 C7.043998,10.13 7.017997,10.279002 7.017997,10.435 7.017997,12.381999 8.6019961,13.965999 10.548995,13.965999 12.495993,13.965999 14.080001,12.381999 14.080001,10.435 14.080001,8.4870012 12.495993,6.904001 10.548995,6.904001 z M14.000002,5.0009997 L16.000002,5.0009997 16.000002,7.0009997 14.000002,7.0009997 z M5.0000016,5.0009997 L7.0000016,5.0009997 7.0000016,7.0009997 5.0000016,7.0009997 z M3,2.9799965 L3,8.9799984 6.2789986,8.9799984 C6.7209999,7.6869982 7.7200005,6.6629961 8.9999988,6.194002 L8.9999988,2.9799965 z M0,0 L2,0 2,1.9799964 9.9999988,1.9799964 9.9999988,0 11.999999,0 11.999999,2.0000004 9.9999988,2.0000004 9.9999988,5.9590009 C10.181998,5.9369977 10.360999,5.9030011 10.548995,5.9030011 13.047995,5.9030011 15.080001,7.9359987 15.080001,10.435 15.080001,12.934001 13.047995,14.965999 10.548995,14.965999 8.0499942,14.965999 6.017997,12.934001 6.017997,10.435 6.017997,10.279002 6.0479958,10.131999 6.0639946,9.9799984 L2,9.9799984 2,2.0000004 0,2.0000004 z" Fill="#d8d7d6" Height="16" Width="16" Margin="-8"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ungroupiconBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ungroupiconPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ungroupiconBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ungroupiconPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Enabled">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ungroupiconPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Disabled">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ungroupiconPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsGroupSelected}"  Value="True">
                                            <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsGroupSelected}"  Value="False">
                                            <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=ungroupiconBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=ungroupiconBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding Path=IsOpen, ElementName=editProperties}"  Value="True">
                                            <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <ToggleButton x:Name="lockbutton" BorderThickness="0" Width="30" Height="30" Margin="100,0,0,0"
                                  businessobject:LockButtonBinding.Command="{Binding TextChanged}" 
                                  IsEnabled="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}" 
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.IsNodeLocked, Mode=TwoWay}"
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Lock"/>
                        </ToolTipService.ToolTip>
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="buttonborder" CornerRadius="5">
                                    <Path x:Name="buttonpath1" Data="M7,8 C8.105011,8 9,8.8959961 9,10 9,10.738998 8.5950012,11.376999 8,11.723 L8,14 7,14 6,14 6,11.723 C5.4049988,11.376999 5,10.738998 5,10 5,8.8959961 5.894989,8 7,8 z M1,7 L1,15 13,15 13,7 z M7.0090001,0.97599983 C4.869,0.97599983 3.128,2.7309999 3.128,4.8889999 L3.1110001,6 5,6 10.889,6 10.889,4.8889999 C10.889,2.7309999 9.1479998,0.97599983 7.0090001,0.97599983 z M7.0090001,0 C9.7600002,0 12,2.1939998 12,4.8889999 L12,6 13,6 14,6 14,16 13,16 1,16 0,16 0,6 1,6 2,6 2.017,4.8889999 C2.017,2.1939998 4.256,0 7.0090001,0 z" Fill="#C6C6C6" Height="16" Width="16" HorizontalAlignment="Center"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Enabled">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Disabled">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"  Value="True">
                                            <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"  Value="False">
                                            <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=lockbutton, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=lockbutton, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </ToggleButton.Template>

                    </ToggleButton>
                    <Button x:Name="aicon" BorderThickness="0" Width="30" Height="30" Margin="150,0,0,0"
                            Command="{Binding SelectedDiagram.SelectAll}"
                            >
                        <Button.Template>
                            <ControlTemplate>
                                <Border x:Name="aiconBorder" CornerRadius="5">
                                    <Path x:Name="aiconpath" Data="M12,15 L14,15 14,16 12,16 z M7.9999998,15 L10,15 10,16 7.9999998,16 z M3.9999999,15 L5.9999998,15 5.9999998,16 3.9999999,16 z M0,15 L1.9999998,15 1.9999998,16 0,16 z M15,14 L16,14 16,16 15,16 z M0,12 L0.99999976,12 0.99999976,14 0,14 z M15,10 L16,10 16,12 15,12 z M0,8 L0.99999976,8 0.99999976,10 0,10 z M15,6 L16,6 16,8 15,8 z M8.0450096,4.845996 C8.010006,5.0690032 7.9710045,5.2449981 7.9280052,5.3729964 L6.774013,8.7250013 9.346005,8.7250013 8.1800041,5.3729964 C8.1450005,5.2640029 8.1080132,5.0880004 8.0690117,4.845996 z M0,4.0000001 L0.99999976,4.0000001 0.99999976,6 0,6 z M7.3070028,3.5980025 L8.8780026,3.5980025 12.001005,12.000002 10.471005,12.000002 9.7150087,9.8620024 6.4110062,9.8620024 5.6840008,12.000002 4.1610051,12.000002 z M15,2 L16,2 16,4.0000001 15,4.0000001 z M14,0 L16,0 16,1 14,1 z M10,0 L12,0 12,1 10,1 z M5.9999998,0 L7.9999998,0 7.9999998,1 5.9999998,1 z M1.9999998,0 L3.9999996,0 3.9999996,1 1.9999998,1 z M0,0 L0.99999976,0 0.99999976,2 0,2 z" Fill="#d8d7d6" Height="16" Width="16" Margin="-8"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="aiconBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="aiconpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="aiconBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="aiconpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=aiconBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=aiconBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>


                <TextBlock Text="Arrange" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="20,10,0,0"/>
                <Grid  Margin="35,5,0,0">
                    <Button x:Name="bringforward" BorderThickness="0" Command="{Binding SelectedDiagram.Info.Commands.BringForward}">
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Bring Forward"/>
                        </ToolTipService.ToolTip>
                        <Button.Template>
                            <ControlTemplate>
                                <Border x:Name="bringforwardBorder" Width="30" Height="30" CornerRadius="5">
                                    <Path x:Name="bringforwardpath" Data="F1M366,93L366,82L377,82L377,85L369,85L369,93z M378,85L378,82L378,81L377,81L366,81L365,81L365,82L365,93L365,94L366,94L369,94L369,97L381,97L381,85z" Fill="#d1d3d4" Height="16" Stretch="Fill" Width="16" />
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bringforwardBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bringforwardpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bringforwardBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bringforwardpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=bringforwardBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=bringforwardBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button x:Name="sendbackward" BorderThickness="0" Command="{Binding SelectedDiagram.Info.Commands.SendBackward}" Margin="50,0,0,0">
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Send Backward"/>
                        </ToolTipService.ToolTip>
                        <Button.Template>
                            <ControlTemplate>
                                <Border x:Name="sendbackwardBorder" Width="30" Height="30" CornerRadius="5">
                                    <Path x:Name="sendbackwardpath" Data="F1M473,93L462,93L462,82L473,82z M474,84L474,82L474,81L473,81L462,81L461,81L461,82L461,93L461,94L462,94L464,94L464,97L477,97L477,94L477,84z" Fill="#d1d3d4" Height="16" Stretch="Fill" Width="16"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="sendbackwardBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="sendbackwardpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="sendbackwardBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="sendbackwardpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=sendbackwardBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=sendbackwardBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button x:Name="bringToFront" BorderThickness="0"  Command="{Binding SelectedDiagram.Info.Commands.BringToFront}" Margin="100,0,0,0">
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Bring To Front"/>
                        </ToolTipService.ToolTip>
                        <Button.Template>
                            <ControlTemplate>
                                <Border x:Name="bringToFrontBorder" Width="30" Height="30" CornerRadius="5">
                                    <Path x:Name="bringToFrontpath" Data="F1M83,170L83,168L83,167L83,161L92,161L92,163L85,163L85,170z M80,167L80,158L89,158L89,160L83,160L82,160L82,161L82,167z M93,163L93,161L93,160L92,160L90,160L90,158L90,157L89,157L80,157L79,157L79,158L79,167L79,168L80,168L82,168L82,170L82,171L83,171L85,171L85,173L95,173L95,163z" Fill="#d1d3d4" Height="16" Stretch="Fill" Width="16" />
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bringToFrontBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bringToFrontpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bringToFrontBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bringToFrontpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=bringToFrontBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=bringToFrontBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button x:Name="sendToBack" BorderThickness="0" Command="{Binding SelectedDiagram.Info.Commands.SendToBack}" Margin="150,0,0,0">
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Send To Back"/>
                        </ToolTipService.ToolTip>
                        <Button.Template>
                            <ControlTemplate>
                                <Border x:Name="sendToBackBorder" CornerRadius="5" Width="30" Height="30">
                                    <Path x:Name="sendToBackpath" Data="F1M170,172L162,172L162,164L170,164z M170,163L169,163L169,161L169,160L168,160L166,160L166,157L158,157L155,157L155,157L155,168L158,168L158,160L158,160L158,161L158,170L158,170L158,171L158,171L159,171L161,171L161,170L159,170L159,161L168,161L168,163L162,163L161,163L161,164L161,172L161,173L162,173L170,173L171,173L171,172L171,164L171,163z" Fill="#d1d3d4" Height="16" Stretch="Fill" Width="16" />
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="sendToBackBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="sendToBackpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="sendToBackBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="sendToBackpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=sendToBackBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=sendToBackBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>

                <TextBlock Text="Align" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="20,10,0,0"/>
                <StackPanel Orientation="Horizontal" Margin="35,5,0,0" >
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Button x:Name="leftalign" BorderThickness="0" Command="{Binding SelectedDiagram.Info.Commands.AlignLeft}"
                                    IsEnabled="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"
                                    >
                                <ToolTipService.ToolTip>
                                    <TextBlock Text="Align Left"/>
                                </ToolTipService.ToolTip>
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border x:Name="leftalignBorder" Width="30" Height="30" CornerRadius="5">
                                            <Path x:Name="leftalignpath" Data="M2,8 L13,8 13,13 2,13 z M2,2 L9,2 9,7 2,7 z M0,0 L1,0 1,16 0,16 z" Height="16" Stretch="Fill" Width="13"/>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CommonStates">
                                                    <VisualStateGroup.Transitions>

                                                    </VisualStateGroup.Transitions>
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftalignBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftalignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftalignBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftalignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Enabled">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftalignBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftalignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Disabled">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftalignBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftalignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:DataTriggerBehavior Binding="{Binding Path=IsOpen, ElementName=editProperties}"  Value="True">
                                                    <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="True">
                                                    <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="False">
                                                    <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=leftalignBorder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=leftalignBorder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>


                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                            <Button x:Name="horizontalcenteralign" BorderThickness="0" Margin="20,0,0,0" 
                                    Command="{Binding SelectedDiagram.Info.Commands.AlignCenter}"
                                    IsEnabled="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"
                                    >
                                <ToolTipService.ToolTip>
                                    <TextBlock Text="Align Horizontal Center"/>
                                </ToolTipService.ToolTip>
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border x:Name="horizontalcenteralignBorder" Width="30" Height="30" CornerRadius="5">
                                            <Path x:Name="horizontalcenteralignpath" Data="F1M401,165L396,165L396,164L399,164L399,159L396,159L396,157L395,157L395,159L392,159L392,164L395,164L395,165L390,165L390,170L395,170L395,173L396,173L396,170L401,170z" Fill="#d1d3d4" Height="16" Stretch="Fill" Width="13" Margin="2,0,0,0"/>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CommonStates">
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalcenteralignBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalcenteralignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalcenteralignBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalcenteralignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Enabled">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalcenteralignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Disabled">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalcenteralignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=horizontalcenteralignBorder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=horizontalcenteralignBorder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="True">
                                                    <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="False">
                                                    <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding Path=IsOpen, ElementName=editProperties}"  Value="True">
                                                    <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                            <Button x:Name="rightalignment" BorderThickness="0" Margin="20,0,0,0"
                                    Command="{Binding SelectedDiagram.Info.Commands.AlignRight}"
                                    IsEnabled="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"
                                    >
                                <ToolTipService.ToolTip>
                                    <TextBlock Text="Align Right"/>
                                </ToolTipService.ToolTip>
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border x:Name="rightalignmentBorder" Width="30" Height="30" CornerRadius="5">
                                            <Path x:Name="rightalignmentpath" Data="M0,8 L11,8 11,13 0,13 z M4,2 L11,2 11,7 4,7 z M12,0 L13,0 13,16 12,16 z" Fill="#d1d3d4" Height="16" Stretch="Fill" Width="13" Margin="2,0,0,0"/>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CommonStates">
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightalignmentBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightalignmentpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightalignmentBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightalignmentpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Enabled">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightalignmentpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Disabled">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightalignmentpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=rightalignmentBorder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=rightalignmentpath}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="True">
                                                    <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="False">
                                                    <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding Path=IsOpen, ElementName=editProperties}"  Value="True">
                                                    <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                            <Button x:Name="bottomalign" BorderThickness="0" 
                                    Command="{Binding SelectedDiagram.Info.Commands.AlignBottom}"
                                    IsEnabled="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"
                                    >
                                <ToolTipService.ToolTip>
                                    <TextBlock Text="Align Bottom"/>
                                </ToolTipService.ToolTip>
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border x:Name="bottomalignBorder" Width="30" Height="30" CornerRadius="5">
                                            <Path x:Name="bottomalignpath" Data="M0,12 L16,12 16,13 0,13 z M9,4 L14,4 14,11 9,11 z M3,0 L8,0 8,11 3,11 z" Fill="#d1d3d4" Height="13" Stretch="Fill"  Width="16"/>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CommonStates">
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomalignBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomalignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomalignBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomalignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Enabled">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomalignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Disabled">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomalignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=bottomalignBorder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=bottomalignBorder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="True">
                                                    <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="False">
                                                    <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding Path=IsOpen, ElementName=editProperties}"  Value="True">
                                                    <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                            <Button x:Name="verticalcenteralign" BorderThickness="0" Margin="20,0,0,0"
                                    Command="{Binding SelectedDiagram.Info.Commands.AlignMiddle}"
                                    IsEnabled="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"
                                    >
                                <ToolTipService.ToolTip>
                                    <TextBlock Text="Align Vertical Center"/>
                                </ToolTipService.ToolTip>
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border x:Name="verticalcenteralignBorder" Width="30" Height="30" CornerRadius="5">
                                            <Path x:Name="verticalcenteralignpath" Data="F1M97,251L94,251L94,246L89,246L89,251L88,251L88,248L83,248L83,251L81,251L81,252L83,252L83,255L88,255L88,252L89,252L89,257L94,257L94,252L97,252z" Fill="#d1d3d4" Height="11" Stretch="Fill" Width="16"/>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CommonStates">
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalcenteralignBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalcenteralignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalcenteralignBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalcenteralignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Enabled">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalcenteralignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Disabled">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalcenteralignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=verticalcenteralignBorder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=verticalcenteralignBorder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="True">
                                                    <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="False">
                                                    <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding Path=IsOpen, ElementName=editProperties}"  Value="True">
                                                    <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                            <Button x:Name="topalign" BorderThickness="0" Margin="20,0,0,0"
                                    Command="{Binding SelectedDiagram.Info.Commands.AlignTop}"
                                    IsEnabled="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"
                                    >
                                <ToolTipService.ToolTip>
                                    <TextBlock Text="Align Top"/>
                                </ToolTipService.ToolTip>
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border x:Name="topalignBorder" Width="30" Height="30" CornerRadius="5">
                                            <Path x:Name="topalignpath" Data="M8,2 L13,2 13,9 8,9 z M2,2 L7,2 7,13 2,13 z M0,0 L16,0 16,1 0,1 z" Fill="#d1d3d4" Height="13" Stretch="Fill" Width="16"/>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CommonStates">
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topalignBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topalignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topalignBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topalignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Enabled">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topalignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Disabled">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topalignpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=topalignBorder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=topalignBorder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="True">
                                                    <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="False">
                                                    <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding Path=IsOpen, ElementName=editProperties}"  Value="True">
                                                    <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>

                            </Button>
                        </StackPanel>
                    </StackPanel>

                    <Path Stretch="Fill" Stroke="#7c7c7c" StrokeDashArray="3,3" StrokeThickness="1" HorizontalAlignment="Right" Height="70" Width="1" Data="M388.8,114.5 L388.8,405.6" Margin="10,0,0,0"/>
                    <StackPanel Margin="10,3,0,0">
                        <Button x:Name="horizontalsplitter" BorderThickness="0" 
                                Command="{Binding SelectedDiagram.Info.Commands.SpaceDown}"
                                    IsEnabled="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"
                                >
                            <ToolTipService.ToolTip>
                                <TextBlock Text="Horizontal Splitter"/>
                            </ToolTipService.ToolTip>
                            <Button.Template>
                                <ControlTemplate>
                                    <Border x:Name="horizontalsplitterBorder" Width="30" Height="30" CornerRadius="5">
                                        <Path x:Name="horizontalsplitterpath"  Data="M3,6 L13,6 13,8 16,8 16,9 13,9 13,11 3,11 3,9 0,9 0,8 3,8 z M5,0 L11,0 11,2 16,2 16,3 11,3 11,5 5,5 5,3 0,3 0,2 5,2 z" Fill="#FFC4C4C4"  Height="16" Stretch="Fill" Width="13"  />
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CommonStates">
                                                <VisualState x:Name="MouseEnter">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalsplitterBorder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalsplitterpath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="MouseLeave">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalsplitterBorder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalsplitterpath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="Enabled">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalsplitterpath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="Disabled">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalsplitterpath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Interactivity:Interaction.Behaviors>
                                            <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=horizontalsplitterBorder}">
                                                <Core:GoToStateAction StateName="MouseEnter"/>
                                            </Core:EventTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=horizontalsplitterBorder}">
                                                <Core:GoToStateAction StateName="MouseLeave"/>
                                            </Core:EventTriggerBehavior>
                                            <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="True">
                                                <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                            </Core:DataTriggerBehavior>
                                            <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="False">
                                                <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                            </Core:DataTriggerBehavior>
                                            <Core:DataTriggerBehavior Binding="{Binding Path=IsOpen, ElementName=editProperties}"  Value="True">
                                                <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                            </Core:DataTriggerBehavior>
                                        </Interactivity:Interaction.Behaviors>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <Button x:Name="verticalsplitter" BorderThickness="0" Margin="0,5,0,0"
                                Command="{Binding SelectedDiagram.Info.Commands.SpaceAcross}"
                                    IsEnabled="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected, Mode=TwoWay}"
                                >
                            <ToolTipService.ToolTip>
                                <TextBlock Text="Vertical Splitter"/>
                            </ToolTipService.ToolTip>
                            <Button.Template>
                                <ControlTemplate>
                                    <Border x:Name="verticalsplitterBorder" Width="30" Height="30" CornerRadius="5">
                                        <Path x:Name="verticalsplitterpath" Data="M8,0 L9,0 9,3 11,3 11,13 9,13 9,16 8,16 8,13 6,13 6,3 8,3 z M2,0 L3,0 3,5 5,5 5,11 3,11 3,16 2,16 2,11 0,11 0,5 2,5 z" Fill="#d1d3d4" Height="16" Stretch="Fill" Width="11" Margin="2,0,0,0"/>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CommonStates">
                                                <VisualState x:Name="MouseEnter">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalsplitterBorder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalsplitterpath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="MouseLeave">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalsplitterBorder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalsplitterpath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="Enabled">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalsplitterpath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="Disabled">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalsplitterpath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Interactivity:Interaction.Behaviors>
                                            <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=verticalsplitterBorder}">
                                                <Core:GoToStateAction StateName="MouseEnter"/>
                                            </Core:EventTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=verticalsplitterBorder}">
                                                <Core:GoToStateAction StateName="MouseLeave"/>
                                            </Core:EventTriggerBehavior>
                                            <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="True">
                                                <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                            </Core:DataTriggerBehavior>
                                            <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="False">
                                                <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                            </Core:DataTriggerBehavior>
                                            <Core:DataTriggerBehavior Binding="{Binding Path=IsOpen, ElementName=editProperties}"  Value="True">
                                                <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                            </Core:DataTriggerBehavior>
                                        </Interactivity:Interaction.Behaviors>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </StackPanel>

                <TextBlock Text="Size" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="20,5,0,0"/>
                <StackPanel Orientation="Horizontal" Margin="20,5,0,0">
                    <TextBlock Text="W : " Width="20" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="0,7,0,0"/>
                    <input:SfNumericTextBox  Width="70" Height="15"  Background="#454a54" 
                                            FormatString="N" Margin="5,0,0,0" Foreground="#e6e7e8" BorderBrush="#747b84" BorderThickness="0.5"
                                            IsEnabled="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"
                                            Value="{Binding SelectedDiagram.SelectedItems.Width, Mode=TwoWay}"/>

                    <TextBlock Text="H : " Width="20" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="15,7,0,0"/>
                    <input:SfNumericTextBox  Width="70" Height="15" FontSize="12" Background="#454a54" 
                                            FormatString="N" Margin="5,0,0,0" Foreground="#e6e7e8" BorderBrush="#747b84" BorderThickness="0.5"
                                            IsEnabled="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"
                                            Value="{Binding SelectedDiagram.SelectedItems.Height, Mode=TwoWay}"/>
                </StackPanel>

                <TextBlock Text="Position" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="20,10,0,0"/>
                <StackPanel Orientation="Horizontal" Margin="20,5,0,0">
                    <TextBlock Text="X : " Width="20" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="0,7,0,0"/>
                    <input:SfNumericTextBox Width="70" Height="15" Background="#454a54"
                                            FormatString="N" Margin="5,0,0,0" Foreground="#e6e7e8" BorderBrush="#747b84" BorderThickness="0.5"
                                            IsEnabled="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"
                                            Value="{Binding SelectedDiagram.SelectedItems.X, Mode=TwoWay}"/>

                    <TextBlock Text="Y : " Width="20" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="15,7,0,0"/>
                    <input:SfNumericTextBox  Width="70" Height="15" Background="#454a54"
                                            FormatString="N" Margin="5,0,0,0" Foreground="#e6e7e8" BorderBrush="#747b84" BorderThickness="0.5"
                                            IsEnabled="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"
                                            Value="{Binding SelectedDiagram.SelectedItems.Y, Mode=TwoWay}"/>
                </StackPanel>

                <Grid Margin="20,10,30,0">
                    <CheckBox Content="Aspect Ratio" Foreground="#adadad" Background="Transparent"  HorizontalAlignment="Left"
                              businessobject:AspectRatioBinding.Command="{Binding TextChanged}" Height="30" VerticalAlignment="Center"
                              IsChecked="{Binding SelectedDiagram.SelectedItems.AspectRatioEnabled, Mode=TwoWay}"                               
                          
                              >
                        <CheckBox.RenderTransform>
                            <ScaleTransform ScaleX="0.8" ScaleY="0.8"/>
                        </CheckBox.RenderTransform>
                    </CheckBox>
                    <Button BorderThickness="0"  HorizontalAlignment="Right" VerticalAlignment="Top"
                            businessobject:ResetButtonBinding.Command="{Binding TextChanged}"
                            >
                        <Button.Template>
                            <ControlTemplate>
                                <Border x:Name="resetbuttonborder"  Width="58">
                                    <StackPanel>
                                        <TextBlock x:Name="resetbuttontextbox" Text="Size Reset" Foreground="#fd4f3f" FontSize="12"/>
                                        <Path x:Name="resetbuttonpath" Data="M482.2174,586.4791L567.4014,586.4791" Stretch="Fill" HorizontalAlignment="Stretch" Stroke="#fd4f3f" StrokeThickness="1"/>
                                    </StackPanel>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="resetbuttontextbox" Storyboard.TargetProperty="Foreground">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#f97b67"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="resetbuttonpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#f97b67"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="resetbuttontextbox" Storyboard.TargetProperty="Foreground">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="resetbuttonpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=resetbuttonborder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=resetbuttonborder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>
                <!--<viewProperty:BrushPicker  Visibility="{Binding SelectedDiagram.SelectedItems.IsBrushEditing}"  Brush="{Binding Path=SelectedDiagram.SelectedItems.PickedBrush, Mode=TwoWay}"
                                   ManipulationMode="None" HorizontalAlignment="Left"
                                                  Margin="0,0,0,35"
                                                  />-->
            </StackPanel>
        </Popup>

        <Popup x:Name="textProperties" IsOpen="{Binding SelectedDiagram.SelectedItems.OpenTextPanel}"
               HorizontalOffset="{Binding SelectedDiagram.SelectedItems.PropertyPanelOffsetX, Mode=TwoWay}"
               VerticalOffset="{Binding SelectedDiagram.SelectedItems.PropertyPanelOffsetY, Mode=TwoWay}"     
               Opened="Popup_Opened"
               >
            <StackPanel x:Name="textpropertiespanel" Background="#2e3138" Width="250" PointerPressed="textpropertiespanel_PointerPressed" PointerReleased="textpropertiespanel_PointerReleased" PointerMoved="textProperties_PointerMoved" PointerExited="textpropertiespanel_PointerExited" >
                <TextBlock Text="Text" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="20,10,0,0"/>
                <Path Data="M482.2174,586.4791L567.4014,586.4791" Stretch="Fill"  Stroke="#7c7c7c" StrokeThickness="1" StrokeDashArray="1,1" Margin="0,8,0,0" />
                <StackPanel Margin="20,10,0,0">
                    <StackPanel Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.EditTab.Default, Converter={StaticResource booleanToVisibilityConverter}}"
                                Margin="0,0,0,0" 
                                >
                        <TextBlock Text="Family" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                                   Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.EditTab.FontFamily, Converter={StaticResource booleanToVisibilityConverter}}"
                                   />
                        <ComboBox x:Name="fontsCombobox"  ItemsSource="{Binding Fonts}" 
                              IsEnabled="{Binding SelectedDiagram.SelectedItems.IsLabelSet}"
                              SelectedItem="{Binding SelectedDiagram.SelectedItems.Font, Mode=TwoWay}"
                              Margin="0,5,0,0" Width="210" HorizontalAlignment="Left"
                                  Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.EditTab.FontFamily, Converter={StaticResource booleanToVisibilityConverter}}"
                                  
                                  >
                        </ComboBox>
                        <Grid Margin="0,10,20,0">
                            <StackPanel HorizontalAlignment="Left" 
                                        Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.EditTab.FontSize, Converter={StaticResource booleanToVisibilityConverter}}"
                                        >
                                <TextBlock Text="Size" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="0,5,0,0"/>
                                <ComboBox ItemsSource="{Binding FontSize}"
                                    IsEnabled="{Binding SelectedDiagram.SelectedItems.IsLabelSet}"
                                    SelectedItem="{Binding SelectedDiagram.SelectedItems.FontSize, Mode=TwoWay}"
                                    Margin="0,5,0,0" Width="100" HorizontalAlignment="Left" Height="30"
                                   
                                >
                                </ComboBox>
                            </StackPanel>
                            <StackPanel HorizontalAlignment="Right"
                                        Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.EditTab.Foreground, Converter={StaticResource booleanToVisibilityConverter}}"
                                        >
                                <TextBlock Text="Color" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="10,5,0,0"/>
                                <Button BorderThickness="0" Margin="10,5,0,0" Click="TextPropertiesButton_Click_4" 
                            Command="{Binding SelectedDiagram.SelectedItems.PickerCommand}" VerticalContentAlignment="Top" HorizontalAlignment="Left" 
                                Padding="0" Background="Transparent"
                            >
                                    <Button.Template>
                                        <ControlTemplate>
                                            <Border x:Name="foregroundButtonBorder" Padding="1" Background="Transparent">

                                                <Border BorderBrush="#747b84" BorderThickness="1" >
                                                    <Grid HorizontalAlignment="Left" Height="26" Width="40">
                                                        <Path Data="F1M107,551L62,551L62,525L107,525z" Fill="{Binding SelectedDiagram.SelectedItems.LabelForeground}" Stretch="Fill"/>
                                                        <Path Data="F1M104,548L94,548L94,538L104,538z" Fill="#FF454A54" Height="9" Stretch="Fill" Width="9" HorizontalAlignment="Right" Margin="0,0,5,5" VerticalAlignment="Bottom"/>
                                                        <Path Data="F1M96,542L99,546L102,542z" Fill="#FFD1D3D4" Height="4" Stretch="Fill" Width="4" HorizontalAlignment="Right" Margin="0,0,7,7" VerticalAlignment="Bottom"/>
                                                    </Grid>
                                                </Border>
                                                <VisualStateManager.VisualStateGroups>
                                                    <VisualStateGroup x:Name="CheckStates">
                                                        <VisualState x:Name="MouseEnter">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="foregroundButtonBorder" Storyboard.TargetProperty="Background">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="LightGray"/>
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                        <VisualState x:Name="MouseLeave">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="foregroundButtonBorder" Storyboard.TargetProperty="Background">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                    </VisualStateGroup>
                                                </VisualStateManager.VisualStateGroups>
                                                <Interactivity:Interaction.Behaviors>

                                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=foregroundButtonBorder}">
                                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                                    </Core:EventTriggerBehavior>
                                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=foregroundButtonBorder}">
                                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                                    </Core:EventTriggerBehavior>
                                                </Interactivity:Interaction.Behaviors>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                    <Button.CommandParameter>
                                        <viewmodel:CurrentBrush>LabelForeground</viewmodel:CurrentBrush>
                                    </Button.CommandParameter>
                                </Button>
                            </StackPanel>
                        </Grid>

                        <TextBlock Text="Style" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="0,10,0,0"
                                   Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.EditTab.FontStyle, Converter={StaticResource booleanToVisibilityConverter}}"
                                   />
                        <Grid Margin="20,5,0,0">

                            <ToggleButton x:Name="boldbutton" BorderThickness="0" 
                                  IsEnabled="{Binding SelectedDiagram.SelectedItems.IsLabelSet}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.Bold, Mode=TwoWay}" 
                                  >
                                <ToolTipService.ToolTip>
                                    <TextBlock Text="Bold"/>
                                </ToolTipService.ToolTip>
                                <ToggleButton.Template>
                                    <ControlTemplate>
                                        <Border x:Name="boldborder" Width="30" Height="30" CornerRadius="5">
                                            <Path x:Name="boldpath" Data="F1M77.1589,437.1116L81.1429,437.1116C81.8269,437.1116,82.3069,437.0866,82.5829,437.0356C83.0709,436.9486,83.4779,436.8026,83.8059,436.5986C84.1329,436.3956,84.4019,436.0986,84.6129,435.7096C84.8239,435.3206,84.9299,434.8706,84.9299,434.3616C84.9299,433.7656,84.7769,433.2466,84.4719,432.8066C84.1659,432.3656,83.7419,432.0566,83.1999,431.8786C82.6579,431.7006,81.8769,431.6116,80.8589,431.6116L77.1589,431.6116z M77.1589,429.7236L80.6189,429.7236C81.5569,429.7236,82.2299,429.6616,82.6379,429.5376C83.1759,429.3776,83.5819,429.1116,83.8549,428.7406C84.1279,428.3696,84.2639,427.9036,84.2639,427.3436C84.2639,426.8126,84.1369,426.3446,83.8819,425.9406C83.6279,425.5376,83.2639,425.2606,82.7909,425.1116C82.3179,424.9626,81.5059,424.8876,80.3569,424.8876L77.1589,424.8876z M75.0419,438.9996L75.0419,422.9996L81.0439,422.9996C82.2669,422.9996,83.2469,423.1616,83.9859,423.4856C84.7239,423.8096,85.3029,424.3076,85.7209,424.9806C86.1399,425.6536,86.3489,426.3576,86.3489,427.0926C86.3489,427.7766,86.1629,428.4206,85.7919,429.0246C85.4209,429.6286,84.8609,430.1156,84.1119,430.4876C85.0789,430.7706,85.8229,431.2546,86.3429,431.9386C86.8629,432.6226,87.1239,433.4306,87.1239,434.3616C87.1239,435.1106,86.9659,435.8076,86.6489,436.4516C86.3329,437.0956,85.9409,437.5916,85.4759,437.9416C85.0099,438.2906,84.4259,438.5546,83.7239,438.7326C83.0219,438.9106,82.1609,438.9996,81.1429,438.9996z" Fill="#FFC4C4C4" Height="16" Stretch="Fill" Width="12.082" />
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CommonStates">
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="boldborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="boldpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="boldborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="boldpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Checked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="boldpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="UnChecked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="boldpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=boldborder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=boldborder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding ElementName=boldbutton, Path=IsChecked}"  Value="True">
                                                    <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding ElementName=boldbutton, Path=IsChecked}" Value="False">
                                                    <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                            </ToggleButton>
                            <ToggleButton x:Name="textstylebutton" BorderThickness="0" Margin="50,0,0,0"
                                  IsEnabled="{Binding SelectedDiagram.SelectedItems.IsLabelSet}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.Italic, Mode=TwoWay}" 
                                  >
                                <ToolTipService.ToolTip>
                                    <TextBlock Text="Italic"/>
                                </ToolTipService.ToolTip>
                                <ToggleButton.Template>
                                    <ControlTemplate>
                                        <Border x:Name="textstyleborder" Width="30" Height="30" CornerRadius="5">
                                            <Path x:Name="textstylepath" Data="F1M164.6484,423L164.5074,423.436C165.1134,423.436,165.5184,423.471,165.7284,423.549C165.9364,423.622,166.0924,423.73,166.1944,423.872C166.2954,424.016,166.3474,424.186,166.3474,424.391C166.3474,424.802,166.2284,425.406,165.9934,426.208L163.2074,435.861C162.9324,436.813,162.6674,437.474,162.4064,437.845C162.2394,438.08,161.9844,438.265,161.6394,438.399C161.4254,438.492,160.9904,438.549,160.3294,438.564L160.1644,439L166.7484,439L166.8774,438.564C166.1944,438.516,165.7424,438.453,165.5274,438.38C165.3094,438.308,165.1544,438.201,165.0554,438.063C164.9564,437.924,164.9074,437.758,164.9074,437.561C164.9074,437.314,165.0354,436.75,165.2834,435.861L168.0574,426.208C168.3504,425.209,168.5864,424.565,168.7724,424.272C168.9584,423.981,169.2274,423.758,169.5834,423.6C169.8244,423.483,170.1984,423.427,170.7004,423.436L170.8324,423z" Fill="#FFC4C4C4" Height="16" Stretch="Fill" Width="10.668" />
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CommonStates">
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="textstyleborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="textstylepath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="textstyleborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="textstylepath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Checked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="textstylepath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="UnChecked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="textstylepath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=textstyleborder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=textstyleborder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding ElementName=textstylebutton, Path=IsChecked}"  Value="True">
                                                    <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding ElementName=textstylebutton, Path=IsChecked}" Value="False">
                                                    <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                            </ToggleButton>
                            <!--<ToggleButton x:Name="textunderlinebutton" BorderThickness="0" Margin="100,0,0,0"
                                  IsEnabled="{Binding SelectedDiagram.SelectedItems.IsLabelSet}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.Italic, Mode=TwoWay}" 
                                  >
                                <ToggleButton.Template>
                                    <ControlTemplate>
                                        <Border x:Name="textunderlineborder" Width="30" Height="30" CornerRadius="5">
                                            <Path x:Name="textunderlinepath" Data="M0,15.000012 L14,15.000012 14,16.000012 0,16.000012 z M2.0000015,0 L4.3129909,0 4.3129909,6.2029973 C4.3129909,7.1870051 4.341006,7.8259817 4.3980129,8.1169973 4.4970119,8.5859905 4.7330043,8.9619976 5.1050138,9.2459942 5.4779999,9.5299907 5.9870028,9.6719881 6.6329994,9.6719881 7.2890053,9.6719881 7.7840009,9.5379854 8.1170087,9.269981 8.4500165,9.000999 8.6510057,8.671989 8.7189989,8.2809988 8.7860155,7.8909841 8.8200121,7.2419978 8.8200121,6.3359929 L8.8200121,0 11.133001,0 11.133001,6.015986 C11.133001,7.3909846 11.070013,8.3619924 10.945013,8.9299846 10.820013,9.4979778 10.590002,9.9769807 10.254004,10.366995 9.9180045,10.757986 9.4689989,11.06899 8.9060106,11.300985 8.3439984,11.532003 7.6090131,11.648 6.7030067,11.648 5.6090119,11.648 4.7800016,11.521993 4.2149987,11.269979 3.6489891,11.016988 3.203005,10.688985 2.8750019,10.284995 2.5469987,9.8819795 2.3309952,9.4579998 2.2269912,9.0159832 2.0750137,8.3590017 2.0000014,7.3909846&#xd;&#xa;2.0000015,6.1090031 z" Fill="#FFC4C4C4" Height="16" Stretch="Fill" Width="14"/>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CommonStates">
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="textunderlineborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="textunderlinepath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="textunderlineborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="textunderlinepath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=textunderlineborder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=textunderlineborder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                        </ToggleButton>-->
                        </Grid>

                        <TextBlock Text="Alignment" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="0,10,0,0"
                                   Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.EditTab.TextAlignment, Converter={StaticResource booleanToVisibilityConverter}}"
                                   />
                        <Grid Margin="0,5,0,0"                                
                                Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.EditTab.TextAlignment, Converter={StaticResource booleanToVisibilityConverter}}">
                            <businessobject:CustomToggleButton x:Name="left" BorderThickness="0" Margin="20,0,0,0"
                                  IsEnabled="{Binding SelectedDiagram.SelectedItems.IsLabelSet}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.Left, Mode=TwoWay}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  Checked="CustomToggleButton_Checked"
                                  >
                                <ToolTipService.ToolTip>
                                    <TextBlock Text="Align Left"/>
                                </ToolTipService.ToolTip>
                                <businessobject:CustomToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border x:Name="leftalignborder" Width="30" Height="30" CornerRadius="5">
                                            <Path x:Name="leftpath" Data="M0,12 L16,12 16,13 0,13 z M0,9 L9,9 9,10 0,10 z M0,6 L16,6 16,7 0,7 z M0,3 L9,3 9,4 0,4 z M0,0 L16,0 16,1 0,1 z" Fill="#d1d3d4" Height="16" Stretch="Fill" Width="16" />
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CheckStates">
                                                    <VisualState x:Name="Checked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="UnChecked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftalignborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftalignborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=leftalignborder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=leftalignborder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding ElementName=left, Path=IsLocked}"  Value="True">
                                                    <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding ElementName=left, Path=IsLocked}" Value="False">
                                                    <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </businessobject:CustomToggleButton.Template>
                            </businessobject:CustomToggleButton>
                            <businessobject:CustomToggleButton x:Name="horizontolcenter" BorderThickness="0" Margin="70,0,0,0"
                                  IsEnabled="{Binding SelectedDiagram.SelectedItems.IsLabelSet}"
                                  businessobject:AlignmentBinding.Command="{Binding TextChanged}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.Center, Mode=TwoWay}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Checked="CustomToggleButton_Checked"
                                  >
                                <ToolTipService.ToolTip>
                                    <TextBlock Text="Align Center"/>
                                </ToolTipService.ToolTip>
                                <businessobject:CustomToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border x:Name="centeralignborder" Width="30" Height="30" CornerRadius="5">
                                            <Path x:Name="centerpath" Data="M0,12 L16,12 16,13 0,13 z M4,9 L12,9 12,10 4,10 z M0,6 L16,6 16,7 0,7 z M4,3 L12,3 12,4 4,4 z M0,0 L16,0 16,1 0,1 z" Fill="#d1d3d4" Height="16" Stretch="Fill" Width="16" />
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CheckStates">
                                                    <VisualState x:Name="Checked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centerpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="UnChecked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centerpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centeralignborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centerpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centeralignborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centerpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=centeralignborder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=centeralignborder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding ElementName=horizontolcenter, Path=IsChecked}"  Value="True">
                                                    <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding ElementName=horizontolcenter, Path=IsChecked}" Value="False">
                                                    <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </businessobject:CustomToggleButton.Template>
                            </businessobject:CustomToggleButton>

                            <businessobject:CustomToggleButton x:Name="right" BorderThickness="0" Margin="120,0,0,0"
                                  IsEnabled="{Binding SelectedDiagram.SelectedItems.IsLabelSet}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.Right, Mode=TwoWay}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  Checked="CustomToggleButton_Checked"
                                  >
                                <ToolTipService.ToolTip>
                                    <TextBlock Text="Align Right"/>
                                </ToolTipService.ToolTip>
                                <businessobject:CustomToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border x:Name="rightalignborder" Width="30" Height="30" CornerRadius="5">
                                            <Path x:Name="rightpath" Data="M0,12 L16,12 16,13 0,13 z M7,9 L16,9 16,10 7,10 z M0,6 L16,6 16,7 0,7 z M7,3 L16,3 16,4 7,4 z M0,0 L16,0 16,1 0,1 z" Fill="#d1d3d4" Height="16" Width="16" Stretch="Fill"/>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CheckStates">
                                                    <VisualState x:Name="Checked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="UnChecked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightalignborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightalignborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=rightalignborder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=rightalignborder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding ElementName=right, Path=IsLocked}"  Value="True">
                                                    <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding ElementName=right, Path=IsLocked}" Value="False">
                                                    <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </businessobject:CustomToggleButton.Template>
                            </businessobject:CustomToggleButton>
                            <!--<businessobject:CustomToggleButton Name="justify" BorderThickness="0" Margin="170,0,0,0"
                                  IsEnabled="{Binding SelectedDiagram.SelectedItems.IsLabelSet}"
                                  businessobject:AlignmentBinding.Command="{Binding TextChanged}"
                                  Checked="Alignment_Checked" Unchecked="left_Unchecked"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  >
                                <businessobject:CustomToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border x:Name="justifyalignborder" Width="30" Height="30" CornerRadius="5">
                                            <Path x:Name="justifypath" Data="M0,12 L16,12 16,13 0,13 z M0,9 L16,9 16,10 0,10 z M0,6 L16,6 16,7 0,7 z M0,3 L16,3 16,4 0,4 z M0,0 L16,0 16,1 0,1 z" Fill="#d1d3d4" Height="16" Stretch="Fill" Width="16" />
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CheckStates">
                                                    <VisualState x:Name="Checked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="justifypath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="UnChecked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="justifypath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="justifyalignborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="justifypath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="justifyalignborder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="justifypath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=justifyalignborder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=justifyalignborder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding ElementName=justify, Path=IsChecked}"  Value="True">
                                                    <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                                <Core:DataTriggerBehavior Binding="{Binding ElementName=justify, Path=IsChecked}" Value="False">
                                                    <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                                </Core:DataTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </businessobject:CustomToggleButton.Template>
                            </businessobject:CustomToggleButton>-->

                        </Grid>
                        <Border Height="30"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Popup>

        <Popup x:Name="properties" IsOpen="{Binding SelectedDiagram.SelectedItems.OpenSettingPanel}"
               HorizontalOffset="{Binding SelectedDiagram.SelectedItems.PropertyPanelOffsetX, Mode=TwoWay}"
               VerticalOffset="{Binding SelectedDiagram.SelectedItems.PropertyPanelOffsetY, Mode=TwoWay}"
               Opened="Popup_Opened"
               >
            <StackPanel x:Name="propertiesPanel" Background="#2e3138" Width="250" Margin="0,0,0,35" PointerPressed="textpropertiespanel_PointerPressed" PointerReleased="textpropertiespanel_PointerReleased" PointerMoved="textProperties_PointerMoved">
                <TextBlock Text="Properties" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="20,10,0,0"/>
                <Path Data="M482.2174,586.4791L567.4014,586.4791" Stretch="Fill"  Stroke="#7c7c7c" StrokeThickness="1" StrokeDashArray="1,1" Margin="0,8,0,0" />

                <StackPanel Orientation="Horizontal" Margin="20,10,0,0">
                    <StackPanel Width="70" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.Fill, Converter={StaticResource booleanToVisibilityConverter}}">
                        <TextBlock Text="Fill" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"                               
                               Margin="3,0,0,0"
                               />
                        <Button x:Name="fillButton" BorderThickness="0" Margin="0,5,0,0" Click="SettingPropertiesButton_Click_4"  Command="{Binding SelectedDiagram.SelectedItems.PickerCommand}"                                                      
                          Padding="0" Background="Transparent"
                            >
                            <Button.Template>
                                <ControlTemplate>
                                    <Border x:Name="fillButtonBorder" Padding="1" Background="Transparent">
                                        <Border BorderBrush="#747b84" BorderThickness="1" >
                                            <Grid HorizontalAlignment="Left" Height="26" Width="40">
                                                <Path Data="F1M107,551L62,551L62,525L107,525z" Fill="{Binding SelectedDiagram.SelectedItems.Fill}" Stretch="Fill"/>
                                                <Path Data="F1M104,548L94,548L94,538L104,538z" Fill="#FF454A54" Height="9" Stretch="Fill" Width="9" HorizontalAlignment="Right" Margin="0,0,5,5" VerticalAlignment="Bottom"/>
                                                <Path Data="F1M96,542L99,546L102,542z" Fill="#FFD1D3D4" Height="4" Stretch="Fill" Width="4" HorizontalAlignment="Right" Margin="0,0,7,7" VerticalAlignment="Bottom"/>
                                            </Grid>
                                        </Border>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CheckStates">
                                                <VisualState x:Name="MouseEnter">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="fillButtonBorder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="LightGray"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="MouseLeave">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="fillButtonBorder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Interactivity:Interaction.Behaviors>

                                            <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=fillButtonBorder}">
                                                <Core:GoToStateAction StateName="MouseEnter"/>
                                            </Core:EventTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=fillButtonBorder}">
                                                <Core:GoToStateAction StateName="MouseLeave"/>
                                            </Core:EventTriggerBehavior>
                                        </Interactivity:Interaction.Behaviors>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                            <Button.CommandParameter>
                                <viewmodel:CurrentBrush>Fill</viewmodel:CurrentBrush>
                            </Button.CommandParameter>
                        </Button>
                    </StackPanel>
                    <StackPanel Width="70" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.Stroke, Converter={StaticResource booleanToVisibilityConverter}}">
                        <TextBlock Text="Stroke" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                               
                               Margin="3,0,0,0"
                               />
                        <Button BorderThickness="0" Margin="0,5,0,0" Click="SettingPropertiesButton_Click_4"
                            Command="{Binding SelectedDiagram.SelectedItems.PickerCommand}"
                            
                            >
                            <Button.Template>
                                <ControlTemplate>
                                    <Border x:Name="strokeButtonBorder" Padding="1" Background="Transparent">
                                        <Border BorderBrush="#747b84" BorderThickness="1">
                                            <Grid HorizontalAlignment="Left" Height="26" Width="40">
                                                <Path Data="F1M107,551L62,551L62,525L107,525z" Fill="{Binding SelectedDiagram.SelectedItems.Stroke}" Stretch="Fill"/>
                                                <Path Data="F1M104,548L94,548L94,538L104,538z" Fill="#FF454A54" Height="9" Stretch="Fill" Width="9" HorizontalAlignment="Right" Margin="0,0,5,5" VerticalAlignment="Bottom"/>
                                                <Path Data="F1M96,542L99,546L102,542z" Fill="#FFD1D3D4" Height="4" Stretch="Fill" Width="4" HorizontalAlignment="Right" Margin="0,0,7,7" VerticalAlignment="Bottom"/>
                                            </Grid>
                                        </Border>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CheckStates">
                                                <VisualState x:Name="MouseEnter">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="strokeButtonBorder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="LightGray"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="MouseLeave">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="strokeButtonBorder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Interactivity:Interaction.Behaviors>

                                            <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=strokeButtonBorder}">
                                                <Core:GoToStateAction StateName="MouseEnter"/>
                                            </Core:EventTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=strokeButtonBorder}">
                                                <Core:GoToStateAction StateName="MouseLeave"/>
                                            </Core:EventTriggerBehavior>
                                        </Interactivity:Interaction.Behaviors>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                            <Button.CommandParameter>
                                <viewmodel:CurrentBrush>Stroke</viewmodel:CurrentBrush>
                            </Button.CommandParameter>
                        </Button>
                    </StackPanel>
                    <StackPanel Width="70" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.StrokeThickness, Converter={StaticResource booleanToVisibilityConverter}}">
                        <TextBlock Text="Width" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                               
                               Margin="3,0,0,0"
                               />
                        <ComboBox Margin="0,5,0,0" 
                              SelectedIndex="{Binding SelectedDiagram.SelectedItems.Thickness, Mode=TwoWay, Converter={StaticResource comboBoxSelectedItemToDouble}}"                              
                              Height="33" Width="30" HorizontalAlignment="Left" 
                              >
                            <ComboBoxItem>0</ComboBoxItem>
                            <ComboBoxItem>1</ComboBoxItem>
                            <ComboBoxItem>2</ComboBoxItem>
                            <ComboBoxItem>3</ComboBoxItem>
                            <ComboBoxItem>4</ComboBoxItem>
                            <ComboBoxItem>5</ComboBoxItem>
                        </ComboBox>
                    </StackPanel>
                </StackPanel>

                <TextBlock Text="Opacity" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="20,10,0,0"
                           Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.Opacity, Converter={StaticResource booleanToVisibilityConverter}}"
                           />
                <StackPanel Orientation="Horizontal" Margin="0,-5,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.Opacity, Converter={StaticResource booleanToVisibilityConverter}}" Height="40">
                    <Slider x:Name="opacitySlider" Minimum="0" Maximum="1" StepFrequency=".1" Width="180"  HorizontalAlignment="Left" Margin="20,0,0,0" VerticalAlignment="Top"
                        Value="{Binding SelectedDiagram.SelectedItems.Opacity, Mode=TwoWay}" Background="#7a7e84"/>
                    <TextBlock Text="{Binding ElementName=opacitySlider, Path=Value}" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="12,12,0,0"/>
                </StackPanel>

                <Grid Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.ShowBorder, Converter={StaticResource booleanToVisibilityConverter}}">
                    <CheckBox Content="Show Border" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.ShowBorder, Mode=TwoWay}" Foreground="#d1d3d4"></CheckBox>
                </Grid>
                <Grid Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.ListOddEven, Converter={StaticResource booleanToVisibilityConverter}}">
                    <StackPanel>
                        <TextBlock Text="Odd" FontSize="14" Margin="3,0,0,0" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"/>
                        <Button BorderThickness="0" Margin="0,5,0,0" Click="SettingPropertiesButton_Click_4"
                            Command="{Binding SelectedDiagram.SelectedItems.PickerCommand}"
                            >
                            <Button.Template>
                                <ControlTemplate>
                                    <Border x:Name="oddlistBorder" Padding="1" Background="Transparent">
                                        <Border BorderBrush="#747b84" BorderThickness="1">
                                            <Grid HorizontalAlignment="Left" Height="26" Width="40">
                                                <Path Data="F1M107,551L62,551L62,525L107,525z" Fill="{Binding SelectedDiagram.SelectedItems.DataContext.OddItemsBackgroud}" Stretch="Fill"/>
                                                <Path Data="F1M104,548L94,548L94,538L104,538z" Fill="#FF454A54" Height="9" Stretch="Fill" Width="9" HorizontalAlignment="Right" Margin="0,0,5,5" VerticalAlignment="Bottom"/>
                                                <Path Data="F1M96,542L99,546L102,542z" Fill="#FFD1D3D4" Height="4" Stretch="Fill" Width="4" HorizontalAlignment="Right" Margin="0,0,7,7" VerticalAlignment="Bottom"/>
                                            </Grid>
                                        </Border>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CheckStates">
                                                <VisualState x:Name="MouseEnter">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="oddlistBorder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="LightGray"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="MouseLeave">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="oddlistBorder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Interactivity:Interaction.Behaviors>

                                            <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=oddlistBorder}">
                                                <Core:GoToStateAction StateName="MouseEnter"/>
                                            </Core:EventTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=oddlistBorder}">
                                                <Core:GoToStateAction StateName="MouseLeave"/>
                                            </Core:EventTriggerBehavior>
                                        </Interactivity:Interaction.Behaviors>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                            <Button.CommandParameter>
                                <viewmodel:CurrentBrush>ListOdd</viewmodel:CurrentBrush>
                            </Button.CommandParameter>
                        </Button>
                    </StackPanel>
                    <StackPanel Margin="100,0,0,0">
                        <TextBlock Text="Even"  FontSize="14" Margin="3,0,0,0" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"/>
                        <Button BorderThickness="0" Margin="0,5,0,0" Click="SettingPropertiesButton_Click_4"
                            Command="{Binding SelectedDiagram.SelectedItems.PickerCommand}"
                            >
                            <Button.Template>
                                <ControlTemplate>
                                    <Border x:Name="evenlistBorder" Padding="1" Background="Transparent">
                                        <Border BorderBrush="#747b84" BorderThickness="1">
                                            <Grid HorizontalAlignment="Left" Height="26" Width="40">
                                                <Path Data="F1M107,551L62,551L62,525L107,525z" Fill="{Binding SelectedDiagram.SelectedItems.DataContext.EvenItemsBackgroud}" Stretch="Fill"/>
                                                <Path Data="F1M104,548L94,548L94,538L104,538z" Fill="#FF454A54" Height="9" Stretch="Fill" Width="9" HorizontalAlignment="Right" Margin="0,0,5,5" VerticalAlignment="Bottom"/>
                                                <Path Data="F1M96,542L99,546L102,542z" Fill="#FFD1D3D4" Height="4" Stretch="Fill" Width="4" HorizontalAlignment="Right" Margin="0,0,7,7" VerticalAlignment="Bottom"/>
                                            </Grid>
                                        </Border>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CheckStates">
                                                <VisualState x:Name="MouseEnter">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="evenlistBorder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="LightGray"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="MouseLeave">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="evenlistBorder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Interactivity:Interaction.Behaviors>

                                            <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=evenlistBorder}">
                                                <Core:GoToStateAction StateName="MouseEnter"/>
                                            </Core:EventTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=evenlistBorder}">
                                                <Core:GoToStateAction StateName="MouseLeave"/>
                                            </Core:EventTriggerBehavior>
                                        </Interactivity:Interaction.Behaviors>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                            <Button.CommandParameter>
                                <viewmodel:CurrentBrush>ListEven</viewmodel:CurrentBrush>
                            </Button.CommandParameter>
                        </Button>
                    </StackPanel>
                </Grid>


                <Path Data="M482.2174,586.4791L567.4014,586.4791"
                      Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.StrokeStyle, Converter={StaticResource booleanToVisibilityConverter}}"
                      Stretch="Fill"  Stroke="#7c7c7c" StrokeThickness="1" StrokeDashArray="1,1" Margin="0,8,0,0" />
                <TextBlock Text="State" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="20,5,0,0"
                           Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.Collection, Converter={StaticResource booleanToVisibilityConverter}}"
                           />

                <ComboBox x:Name="combobox" Width="210" Height="30"                                   
                                  ItemsSource="{Binding SelectedDiagram.SelectedItems.States}"                                 
                                  SelectedIndex="{Binding SelectedDiagram.SelectedItems.SelectedIndex, Mode=TwoWay}"
                                  SelectedItem="{Binding SelectedDiagram.SelectedItems.SelectedItem, Mode=TwoWay}"
                                  HorizontalAlignment="Left" Margin="20,5,0,0"
                                  Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.Collection, Converter={StaticResource booleanToVisibilityConverter}}"
                              />

                <TextBlock Text="Selection" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="20,10,0,0"
                           Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.Accordion, Converter={StaticResource booleanToVisibilityConverter}}"
                           />

                <ComboBox x:Name="accordioncombobox" Width="210" Height="30" 
                          DisplayMemberPath="Item"
                                  ItemsSource="{Binding SelectedDiagram.SelectedItems.States}"                                 
                                  SelectedIndex="{Binding SelectedDiagram.SelectedItems.SelectedIndex, Mode=TwoWay}"
                                  SelectedItem="{Binding SelectedDiagram.SelectedItems.SelectedItem, Mode=TwoWay}"
                                  HorizontalAlignment="Left" Margin="20,5,0,0"
                                  Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.Accordion, Converter={StaticResource booleanToVisibilityConverter}}"
                              />

                <TextBlock Text="Selection" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="20,10,0,0"
                           Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.Selection, Converter={StaticResource booleanToVisibilityConverter}}"
                           />

                <ComboBox x:Name="selectioncombobox" Width="210" Height="30" 
                                 
                                  ItemsSource="{Binding SelectedDiagram.SelectedItems.States}"                                  
                                  SelectedIndex="{Binding SelectedDiagram.SelectedItems.SelectedIndex, Mode=TwoWay}"
                                  SelectedItem="{Binding SelectedDiagram.SelectedItems.SelectedItem, Mode=TwoWay}"
                                  HorizontalAlignment="Left" Margin="20,5,0,0"
                                  Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.Selection, Converter={StaticResource booleanToVisibilityConverter}}"
                              />



                <StackPanel Orientation="Horizontal" Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.VerticalScrollBar, Converter={StaticResource booleanToVisibilityConverter}}"
                            >
                    <ToggleButton x:Name="verticalscrollbartogglebutton" BorderThickness="0"
                                  businessobject:ScrollBarVisibilityBinding.Command="{Binding TextChanged}"
                                  Width="20" Height="40" HorizontalContentAlignment="Left" Background="#d1d3d4"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.ScrollBar.Enabled, Mode=TwoWay}"
                                  >
                        <ToggleButton.Template>
                            <ControlTemplate TargetType="ToggleButton">
                                <Border x:Name="scrollbarBorder">
                                    <Viewbox Height="35" Width="15">
                                        <Grid HorizontalAlignment="Center" Height="50.502" VerticalAlignment="Center" Width="17.53">
                                            <Path Data="F1M2660.91,836.724L2644.889,836.724L2644.889,821.953L2660.91,821.953z" Fill="#FF787878" Height="14.771" Stretch="Fill" Margin="0.46,0,1.049,0.917" VerticalAlignment="Bottom"/>
                                            <Path Data="F1M2660.945,802.815L2644.924,802.815L2644.924,788.044L2660.945,788.044z" Fill="#FF787878" Height="14.771" Stretch="Fill" Margin="0.495,0.905,1.014,0" VerticalAlignment="Top"/>
                                            <Path Data="M2661.4592,802.8489L2645.1772,802.8489" Height="1" StrokeStartLineCap="Flat" Stretch="Fill" StrokeEndLineCap="Flat" Stroke="#FFD8D9D9" StrokeThickness="1" StrokeMiterLimit="10" StrokeLineJoin="Miter" Margin="0.248,15.21,0,0" VerticalAlignment="Top"/>
                                            <Path Data="F1M2652.9563,792.6995L2656.2303,797.3325L2649.6843,797.3325z" Fill="White" Height="4.633" Stretch="Fill" Margin="5.255,5.561,5.729,0" VerticalAlignment="Top"/>
                                            <Path Data="F1M2652.9226,832.4184L2649.6486,827.7854L2656.1946,827.7854z" Fill="White" Height="4.633" Stretch="Fill" Margin="5.22,0,5.764,5.223" VerticalAlignment="Bottom"/>
                                            <Path Data="M2661.166,837.141L2645.178,837.141L2645.178,787.639L2661.166,787.639z" StrokeStartLineCap="Flat" Stretch="Fill" StrokeEndLineCap="Flat" Stroke="#FFD8D9D9" StrokeThickness="1" StrokeMiterLimit="10" StrokeLineJoin="Miter" Margin="0.249,0,0.293,0"/>
                                            <Path Data="M2660.9099,821.7889L2644.9289,821.7889" Height="1" StrokeStartLineCap="Flat" Stretch="Fill" StrokeEndLineCap="Flat" Stroke="#FFD8D9D9" StrokeThickness="1" StrokeMiterLimit="10" StrokeLineJoin="Miter" Margin="0,0,0.549,15.352" VerticalAlignment="Bottom"/>
                                        </Grid>
                                    </Viewbox>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates" >
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="scrollbarBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="scrollbarBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="scrollbarBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#7a7e84"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="scrollbarBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=verticalscrollbartogglebutton, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=verticalscrollbartogglebutton, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=scrollbarBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=scrollbarBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                    <Slider x:Name="verticalSlider" Height="26" Margin="30,-15,0,0"
                            Value="{Binding SelectedDiagram.SelectedItems.SliderValue,Mode=TwoWay}" 
                            IsEnabled="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"
                            Width="125" Minimum="0" Maximum="100" StepFrequency="1" Background="#7a7e84"
                            Visibility="{Binding SelectedDiagram.SelectedItems.DataContext.ScrollBar.Enabled, Mode=TwoWay, Converter={StaticResource booleanToVisibilityConverter}}"
                            />
                    <TextBlock Text="{Binding ElementName=verticalSlider, Path=Value}" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="12,12,0,0"
                               Visibility="{Binding SelectedDiagram.SelectedItems.DataContext.ScrollBar.Enabled, Mode=TwoWay, Converter={StaticResource booleanToVisibilityConverter}}"
                               />
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.ScrollSlider, Converter={StaticResource booleanToVisibilityConverter}}">
                    <TextBlock Text="Value" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="0,5,0,0"/>
                    <Slider x:Name="scrollslider" Height="26" Margin="15,-10,0,0"
                            Value="{Binding SelectedDiagram.SelectedItems.SliderValue,Mode=TwoWay}" 
                            IsEnabled="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}" Background="#7a7e84"
                            Width="125" Minimum="0" Maximum="100" StepFrequency="1"/>

                    <TextBlock Text="{Binding ElementName=scrollslider, Path=Value}" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="12,5,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.DataContext.ScrollBar.Enabled, Mode=TwoWay, Converter={StaticResource booleanToVisibilityConverter}}"/>
                </StackPanel>

                <TextBlock Text="State" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="20,10,0,0"
                           Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.OnOffSwitch, Converter={StaticResource booleanToVisibilityConverter}}"
                           />

                <StackPanel Orientation="Horizontal" Margin="20,5,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.OnOffSwitch, Converter={StaticResource booleanToVisibilityConverter}}"
                            >
                    <businessobject:CustomToggleButton x:Name="on" businessobject:OnOffBinding.Command="{Binding TextChanged}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.On, Mode=TwoWay}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                 >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="onbuttonborder" Width="50" Height="30" BorderThickness="1" BorderBrush="#adadad">
                                    <!--<Button x:Name="onbuttoncontent" IsEnabled="False" Content="On" Width="50" Height="30" BorderThickness="1" BorderBrush="#adadad" FontSize="12" businessobject:OnOffSwitchBinding.Command="{Binding TextChanged}"></Button>-->
                                    <TextBlock x:Name="onbuttoncontent" Text="On" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"></TextBlock>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates" >
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="onbuttonborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="onbuttoncontent" Storyboard.TargetProperty="Foreground">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="onbuttonborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="onbuttoncontent" Storyboard.TargetProperty="Foreground">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="onbuttonborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="onbuttoncontent" Storyboard.TargetProperty="Foreground">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="onbuttonborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="onbuttoncontent" Storyboard.TargetProperty="Foreground">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=onbuttonborder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=onbuttonborder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=on, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=on, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="off" businessobject:OnOffBinding.Command="{Binding TextChanged}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Off, Mode=TwoWay}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                   Margin="15,0,0,0">
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="offbuttonborder" Width="50" Height="30" BorderThickness="1" BorderBrush="#adadad">
                                    <!--<Button x:Name="offbuttoncontent" Content="Off" Width="50" Height="30" BorderThickness="1" BorderBrush="#adadad" FontSize="12" businessobject:OnOffSwitchBinding.Command="{Binding TextChanged}"></Button>-->
                                    <TextBlock x:Name="offbuttoncontent" Text="Off" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"></TextBlock>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates" >
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="offbuttonborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="offbuttoncontent" Storyboard.TargetProperty="Foreground">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="offbuttonborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="offbuttoncontent" Storyboard.TargetProperty="Foreground">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="offbuttonborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="offbuttoncontent" Storyboard.TargetProperty="Foreground">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="offbuttonborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="offbuttoncontent" Storyboard.TargetProperty="Foreground">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=offbuttonborder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=offbuttonborder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=off, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=off, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>
                </StackPanel>

                <StackPanel Margin="20,15,0,0" Orientation="Horizontal" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.MenuIcon, Converter={StaticResource booleanToVisibilityConverter}}">
                    <TextBlock Text="Menu" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="0,5,0,0"/>
                    <ToggleButton x:Name="menuicon" Margin="20,0,0,0"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.MenuIconEnabled, Mode=TwoWay}"
                                  >
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="menuiconBorder" Width="25" Height="25">
                                    <Path x:Name="menuiconPath" Data="F1M564.3532,318.1222L562.0692,314.8902L566.6362,314.8902z" Fill="#d8d7d6" Height="20" Stretch="Fill" Width="20" />
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="menuiconBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="menuiconPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="menuiconBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="menuiconPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="menuiconBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="menuiconPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="menuiconBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="menuiconPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=menuiconBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=menuiconBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=menuicon, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=menuicon, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                </StackPanel>

                <TextBlock Text="Point"  Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.PointyButton, Converter={StaticResource booleanToVisibilityConverter}}" 
                       FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                           />
                <StackPanel Orientation="Horizontal" Margin="20,5,0,15" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.PointyButton, Converter={StaticResource booleanToVisibilityConverter}}"
                            >
                    <businessobject:CustomToggleButton x:Name="leftpoint" 
                                  businessobject:PointyButtonBinding.Command="{Binding TextChanged}" 
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Left, Mode=TwoWay}" 
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="leftpointBorder" Width="30" Height="30">
                                    <Path x:Name="leftpointPath" Data="F1M121.4007,56L129.9997,56L129.9997,44L121.4007,44L115.3177,50z M130.9997,57L121.0207,57L113.9307,50L121.0207,43L130.9997,43z" Fill="#d8d7d6" Height="20" Stretch="Fill" Width="20" />
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpointBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpointPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpointBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpointPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpointBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpointPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpointBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpointPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=leftpointBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=leftpointBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=leftpoint, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=leftpoint, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="centerpoint" 
                                  businessobject:PointyButtonBinding.Command="{Binding TextChanged}"                                                        
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Center, Mode=TwoWay}" 
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="10,0,0,0" 
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="centerpointBorder" Width="30" Height="30" >
                                    <Path x:Name="centerpointPath" Data="F1M159,57L172,57L172,44L159,44z M173,58L158,58L158,43L173,43z" Fill="#FFC4C4C4" Height="20" Stretch="Fill" Width="20" />
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centerpointBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centerpointPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centerpointBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centerpointPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centerpointBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centerpointPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centerpointBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="centerpointPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=centerpointBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=centerpointBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=centerpoint, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=centerpoint, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>

                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton  x:Name="rightpoint" 
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Right, Mode=TwoWay}"  
                                  businessobject:PointyButtonBinding.Command="{Binding TextChanged}" 
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="10,0,0,0">
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="rightpointBorder" Width="30" Height="30">
                                    <Path x:Name="rightpointPath" Data="F1M200.5302,44L192.0002,44L192.0002,56L200.5302,56L206.6132,50z M191.0002,43L200.9102,43L208.0002,50L200.9102,57L191.0002,57z" Fill="#FFC4C4C4" Height="20" Stretch="Fill" Width="20"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpointBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpointPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpointBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpointPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpointBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpointPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpointBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpointPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=rightpointBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=rightpointBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=rightpoint, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=rightpoint, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>
                </StackPanel>


                <TextBlock Text="Direction" Margin="20,5,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.ToolTip, Converter={StaticResource booleanToVisibilityConverter}}"
                       FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                           />

                <Grid Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.ToolTip, Converter={StaticResource booleanToVisibilityConverter}}"
                            >
                    <businessobject:CustomToggleButton x:Name="toplefttooltip" 
                               IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.TopLeft, Mode=TwoWay}" 
                               businessobject:ToolTipBinding.Command="{Binding TextChanged}"
                               IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                               >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="tolefttooltipBorder" Width="30" Height="30">
                                    <Path x:Name="tolefttooltipPath" Data="F1M65,455.7578L54,455.7578C52.897,455.7578,52,454.8608,52,453.7578C52,452.6548,52.897,451.7578,54,451.7578L65,451.7578C66.103,451.7578,67,452.6548,67,453.7578C67,454.8608,66.103,455.7578,65,455.7578 M65,450.7578L57.706,450.7578L53.948,446.9998L53.948,450.7628C52.318,450.7918,51,452.1218,51,453.7578C51,455.4118,52.346,456.7578,54,456.7578L65,456.7578C66.654,456.7578,68,455.4118,68,453.7578C68,452.1038,66.654,450.7578,65,450.7578" Fill="#FFC4C4C4" Height="15" Stretch="Fill" Width="20" />
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="tolefttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="tolefttooltipPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="tolefttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="tolefttooltipPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="tolefttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="tolefttooltipPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="tolefttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="tolefttooltipPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=tolefttooltipBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=tolefttooltipBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=toplefttooltip, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=toplefttooltip, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="toprighttooltip" 
                                  businessobject:ToolTipBinding.Command="{Binding TextChanged}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.TopRight, Mode=TwoWay}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="50,0,0,0"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="toprighttooltipBorder" Width="30" Height="30">
                                    <Path x:Name="toprighttooltipPath" Data="F1M120,455.7578L109,455.7578C107.897,455.7578,107,454.8608,107,453.7578C107,452.6548,107.897,451.7578,109,451.7578L120,451.7578C121.103,451.7578,122,452.6548,122,453.7578C122,454.8608,121.103,455.7578,120,455.7578 M120,450.7578L119.483,450.7578L119.483,447.4998L116.225,450.7578L109,450.7578C107.346,450.7578,106,452.1038,106,453.7578C106,455.4118,107.346,456.7578,109,456.7578L120,456.7578C121.654,456.7578,123,455.4118,123,453.7578C123,452.1038,121.654,450.7578,120,450.7578" Fill="#FFC4C4C4" Height="15" Stretch="Fill" Width="20" />
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toprighttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toprighttooltipPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toprighttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toprighttooltipPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toprighttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toprighttooltipPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toprighttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toprighttooltipPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=toprighttooltipBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=toprighttooltipBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=toprighttooltip, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=toprighttooltip, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="bottomlefttooltip" 
                                  businessobject:ToolTipBinding.Command="{Binding TextChanged}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.BottomLeft, Mode=TwoWay}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="100,0,0,0"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="bottomlefttooltipBorder" Width="30" Height="30">
                                    <Path x:Name="bottomlefttooltipPath" Data="F1M228,455.7578L217,455.7578C215.897,455.7578,215,454.8608,215,453.7578C215,452.6548,215.897,451.7578,217,451.7578L228,451.7578C229.103,451.7578,230,452.6548,230,453.7578C230,454.8608,229.103,455.7578,228,455.7578 M228,450.7578L217,450.7578C215.346,450.7578,214,452.1038,214,453.7578C214,455.2778,215.14,456.5238,216.608,456.7178L216.608,460.4998L220.351,456.7578L228,456.7578C229.654,456.7578,231,455.4118,231,453.7578C231,452.1038,229.654,450.7578,228,450.7578" Fill="#FFC4C4C4" Height="15" Stretch="Fill" Width="20" />
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomlefttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomlefttooltipPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomlefttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomlefttooltipPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomlefttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomlefttooltipPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomlefttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomlefttooltipPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=bottomlefttooltipBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=bottomlefttooltipBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=bottomlefttooltip, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=bottomlefttooltip, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="bottomrighttooltip" 
                                  businessobject:ToolTipBinding.Command="{Binding TextChanged}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.BottomRight, Mode=TwoWay}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="150,0,0,0"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="bottomrighttooltipBorder" Width="30" Height="30">
                                    <Path x:Name="bottomrighttooltipPath" Data="F1M174,455.7578L163,455.7578C161.897,455.7578,161,454.8608,161,453.7578C161,452.6548,161.897,451.7578,163,451.7578L174,451.7578C175.103,451.7578,176,452.6548,176,453.7578C176,454.8608,175.103,455.7578,174,455.7578 M174,450.7578L163,450.7578C161.346,450.7578,160,452.1038,160,453.7578C160,455.4118,161.346,456.7578,163,456.7578L169.407,456.7578L173.149,460.4998L173.149,456.7578L174,456.7578C175.654,456.7578,177,455.4118,177,453.7578C177,452.1038,175.654,450.7578,174,450.7578" Fill="#FFC4C4C4" Height="15" Stretch="Fill" Width="20"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomrighttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomrighttooltipPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomrighttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomrighttooltipPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomrighttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomrighttooltipPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomrighttooltipBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomrighttooltipPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=bottomrighttooltipBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=bottomrighttooltipBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=bottomrighttooltip, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=bottomrighttooltip, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>
                </Grid>

                <TextBlock Text="TabPosition" Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.VerticalTab, Converter={StaticResource booleanToVisibilityConverter}}"
                       FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                           />
                <Grid Margin="20,10,0,15" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.VerticalTab, Converter={StaticResource booleanToVisibilityConverter}}"
                            >
                    <ToggleButton x:Name="leftVerticalTab" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Left, Mode=TwoWay}" businessobject:VerticalTabBinding.Command="{Binding TextChanged}"
                                  Checked="leftVerticalTab_Checked"
                                  >
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="leftVerticalTabBorder" Width="30" Height="30" Padding="5" CornerRadius="5">
                                    <Path x:Name="leftVerticalTabPath" Data="F1M63,373L53,373L53,367.31L53,366L53,359L63,359z M63,358L53,358L49,358L49,359L49,364.31L52,366.56L52,373L52,374L53,374L63,374L64,374L64,373L64,359L64,358z" Fill="#FFC4C4C4" Stretch="Fill"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftVerticalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftVerticalTabPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftVerticalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftVerticalTabPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftVerticalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftVerticalTabPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftVerticalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftVerticalTabPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=leftVerticalTabBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=leftVerticalTabBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=leftVerticalTab, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=leftVerticalTab, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>

                    <ToggleButton x:Name="rightVerticalTab" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Right, Mode=TwoWay}" Checked="leftVerticalTab_Checked" businessobject:VerticalTabBinding.Command="{Binding TextChanged}"
                                  Margin="50,0,0,0"
                                  >
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="rightVerticalTabBorder" Width="30" Height="30" Padding="5" CornerRadius="5">
                                    <Path x:Name="rightVerticalTabPath" Data="F1M101,366L101,367.31L101,373L91,373L91,359L101,359z M101,358L91,358L90,358L90,359L90,373L90,374L91,374L101,374L102,374L102,366.56L105,364.31L105,359L105,358z" Fill="#FFC4C4C4" Stretch="Fill"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightVerticalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightVerticalTabPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightVerticalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightVerticalTabPath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightVerticalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightVerticalTabPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightVerticalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightVerticalTabPath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=rightVerticalTabBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=rightVerticalTabBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=rightVerticalTab, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=rightVerticalTab, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                </Grid>

                <TextBlock Text="TabPosition" Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.HorizontalTab, Converter={StaticResource booleanToVisibilityConverter}}"
                       FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                           />
                <Grid Margin="20,10,0,15" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.HorizontalTab, Converter={StaticResource booleanToVisibilityConverter}}"
                            >
                    <ToggleButton x:Name="topHorizontalTab" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Top, Mode=TwoWay}" businessobject:HorizontalTabBinding.Command="{Binding TextChanged}"
                                  Checked="topHorizontalTab_Checked"
                                  >
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="topHorizontalTabBorder" Width="30" Height="30" Padding="5" CornerRadius="5">
                                    <Path x:Name="topHorizontalTabpath" Data="F1M63,373L53,373L53,367.31L53,366L53,359L63,359z M63,358L53,358L49,358L49,359L49,364.31L52,366.56L52,373L52,374L53,374L63,374L64,374L64,373L64,359L64,358z" Fill="#FFC4C4C4" Stretch="Fill"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topHorizontalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topHorizontalTabpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topHorizontalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topHorizontalTabpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topHorizontalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topHorizontalTabpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topHorizontalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topHorizontalTabpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=topHorizontalTabBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=topHorizontalTabBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=topHorizontalTab, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=topHorizontalTab, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>

                    <ToggleButton x:Name="bottomHorizontalTab" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Bottom, Mode=TwoWay}" businessobject:HorizontalTabBinding.Command="{Binding TextChanged}"
                                  Checked="topHorizontalTab_Checked" Margin="50,0,0,0"
                                  >
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="bottomHorizontalTabBorder" Width="30" Height="30" Padding="5" CornerRadius="5">
                                    <Path x:Name="bottomHorizontalTabpath" Data="F1M63,373L53,373L53,367.31L53,366L53,359L63,359z M63,358L53,358L49,358L49,359L49,364.31L52,366.56L52,373L52,374L53,374L63,374L64,374L64,373L64,359L64,358z" Fill="#FFC4C4C4" Stretch="Fill"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomHorizontalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomHorizontalTabpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomHorizontalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomHorizontalTabpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomHorizontalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomHorizontalTabpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomHorizontalTabBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomHorizontalTabpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=bottomHorizontalTabBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=bottomHorizontalTabBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=bottomHorizontalTab, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=bottomHorizontalTab, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                </Grid>

                <TextBlock Text="Direction" Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.VerticalCurlyBraces, Converter={StaticResource booleanToVisibilityConverter}}"
                       FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                           />

                <Grid Margin="20,10,0,15" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.VerticalCurlyBraces, Converter={StaticResource booleanToVisibilityConverter}}">
                    <businessobject:CustomToggleButton x:Name="leftdirection" 
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Left, Mode=TwoWay}"                        
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Left"/>
                        </ToolTipService.ToolTip>
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="leftdirectionBorder" Width="30" Height="30" Padding="5" CornerRadius="5">
                                    <Path x:Name="leftdirectionpath" Data="F1M583.9836,560.6287C579.5446,560.8997,573.6976,562.0677,569.1746,565.8917C564.4926,569.8527,562.0826,575.9657,562.0056,583.8867C562.1536,585.3027,565.4976,618.6857,553.9806,629.9997C551.9506,631.9957,549.5596,633.1357,546.8956,633.5537C549.5596,633.9717,551.9506,635.1127,553.9806,637.1077C565.4976,648.4247,562.1566,681.8097,562.0156,683.0457C562.0826,691.1357,564.4866,697.2447,569.1586,701.2037C573.6716,705.0297,579.5336,706.1987,583.9836,706.4737L583.9836,709.6557C579.0346,709.3797,572.3996,708.0677,567.1396,703.6197C561.7266,699.0417,558.9446,692.1287,558.8766,682.8967C558.9076,682.5657,562.2156,649.6077,551.7736,639.3517C549.6286,637.2447,547.0606,636.3577,543.9966,636.5407L543.9966,630.5657C547.0606,630.7487,549.6286,629.8627,551.7736,627.7557C562.2116,617.5007,558.9046,584.5437,558.8676,584.0367C558.9446,574.9807,561.7296,568.0677,567.1426,563.4897C572.4016,559.0417,579.0356,557.7307,583.9836,557.4547z" Fill="#FF1E1E1E" Stretch="Fill" Width="16"/>

                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftdirectionpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftdirectionpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftdirectionpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftdirectionpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=leftdirectionBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=leftdirectionBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=leftdirection, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=leftdirection, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="rightdirection" 
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Right, Mode=TwoWay}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="50,0,0,0" 
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Right"/>
                        </ToolTipService.ToolTip>
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="rightdirectionBorder" Width="30" Height="30" Padding="5" CornerRadius="5">
                                    <Path x:Name="rightdirectionpath" Data="F1M962.4552,1117.0542C966.8942,1117.3252,972.7412,1118.4932,977.2642,1122.3172C981.9462,1126.2782,984.3562,1132.3912,984.4322,1140.3132C984.2852,1141.7282,980.9412,1175.1112,992.4582,1186.4252C994.4882,1188.4212,996.8792,1189.5612,999.5432,1189.9792C996.8792,1190.3972,994.4882,1191.5382,992.4582,1193.5332C980.9412,1204.8502,984.2822,1238.2352,984.4232,1239.4712C984.3562,1247.5612,981.9522,1253.6702,977.2802,1257.6292C972.7672,1261.4552,966.9052,1262.6242,962.4552,1262.8992L962.4552,1266.0812C967.4042,1265.8052,974.0392,1264.4932,979.2992,1260.0452C984.7122,1255.4672,987.4942,1248.5542,987.5622,1239.3222C987.5312,1238.9922,984.2232,1206.0332,994.6652,1195.7772C996.8102,1193.6702,999.3782,1192.7832,1002.4422,1192.9662L1002.4422,1186.9912C999.3782,1187.1742,996.8102,1186.2882,994.6652,1184.1812C984.2272,1173.9262,987.5342,1140.9692,987.5712,1140.4622C987.4942,1131.4062,984.7092,1124.4932,979.2962,1119.9152C974.0372,1115.4672,967.4032,1114.1562,962.4552,1113.8802z" Fill="#d8d7d6" Stretch="Fill" Width="16"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightdirectionpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightdirectionpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightdirectionpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightdirectionpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=rightdirectionBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=rightdirectionBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=rightdirection, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=rightdirection, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>
                </Grid>

                <TextBlock Text="Direction" Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.HorizontalCurlyBraces, Converter={StaticResource booleanToVisibilityConverter}}"
                       FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                           />
                <Grid Margin="20,10,0,15" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.HorizontalCurlyBraces, Converter={StaticResource booleanToVisibilityConverter}}">
                    <businessobject:CustomToggleButton x:Name="topdirection"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Top, Mode=TwoWay}" 
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Top"/>
                        </ToolTipService.ToolTip>
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="topdirectionBorder" Width="30" Height="30" Padding="5" CornerRadius="5">
                                    <Path x:Name="topdirectionpath" StrokeThickness="1" Data="M73.111001,0 L79.085976,0 C78.902993,3.0639952 79.790017,5.6319884 81.897011,7.7769769 92.152985,18.218994 125.11099,14.91098 125.44198,14.880004 134.67397,14.947998 141.58699,17.72998 146.16499,23.143005 150.61299,28.402984 151.925,35.037994 152.201,39.986999 L149.019,39.986999 C148.74397,35.536987 147.57497,29.674988 143.74898,25.161987 139.78999,20.48999 133.68098,18.085998 125.59097,18.01898 124.355,18.160003 90.969025,21.500976 79.652993,9.9839791 77.657998,7.9539793 76.517006,5.5629881 76.098977,2.8989871 75.681008,5.5629881 74.540993,7.9539793 72.545022,9.9839791 61.230999,21.500976 27.848013,18.156982 26.432,18.009979 18.511042,18.085998 12.398007,20.496002 8.4370094,25.177978 4.6130357,29.700989 3.4450064,35.548004&#xd;&#xa;3.1740105,39.986999 L0,39.986999 C0.27600088,35.039001 1.5870357,28.404999 6.0350318,23.145996 10.613034,17.733002 17.525996,14.947998 26.582022,14.871002 27.089043,14.907989 60.046002,18.214996 70.301003,7.7769769 72.407998,5.6319884 73.293984,3.0639952 73.111001,0 z" Fill="#FF1E1E1E" Stretch="Fill" Height="16"/>

                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topdirectionpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topdirectionpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topdirectionpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="topdirectionpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=topdirectionBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=topdirectionBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=topdirection, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=topdirection, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>
                    <businessobject:CustomToggleButton x:Name="bottomdirection" 
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Bottom, Mode=TwoWay}" 
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="50,0,0,0"
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Bottom"/>
                        </ToolTipService.ToolTip>
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="bottomdirectionBorder" Width="30" Height="30" Padding="5" CornerRadius="5">
                                    <Path x:Name="bottomdirectionpath" StrokeThickness="1" Data="F1M722.0567,1178.2357C721.7857,1182.6747,720.6177,1188.5217,716.7937,1193.0447C712.8327,1197.7267,706.7197,1200.1367,698.7987,1200.2137C697.3827,1200.0657,663.9997,1196.7217,652.6857,1208.2387C650.6897,1210.2687,649.5497,1212.6597,649.1317,1215.3237C648.7137,1212.6597,647.5727,1210.2687,645.5777,1208.2387C634.2617,1196.7217,600.8757,1200.0627,599.6397,1200.2037C591.5497,1200.1367,585.4407,1197.7327,581.4817,1193.0607C577.6557,1188.5477,576.4867,1182.6857,576.2117,1178.2357L573.0297,1178.2357C573.3057,1183.1847,574.6177,1189.8197,579.0657,1195.0797C583.6437,1200.4927,590.5567,1203.2747,599.7887,1203.3427C600.1197,1203.3117,633.0777,1200.0047,643.3337,1210.4457C645.4407,1212.5907,646.3277,1215.1587,646.1447,1218.2227L652.1197,1218.2227C651.9367,1215.1587,652.8227,1212.5907,654.9297,1210.4457C665.1847,1200.0077,698.1417,1203.3147,698.6487,1203.3517C707.7047,1203.2747,714.6177,1200.4897,719.1957,1195.0767C723.6437,1189.8177,724.9547,1183.1837,725.2307,1178.2357z" Fill="#d8d7d6" Stretch="Fill" Height="16"/>

                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomdirectionpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomdirectionpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomdirectionpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomdirectionBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottomdirectionpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d8d7d6"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=bottomdirectionBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=bottomdirectionBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=bottomdirection, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=bottomdirection, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>
                </Grid>

                <TextBlock Text="Popover" Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.Popover, Converter={StaticResource booleanToVisibilityConverter}}"
                       FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                           />
                <Grid Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.Popover, Converter={StaticResource booleanToVisibilityConverter}}">
                    <businessobject:CustomToggleButton x:Name="leftpopover" 
                                  businessobject:PopoverBinding.Command="{Binding TextChanged}"                                  
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Left , Mode=TwoWay}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="leftpopoverBorder" Width="30" Height="30" Padding="5" CornerRadius="5">
                                    <Path x:Name="leftpopoverpath" Data="F1M201,140L212,140L212,151L201,151z M213,150.5L213,139.5L213,139L212,139L201,139L200,139L200,139.5L200,141.426L197,145.5L200,148.531L200,151.5L200,152L201,152L212,152L213,152L213,151.5z" Fill="#d1d3d4" Height="13" Stretch="Fill" Width="16" />
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpopoverpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpopoverpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpopoverpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="leftpopoverpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=leftpopoverBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=leftpopoverBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=leftpopover, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=leftpopover, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="rightpopover" 
                                  businessobject:PopoverBinding.Command="{Binding TextChanged}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Right, Mode=TwoWay}"
                                  Margin="50,0,0,0" 
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="rightpopoverBorder" Width="30" Height="30" Padding="5" CornerRadius="5">
                                    <Path x:Name="rightpopoverpath" Data="F1M40,138L51,138L51,149L40,149z M52,139.469L52,136.5L52,137L51,137L40,137L39,137L39,136.5L39,137.5L39,148.5L39,150L40,150L51,150L52,150L52,148.5L52,146.574L55,142.5z" Fill="#d1d3d4" Height="13.5" Stretch="Fill" Width="16"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpopoverpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpopoverpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpopoverpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rightpopoverpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=rightpopoverBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=rightpopoverBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=rightpopover, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=rightpopover, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="toppopover" 
                                  businessobject:PopoverBinding.Command="{Binding TextChanged}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Top, Mode=TwoWay}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="100,0,0,0" 
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="toppopoverBorder" Width="30" Height="30" Padding="5" CornerRadius="5">
                                    <Path x:Name="toppopoverpath" Data="F1M140,151L129,151L129,140L140,140z M140,139L138.074,139L134,136L130.969,139L128,139L128,138.5L128,139.5L128,150.5L128,151.5L128,152L129,152L140,152L141,152L141,150.5L141,139.5L141,139z" Fill="#d1d3d4" Height="16" Stretch="Fill" Width="13"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toppopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toppopoverpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toppopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toppopoverpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toppopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toppopoverpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toppopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="toppopoverpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=toppopoverBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=toppopoverBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=toppopover, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=toppopover, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="bottompopover" 
                                  businessobject:PopoverBinding.Command="{Binding TextChanged}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Bottom, Mode=TwoWay}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="150,0,0,0" 
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="bottompopoverBorder" Width="30" Height="30" Padding="5" CornerRadius="5">
                                    <Path x:Name="bottompopoverpath" Data="F1M285,149L274,149L274,138L285,138z M285,137L285,137L274,137L273,137L273,138L273,149L273,150L274,150L275.926,150L280,153L283.031,150L286,150L286,150L286,149L286,138L286,137L286,137z" Fill="#d1d3d4" Height="16" Stretch="Fill" Width="13" />
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottompopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottompopoverpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottompopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottompopoverpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottompopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottompopoverpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottompopoverBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="bottompopoverpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=bottompopoverBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=bottompopoverBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=bottompopover, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=bottompopover, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>
                </Grid>

                <TextBlock Text="Shapes" Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.GeometricShapes, Converter={StaticResource booleanToVisibilityConverter}}"
                       FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                           />
                <Grid Margin="20,10,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.GeometricShapes, Converter={StaticResource booleanToVisibilityConverter}}"
                            >
                    <businessobject:CustomToggleButton x:Name="ellipse" BorderThickness="0"
                                  businessobject:GeometricShapesBinding.Command="{Binding TextChanged}"
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Ellipse , Mode=TwoWay}"
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="5,0,0,0"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="ellipseBorder" Width="25" Height="25" CornerRadius="5">
                                    <Path x:Name="ellipsepath" Fill="AliceBlue" Data="F1M68.0127,627.6934C63.8767,627.6934,60.5127,631.0574,60.5127,635.1934C60.5127,639.3294,63.8767,642.6934,68.0127,642.6934C72.1487,642.6934,75.5127,639.3294,75.5127,635.1934C75.5127,631.0574,72.1487,627.6934,68.0127,627.6934 M68.0127,643.6934C63.3257,643.6934,59.5127,639.8804,59.5127,635.1934C59.5127,630.5064,63.3257,626.6934,68.0127,626.6934C72.6997,626.6934,76.5127,630.5064,76.5127,635.1934C76.5127,639.8804,72.6997,643.6934,68.0127,643.6934" Width="16" Height="16" Stretch="Fill"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ellipseBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ellipsepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ellipseBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ellipsepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ellipseBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ellipsepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ellipseBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ellipsepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=ellipseBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=ellipseBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=ellipse, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=ellipse, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="rectangle" 
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Rectangle , Mode=TwoWay}" 
                                  businessobject:GeometricShapesBinding.Command="{Binding TextChanged}"   
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="50,0,0,0"                             
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="rectangleBorder" Width="25" Height="25" CornerRadius="5">
                                    <Path x:Name="rectanglepath" Fill="#d1d3d4" Data="F1M124,643L139,643L139,628L124,628z M140,644L123,644L123,627L140,627z" Width="16" Height="16" Stretch="Fill"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rectangleBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rectanglepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rectangleBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rectanglepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rectangleBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rectanglepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rectangleBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="rectanglepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=rectangleBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=rectangleBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=rectangle, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=rectangle, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="roundedcorner" 
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.RoundedRectangle , Mode=TwoWay}" 
                                  businessobject:GeometricShapesBinding.Command="{Binding TextChanged}"                                  
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="100,0,0,0"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="roundedcornerBorder" Width="25" Height="25" CornerRadius="5">
                                    <Path x:Name="roundedcornerpath" Fill="#d1d3d4" Data="F1M204.5645,631C203.7025,631,203.0005,631.702,203.0005,632.564L203.0005,639.436C203.0005,640.298,203.7025,641,204.5645,641L216.4355,641C217.2975,641,218.0005,640.298,218.0005,639.436L218.0005,632.564C218.0005,631.702,217.2975,631,216.4355,631z M216.4355,642L204.5645,642C203.1505,642,202.0005,640.85,202.0005,639.436L202.0005,632.564C202.0005,631.15,203.1505,630,204.5645,630L216.4355,630C217.8495,630,219.0005,631.15,219.0005,632.564L219.0005,639.436C219.0005,640.85,217.8495,642,216.4355,642" Width="16" Height="16" Stretch="Fill"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="roundedcornerBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="roundedcornerpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="roundedcornerBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="roundedcornerpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="roundedcornerBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="roundedcornerpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="roundedcornerBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="roundedcornerpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=roundedcornerBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=roundedcornerBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=roundedcorner, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=roundedcorner, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="pentagon" 
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Pentagon , Mode=TwoWay}" 
                                  businessobject:GeometricShapesBinding.Command="{Binding TextChanged}"  
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="150,0,0,0" 
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="pentagonBorder" Width="25" Height="25" CornerRadius="5">
                                    <!--<Path x:Name="pentagonpath" Fill="#d1d3d4" Data="F1M291.0558,640L287.9998,630.595L295.9998,624.783L303.9998,630.595L300.9438,640z" Width="16" Height="16" Stretch="Fill"/>-->
                                    <Path x:Name="pentagonpath" Data="M492.2692,400.1684L482.7202,370.7784L507.7202,352.6144L532.7202,370.7784L523.1702,400.1684L492.2692,400.1684z" Fill="Transparent" Height="16" StrokeStartLineCap="Flat" Stretch="Fill" StrokeEndLineCap="Flat" Stroke="#d1d3d4" StrokeThickness="1" Width="16" />
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pentagonBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pentagonpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pentagonBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pentagonpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pentagonBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pentagonpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pentagonBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pentagonpath" Storyboard.TargetProperty="Stroke">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=pentagonBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=pentagonBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=pentagon, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=pentagon, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                </Grid>

                <Grid Margin="20,20,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.GeometricShapes, Converter={StaticResource booleanToVisibilityConverter}}"
                            >
                    <businessobject:CustomToggleButton x:Name="diamond" 
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Diamond , Mode=TwoWay}" 
                                  businessobject:GeometricShapesBinding.Command="{Binding TextChanged}"  
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="5,0,0,0"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="diamondBorder" Width="25" Height="25" CornerRadius="5">
                                    <Path x:Name="diamondpath" Fill="#d1d3d4" Data="F1M60.7197,696L68.0127,703.293L75.3057,696L68.0127,688.707z M68.0127,704.707L59.3057,696L68.0127,687.293L76.7197,696z" Width="16" Height="16" Stretch="Fill"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="diamondBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="diamondpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="diamondBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="diamondpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="diamondBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="diamondpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="diamondBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="diamondpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=diamondBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=diamondBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=diamond, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=diamond, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="star" 
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Star , Mode=TwoWay}" 
                                  businessobject:GeometricShapesBinding.Command="{Binding TextChanged}"  
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="50,0,0,0"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="starBorder" Width="25" Height="25" CornerRadius="5">
                                    <Path x:Name="starpath" Fill="#d1d3d4" Data="F1M122.5488,699.5518L126.5338,702.4628L125.0138,697.8168L128.9808,694.9998L124.0728,694.9998L122.5478,690.3058L121.0228,694.9998L116.1138,694.9998L120.0818,697.8228L118.5618,702.4408z M128.4498,705.1018L122.5468,700.7878L116.6458,705.0638L118.9028,698.2088L112.9818,693.9998L120.2958,693.9998L122.5478,687.0698L124.7998,693.9998L132.1148,693.9998L126.1938,698.2048z" Width="16" Height="16" Stretch="Fill"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="starBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="starpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="starBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="starpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="starBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="starpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="starBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="starpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=starBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=starBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=star, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=star, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="parallelogram" 
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Parallelogram , Mode=TwoWay}" 
                                  businessobject:GeometricShapesBinding.Command="{Binding TextChanged}"                                  
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="100,0,0,0"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="parallelogramBorder" Width="25" Height="25" CornerRadius="5">
                                    <Path x:Name="parallelogrampath" Fill="#d1d3d4" Data="F1M191.2441,701L200.7541,701L205.6511,691L195.9941,691z M201.3771,702L189.6621,702L195.3611,690L207.2551,690z" Width="16" Height="16" Stretch="Fill"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="parallelogramBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="parallelogrampath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="parallelogramBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="parallelogrampath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="parallelogramBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="parallelogrampath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="parallelogramBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="parallelogrampath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=parallelogramBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=parallelogramBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=parallelogram, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=parallelogram, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="triangle" 
                                  IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Triangle , Mode=TwoWay}" 
                                  businessobject:GeometricShapesBinding.Command="{Binding TextChanged}"                                  
                                  IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"
                                  Margin="150,0,0,0"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="triangleBorder" Width="25" Height="25" CornerRadius="5">
                                    <Path x:Name="trianglepath" Fill="#d1d3d4" Data="F1M267.54,703L281.808,703L274.674,690.644z M283,704L267,704L267,703.5L266.404,703.25L274.755,688.644L283.31,703.25L283,703.5z" Width="16" Height="16" Stretch="Fill"/>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="triangleBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="trianglepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="triangleBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="trianglepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="triangleBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="trianglepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="triangleBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="trianglepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=triangleBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=triangleBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=triangle, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=triangle, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                </Grid>

                <Border Height="120" Margin="10,15,0,0" Width="193"
                        Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.WindowBox, Converter={StaticResource booleanToVisibilityConverter}}"
                        x:Name="windowboxpanel"
                        PointerMoved="windowboxpanel_PointerMoved" PointerReleased="windowboxpanel_PointerReleased"
                        >
                    <Grid >
                        <!--<Path Data="F1M836,54L649,54L649,29L836,29z M836,116L649,116L649,56L836,56z M836,141L649,141L649,118L836,118z M836,26L649,26L646,26L646,29L646,54L646,56L646,116L646,118L646,142L646,144L649,144L836,144L839,144L839,142L839,118L839,116L839,56L839,54L839,29L839,26z" Fill="#FFC4C4C4" Stretch="Fill"/>-->
                        <Path Data="M681.15,263.352L612.218,263.352L612.218,215.299L681.15,215.299z" Fill="Transparent" Height="118" Width="193" Stretch="Fill" StrokeThickness="1" Stroke="#d1d3d4" VerticalAlignment="Top" />
                        <Grid Margin="0,20,0,0" >
                            <Grid x:Name="topmarginborder" Margin="{Binding SelectedDiagram.SelectedItems.DataContext.TopMargin, Mode=TwoWay}" >
                                <Path x:Name="topmarginlinepath" Data="M482.2174,586.4791L567.4014,586.4791" Stretch="Fill"  Stroke="#7c7c7c" StrokeThickness="2" VerticalAlignment="Top"  Margin="0,10,0,0" />
                                <Grid x:Name="topmarginicongrid"  PointerPressed="topmarginicongrid_PointerPressed"  HorizontalAlignment="Left" Margin="50,0,0,0" VerticalAlignment="Top" Height="15.264" Width="15.529">
                                    <Path x:Name="topmarginpath"  Data="F1M73.3142,56.3744L80.0782,45.2084L66.5502,45.2084z" Fill="#FFC4C4C4" Height="15.264" Stretch="Fill" Width="15.529" Margin="0,5,0,-5" />

                                    <!--<Path Data="F1M791.3345,108.7357L786.0705,113.9997L796.5985,113.9997z" Fill="#FFC4C4C4" Height="5.264" Stretch="Fill" Width="10.528" />
                                    <Path Data="F1M791.3345,125.2643L796.5985,120.0003L786.0705,120.0003z" Fill="#FFC4C4C4" Height="5.264" Stretch="Fill" Width="10.528" Margin="0,10,0,0" />-->
                                </Grid>
                            </Grid>
                        </Grid>

                        <Grid Margin="0,0,0,15" VerticalAlignment="Bottom">
                            <Grid x:Name="bottommarginborder"  Margin="{Binding SelectedDiagram.SelectedItems.DataContext.BottomMargin, Mode=TwoWay}" >
                                <Path x:Name="bottommarginlinepath"  Data="M482.2174,586.4791L567.4014,586.4791" Stretch="Fill"  Stroke="#7c7c7c" StrokeThickness="2" VerticalAlignment="Top"  Margin="0,10,0,0" />
                                <Grid x:Name="bottommarginicongrid" PointerPressed="bottommarginicongrid_PointerPressed"  HorizontalAlignment="Right" Margin="0,0,50,0" VerticalAlignment="Top" Height="15.264" Width="15.529">
                                    <Path x:Name="bottommarginpath" Data="F1M722.8988,52L717.6348,46.736L712.3698,52z" Fill="#FFC4C4C4" Height="15.264" Stretch="Fill" Width="15.529" />
                                    <!--<Path Data="F1M791.3345,108.7357L786.0705,113.9997L796.5985,113.9997z" Fill="#FFC4C4C4" Height="5.264" Stretch="Fill" Width="10.528" />
                                    <Path Data="F1M791.3345,125.2643L796.5985,120.0003L786.0705,120.0003z" Fill="#FFC4C4C4" Height="5.264" Stretch="Fill" Width="10.528" Margin="0,10,0,0" />-->
                                </Grid>
                            </Grid>
                        </Grid>

                        <Path Data="F1M830.8167,131.3202L829.5007,130.0042L821.6037,137.9002L822.9207,139.2162z" Fill="#FFC4C4C4" Height="9.212" Stretch="Fill" Width="9.213" HorizontalAlignment="Right" Margin="0,0,8.184,4.784" VerticalAlignment="Bottom"/>
                        <Path Data="F1M825.5524,137.9006L826.8684,139.2166L830.8164,135.2686L829.5004,133.9526z" Fill="#FFC4C4C4" Height="5.264" Stretch="Fill" Width="5.264" HorizontalAlignment="Right" Margin="0,0,8.184,4.783" VerticalAlignment="Bottom"/>

                        <ToggleButton x:Name="closebutton" 
                                      IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.CloseButtonEnabled , Mode=TwoWay}"
                                      HorizontalAlignment="Right" Margin="0,7.931,14.764,0" VerticalAlignment="Top">
                            <ToggleButton.Template>
                                <ControlTemplate>
                                    <Border x:Name="closeborder" Width="18" Height="15">
                                        <Path x:Name="closepath" Data="F1M813.7077,45.7756000000001L818.3137,41.1696000000001L822.9207,45.7756000000001L824.2367,44.4596000000001L819.6297,39.8536000000001L824.2367,35.2466000000001L822.9207,33.9306000000001L818.3137,38.5376000000001L813.7077,33.9306000000001L812.3917,35.2466000000001L816.9977,39.8536000000001L812.3917,44.4596000000001z" Fill="#FFC4C4C4" Height="11.845" Stretch="Fill" Width="11.845" />
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CheckStates">
                                                <VisualState x:Name="Checked">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="closeborder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="closepath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="UnChecked">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="closeborder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="closepath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="MouseEnter">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="closeborder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="closepath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="MouseLeave">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="closeborder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="closepath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Interactivity:Interaction.Behaviors>
                                            <Core:DataTriggerBehavior Binding="{Binding ElementName=closebutton, Path=IsChecked}"  Value="True">
                                                <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                            </Core:DataTriggerBehavior>
                                            <Core:DataTriggerBehavior Binding="{Binding ElementName=closebutton, Path=IsChecked}" Value="False">
                                                <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                            </Core:DataTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=closeborder}">
                                                <Core:GoToStateAction StateName="MouseEnter"/>
                                            </Core:EventTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=closeborder}">
                                                <Core:GoToStateAction StateName="MouseLeave"/>
                                            </Core:EventTriggerBehavior>
                                        </Interactivity:Interaction.Behaviors>
                                    </Border>
                                </ControlTemplate>
                            </ToggleButton.Template>
                        </ToggleButton>
                        <ToggleButton x:Name="minimizebutton"
                                      IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.MinimizeButtonEnabled , Mode=TwoWay}"
                                      HorizontalAlignment="Right" Margin="0,8,58,0" VerticalAlignment="Top">
                            <ToggleButton.Template>
                                <ControlTemplate>
                                    <Border Width="18" Height="15" x:Name="minimizeborder">
                                        <Path x:Name="minimizepath" Data="F1M777,39L768,39L768,41L777,41z" Fill="#d1d3d4" Height="2" Stretch="Fill" Width="13" VerticalAlignment="Center"/>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CheckStates">
                                                <VisualState x:Name="Checked">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="minimizeborder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="minimizepath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="UnChecked">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="minimizeborder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="minimizepath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="MouseEnter">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="minimizeborder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="minimizepath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="MouseLeave">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="minimizeborder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="minimizepath" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Interactivity:Interaction.Behaviors>
                                            <Core:DataTriggerBehavior Binding="{Binding ElementName=minimizebutton, Path=IsChecked}"  Value="True">
                                                <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                            </Core:DataTriggerBehavior>
                                            <Core:DataTriggerBehavior Binding="{Binding ElementName=minimizebutton, Path=IsChecked}" Value="False">
                                                <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                            </Core:DataTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=minimizeborder}">
                                                <Core:GoToStateAction StateName="MouseEnter"/>
                                            </Core:EventTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=minimizeborder}">
                                                <Core:GoToStateAction StateName="MouseLeave"/>
                                            </Core:EventTriggerBehavior>
                                        </Interactivity:Interaction.Behaviors>
                                    </Border>
                                </ControlTemplate>
                            </ToggleButton.Template>
                        </ToggleButton>
                        <ToggleButton x:Name="maximizebutton" 
                                       IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.MaximizeButtonEnabled , Mode=TwoWay}"
                                      Margin="0,8,36,0" VerticalAlignment="Top" HorizontalAlignment="Right">
                            <ToggleButton.Template>
                                <ControlTemplate>
                                    <Grid Width="18" Height="15" x:Name="maximizeborder">
                                        <Path x:Name="maximizepath1" Data="F1M789,38L799,38L799,44L789,44z M799,45L800,45L800,44L800,38L800,37L799,37L789,37L788,37L788,38L788,44L788,45L789,45z" Fill="#FFC4C4C4" Height="8" Stretch="Fill" Width="12" Margin="0,5,3,0"/>
                                        <Path x:Name="maximizepath2" Data="F1M802,43L803,43L803,35L803,34L802,34L790,34L790,35L802,35z" Fill="#FFC4C4C4" Height="9" Stretch="Fill" Width="13" HorizontalAlignment="Right" />
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CheckStates">
                                                <VisualState x:Name="Checked">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="maximizeborder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="maximizepath1" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="maximizepath2" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="UnChecked">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="maximizeborder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="maximizepath1" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="maximizepath2" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="MouseEnter">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="maximizeborder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="maximizepath1" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="maximizepath2" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="MouseLeave">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="maximizeborder" Storyboard.TargetProperty="Background">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="maximizepath1" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="maximizepath2" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Interactivity:Interaction.Behaviors>
                                            <Core:DataTriggerBehavior Binding="{Binding ElementName=maximizebutton, Path=IsChecked}"  Value="True">
                                                <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                            </Core:DataTriggerBehavior>
                                            <Core:DataTriggerBehavior Binding="{Binding ElementName=maximizebutton, Path=IsChecked}" Value="False">
                                                <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                            </Core:DataTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=maximizeborder}">
                                                <Core:GoToStateAction StateName="MouseEnter"/>
                                            </Core:EventTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=maximizeborder}">
                                                <Core:GoToStateAction StateName="MouseLeave"/>
                                            </Core:EventTriggerBehavior>
                                        </Interactivity:Interaction.Behaviors>
                                    </Grid>
                                </ControlTemplate>
                            </ToggleButton.Template>
                        </ToggleButton>


                        <!--<Path Data="F1M717.6345,63.2643L722.8985,58.0003L712.3705,58.0003z" Fill="#FFC4C4C4" Height="5.264" Stretch="Fill" Width="10.528" HorizontalAlignment="Left" Margin="66.37,32,0,0" VerticalAlignment="Top"/>-->
                        <!--<Path Data="F1M791.3345,108.7357L786.0705,113.9997L796.5985,113.9997z" Fill="#FFC4C4C4" Height="5.264" Stretch="Fill" Width="10.528" HorizontalAlignment="Right" Margin="0,0,42.402,30" VerticalAlignment="Bottom"/>
                    <Path Data="F1M791.3345,125.2643L796.5985,120.0003L786.0705,120.0003z" Fill="#FFC4C4C4" Height="5.264" Stretch="Fill" Width="10.528" HorizontalAlignment="Right" Margin="0,0,42.402,18.736" VerticalAlignment="Bottom"/>-->
                    </Grid>
                </Border>

                <TextBlock Text="IOS Keyboard" Margin="20,5,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.ioskeyboard, Converter={StaticResource booleanToVisibilityConverter}}"                          
                       FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                           />
                <Grid  Margin="20,15,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.ioskeyboard, Converter={StaticResource booleanToVisibilityConverter}}" >
                    <businessobject:CustomToggleButton x:Name="iphone" Checked="iphone_Checked" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.IPhone}" businessobject:IOSKeyboardBinding.Command="{Binding TextChanged}" 
                                                       IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  Margin="5,0,0,0" 
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="IPhone"/>
                        </ToolTipService.ToolTip>
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="iphoneBorder" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="10" Height="20">
                                        <Path Data="F1M519.025,778.598L440.575,778.598L440.575,662.229L519.025,662.229z" Fill="White" Stretch="Fill" Margin="4.727,23.367,1.823,26.264"/>
                                        <Path x:Name="iphonepath" Data="F1M514.848,775.862L441.848,775.862L441.848,666.862L514.848,666.862z M480.027,797.615C475.607,797.615,472.027,794.034,472.027,789.615C472.027,785.197,475.607,781.615,480.027,781.615C484.445,781.615,488.027,785.197,488.027,789.615C488.027,794.034,484.445,797.615,480.027,797.615 M486.848,652.924C486.848,653.995,485.981,654.862,484.911,654.862L471.786,654.862C470.716,654.862,469.848,653.995,469.848,652.924L469.848,652.799C469.848,651.729,470.716,650.862,471.786,650.862L484.911,650.862C485.981,650.862,486.848,651.729,486.848,652.799z M520.848,651.112C520.848,644.347,515.364,638.862,508.598,638.862L448.098,638.862C441.333,638.862,435.848,644.347,435.848,651.112L435.848,792.612C435.848,799.378,441.333,804.862,448.098,804.862L508.598,804.862C515.364,804.862,520.848,799.378,520.848,792.612z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphoneBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphoneBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphoneBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphoneBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=iphoneBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=iphoneBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphone, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphone, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="ipad" Checked="iphone_Checked" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.IPad}" businessobject:IOSKeyboardBinding.Command="{Binding TextChanged}"  
                                                       IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  Margin="50,0,0,0" 
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="IPAD"/>
                        </ToolTipService.ToolTip>
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="ipadBorder" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="15" Height="20">
                                        <Path Data="F1M655.09,394.342L529.09,394.342L529.09,230.293L655.09,230.293z" Fill="White" Stretch="Fill" Margin="7.988,25.318,8.501,35.366"/>
                                        <Path x:Name="ipadpath" Data="F1M653.848,390.862L527.848,390.862L527.848,233.862L653.848,233.862z M592.346,419.634C586.363,419.634,581.516,414.786,581.516,408.804C581.516,402.823,586.363,397.973,592.346,397.973C598.327,397.973,603.177,402.823,603.177,408.804C603.177,414.786,598.327,419.634,592.346,419.634 M602.848,221.362C602.848,222.743,601.729,223.862,600.348,223.862L582.348,223.862C580.967,223.862,579.848,222.743,579.848,221.362C579.848,219.981,580.967,218.862,582.348,218.862L600.348,218.862C601.729,218.862,602.848,219.981,602.848,221.362 M663.591,211.406C663.591,207.854,660.712,204.975,657.16,204.975L527.532,204.975C523.981,204.975,521.102,207.854,521.102,211.406L521.102,423.278C521.102,426.829,523.981,429.708,527.532,429.708L657.16,429.708C660.712,429.708,663.591,426.829,663.591,423.278z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=ipadBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=ipadBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=ipad, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=ipad, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="wide" Checked="wide_Checked" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Wide}" businessobject:IOSKeyboardBinding.Command="{Binding TextChanged}"   
                                                       IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  Margin="100,0,0,0" 
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Wide"/>
                        </ToolTipService.ToolTip>
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="wideBorder" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="18" Height="15">
                                        <Path x:Name="widepath" Data="F1M104.667,147.436L126.667,147.436L126.667,132.436L104.667,132.436z" Fill="#d1d3d4" Stretch="Fill"/>
                                        <Path Data="F1M108.667,136.436L106.667,136.436L106.667,134.436L108.667,134.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="2" HorizontalAlignment="Left" Margin="2,2,0,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M112.667,136.436L110.667,136.436L110.667,134.436L112.667,134.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="2" HorizontalAlignment="Left" Margin="6,2,0,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M116.667,136.436L114.667,136.436L114.667,134.436L116.667,134.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Margin="10,2,10,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M120.667,136.436L118.667,136.436L118.667,134.436L120.667,134.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="2" HorizontalAlignment="Right" Margin="0,2,6,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M124.667,136.436L122.667,136.436L122.667,134.436L124.667,134.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="2" HorizontalAlignment="Right" Margin="0,2,2,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M108.667,142.436L106.667,142.436L106.667,140.436L108.667,140.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="2" HorizontalAlignment="Left" Margin="2,0,0,5" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M112.667,142.436L110.667,142.436L110.667,140.436L112.667,140.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="2" HorizontalAlignment="Left" Margin="6,0,0,5" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M116.667,142.436L114.667,142.436L114.667,140.436L116.667,140.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Margin="10,0,10,5" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M120.667,142.436L118.667,142.436L118.667,140.436L120.667,140.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="2" HorizontalAlignment="Right" Margin="0,0,6,5" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M124.667,142.436L122.667,142.436L122.667,140.436L124.667,140.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="2" HorizontalAlignment="Right" Margin="0,0,2,5" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M108.667,145.436L106.667,145.436L106.667,143.436L108.667,143.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="2" HorizontalAlignment="Left" Margin="2,0,0,2" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M120.667,145.436L110.667,145.436L110.667,143.436L120.667,143.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Margin="6,0,6,2" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M124.667,145.436L122.667,145.436L122.667,143.436L124.667,143.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="2" HorizontalAlignment="Right" Margin="0,0,2,2" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M112.667,139.436L110.667,139.436L110.667,137.436L112.667,137.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="2" HorizontalAlignment="Left" Margin="6,5,0,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M116.667,139.436L114.667,139.436L114.667,137.436L116.667,137.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Margin="10,5,10,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M120.667,139.436L118.667,139.436L118.667,137.436L120.667,137.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="2" HorizontalAlignment="Right" Margin="0,5,6,0" VerticalAlignment="Top"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="wideBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="widepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="wideBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="widepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="wideBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="widepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="wideBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="widepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=wideBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=wideBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=wide, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=wide, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="standard" Checked="wide_Checked" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Standard}" businessobject:IOSKeyboardBinding.Command="{Binding TextChanged}"       
                                  Margin="150,0,0,0" IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Standard"/>
                        </ToolTipService.ToolTip>
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="standardBorder" Width="25" Height="25" CornerRadius="5">
                                    <Grid Height="15" Width="23">
                                        <Path x:Name="standardpath" Data="F1M156.667,147.436L183.667,147.436L183.667,132.436L156.667,132.436z" Fill="#d1d3d4" Stretch="Fill"/>
                                        <Path Data="F1M161.667,136.436L158.667,136.436L158.667,134.436L161.667,134.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="3" HorizontalAlignment="Left" Margin="2,2,0,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M166.667,136.436L163.667,136.436L163.667,134.436L166.667,134.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="3" HorizontalAlignment="Left" Margin="7,2,0,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M171.667,136.436L168.667,136.436L168.667,134.436L171.667,134.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Margin="12,2,12,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M176.667,136.436L173.667,136.436L173.667,134.436L176.667,134.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="3" HorizontalAlignment="Right" Margin="0,2,7,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M181.667,136.436L178.667,136.436L178.667,134.436L181.667,134.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="3" HorizontalAlignment="Right" Margin="0,2,2,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M161.667,142.436L158.667,142.436L158.667,140.436L161.667,140.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="3" HorizontalAlignment="Left" Margin="2,0,0,5" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M166.667,142.436L163.667,142.436L163.667,140.436L166.667,140.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="3" HorizontalAlignment="Left" Margin="7,0,0,5" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M171.667,142.436L168.667,142.436L168.667,140.436L171.667,140.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Margin="12,0,12,5" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M176.667,142.436L173.667,142.436L173.667,140.436L176.667,140.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="3" HorizontalAlignment="Right" Margin="0,0,7,5" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M181.667,142.436L178.667,142.436L178.667,140.436L181.667,140.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="3" HorizontalAlignment="Right" Margin="0,0,2,5" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M161.667,145.436L158.667,145.436L158.667,143.436L161.667,143.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="3" HorizontalAlignment="Left" Margin="2,0,0,2" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M176.667,145.436L163.667,145.436L163.667,143.436L176.667,143.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Margin="7,0,7,2" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M181.667,145.436L178.667,145.436L178.667,143.436L181.667,143.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="3" HorizontalAlignment="Right" Margin="0,0,2,2" VerticalAlignment="Bottom"/>
                                        <Path Data="F1M166.667,139.436L163.667,139.436L163.667,137.436L166.667,137.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="3" HorizontalAlignment="Left" Margin="7,5,0,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M171.667,139.436L168.667,139.436L168.667,137.436L171.667,137.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Margin="12,5,12,0" VerticalAlignment="Top"/>
                                        <Path Data="F1M176.667,139.436L173.667,139.436L173.667,137.436L176.667,137.436z" Fill="#FF2E3138" Height="2" Stretch="Fill" Width="3" HorizontalAlignment="Right" Margin="0,5,7,0" VerticalAlignment="Top"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="standardBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="standardpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="standardBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="standardpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="standardBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="standardpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="standardBorder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="standardpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=standardBorder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=standardBorder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=standard, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=standard, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>
                </Grid>

                <TextBlock Text="IPAD" Margin="20,5,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.ipad, Converter={StaticResource booleanToVisibilityConverter}}"                          
                       FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                           />
                <Grid  Margin="20,15,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.ipad, Converter={StaticResource booleanToVisibilityConverter}}">
                    <businessobject:CustomToggleButton x:Name="verticalipad" Checked="verticalipad_Checked" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.VerticalOrientation}" businessobject:IPADBinding.Command="{Binding TextChanged}" 
                                  Margin="5,0,0,0" IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Vertical"/>
                        </ToolTipService.ToolTip>
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="verticalipadborder" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="15" Height="20">
                                        <!--<Path Data="F1M655.09,394.342L529.09,394.342L529.09,230.293L655.09,230.293z" Fill="White" Stretch="Fill"/>-->
                                        <Path x:Name="verticalipadpath" Data="F1M653.848,390.862L527.848,390.862L527.848,233.862L653.848,233.862z M592.346,419.634C586.363,419.634,581.516,414.786,581.516,408.804C581.516,402.823,586.363,397.973,592.346,397.973C598.327,397.973,603.177,402.823,603.177,408.804C603.177,414.786,598.327,419.634,592.346,419.634 M602.848,221.362C602.848,222.743,601.729,223.862,600.348,223.862L582.348,223.862C580.967,223.862,579.848,222.743,579.848,221.362C579.848,219.981,580.967,218.862,582.348,218.862L600.348,218.862C601.729,218.862,602.848,219.981,602.848,221.362 M663.591,211.406C663.591,207.854,660.712,204.975,657.16,204.975L527.532,204.975C523.981,204.975,521.102,207.854,521.102,211.406L521.102,423.278C521.102,426.829,523.981,429.708,527.532,429.708L657.16,429.708C660.712,429.708,663.591,426.829,663.591,423.278z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalipadborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalipadpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalipadborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalipadpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalipadborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalipadpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalipadborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticalipadpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=verticalipadborder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=verticalipadborder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=verticalipad, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=verticalipad, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="horizontalipad" Checked="verticalipad_Checked" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.HorizontalOrientation}" businessobject:IPADBinding.Command="{Binding TextChanged}" 
                                  Margin="50,0,0,0" IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Horizontal"/>
                        </ToolTipService.ToolTip>
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="horizontalipadborder" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="20" Height="15">
                                        <!--<Path Data="F1M861.928,253.087L1028.72,253.087L1028.72,379.087L861.928,379.087z" Fill="White" Stretch="Fill" />-->
                                        <Path x:Name="horizontalipadpath" Data="F1M864.848,253.862L1021.848,253.862L1021.848,379.862L864.848,379.862z M836.72,316.342C836.72,310.358,841.568,305.511,847.551,305.511C853.532,305.511,858.381,310.358,858.381,316.342C858.381,322.323,853.532,327.172,847.551,327.172C841.568,327.172,836.72,322.323,836.72,316.342 M1036.848,326.362C1036.848,327.743,1035.729,328.862,1034.348,328.862C1032.967,328.862,1031.848,327.743,1031.848,326.362L1031.848,308.362C1031.848,306.981,1032.967,305.862,1034.348,305.862C1035.729,305.862,1036.848,306.981,1036.848,308.362z M1044.949,387.586C1048.5,387.586,1051.379,384.707,1051.379,381.156L1051.379,251.528C1051.379,247.976,1048.5,245.097,1044.949,245.097L833.077,245.097C829.525,245.097,826.646,247.976,826.646,251.528L826.646,381.156C826.646,384.707,829.525,387.586,833.077,387.586z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalipadborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalipadpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalipadborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalipadpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalipadborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalipadpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalipadborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontalipadpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=horizontalipadborder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=horizontalipadborder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=horizontalipad, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=horizontalipad, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <ToggleButton x:Name="ipadtransparent" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.TransparentBakground}" businessobject:IPADBinding.Command="{Binding TextChanged}" 
                                  Margin="100,0,0,0"
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Transparent"/>
                        </ToolTipService.ToolTip>
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="ipadtransparentborder" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="15" Height="20">
                                        <Path Data="F1M861.928,253.087L1028.72,253.087L1028.72,379.087L861.928,379.087z" Fill="White" Stretch="Fill" />
                                        <Path x:Name="ipadtransparentpath" Data="F1M864.848,253.862L1021.848,253.862L1021.848,379.862L864.848,379.862z M836.72,316.342C836.72,310.358,841.568,305.511,847.551,305.511C853.532,305.511,858.381,310.358,858.381,316.342C858.381,322.323,853.532,327.172,847.551,327.172C841.568,327.172,836.72,322.323,836.72,316.342 M1036.848,326.362C1036.848,327.743,1035.729,328.862,1034.348,328.862C1032.967,328.862,1031.848,327.743,1031.848,326.362L1031.848,308.362C1031.848,306.981,1032.967,305.862,1034.348,305.862C1035.729,305.862,1036.848,306.981,1036.848,308.362z M1044.949,387.586C1048.5,387.586,1051.379,384.707,1051.379,381.156L1051.379,251.528C1051.379,247.976,1048.5,245.097,1044.949,245.097L833.077,245.097C829.525,245.097,826.646,247.976,826.646,251.528L826.646,381.156C826.646,384.707,829.525,387.586,833.077,387.586z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtransparentborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtransparentpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtransparentborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtransparentpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtransparentborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtransparentpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtransparentborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtransparentpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=ipadtransparentborder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=ipadtransparentborder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=ipadtransparent, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=ipadtransparent, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>

                    <ToggleButton x:Name="ipadtopbar" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.TopBar}" businessobject:IPADBinding.Command="{Binding TextChanged}"  
                                  Margin="150,0,0,0" 
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="App Bar"/>
                        </ToolTipService.ToolTip>
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="ipadtopbarborder" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="15" Height="20">
                                        <Path Data="F1M861.928,253.087L1028.72,253.087L1028.72,379.087L861.928,379.087z" Fill="White" Stretch="Fill" />
                                        <Path x:Name="ipadtopbarpath" Data="F1M864.848,253.862L1021.848,253.862L1021.848,379.862L864.848,379.862z M836.72,316.342C836.72,310.358,841.568,305.511,847.551,305.511C853.532,305.511,858.381,310.358,858.381,316.342C858.381,322.323,853.532,327.172,847.551,327.172C841.568,327.172,836.72,322.323,836.72,316.342 M1036.848,326.362C1036.848,327.743,1035.729,328.862,1034.348,328.862C1032.967,328.862,1031.848,327.743,1031.848,326.362L1031.848,308.362C1031.848,306.981,1032.967,305.862,1034.348,305.862C1035.729,305.862,1036.848,306.981,1036.848,308.362z M1044.949,387.586C1048.5,387.586,1051.379,384.707,1051.379,381.156L1051.379,251.528C1051.379,247.976,1048.5,245.097,1044.949,245.097L833.077,245.097C829.525,245.097,826.646,247.976,826.646,251.528L826.646,381.156C826.646,384.707,829.525,387.586,833.077,387.586z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtopbarborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtopbarpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtopbarborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtopbarpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtopbarborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtopbarpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtopbarborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ipadtopbarpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=ipadtopbarborder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=ipadtopbarborder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=ipadtopbar, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=ipadtopbar, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                </Grid>

                <TextBlock Text="IPhone" Margin="20,5,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.IPhone, Converter={StaticResource booleanToVisibilityConverter}}"                          
                       FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI"
                           />
                <Grid  Margin="20,15,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.IPhone, Converter={StaticResource booleanToVisibilityConverter}}">
                    <businessobject:CustomToggleButton x:Name="verticaliphone" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.VerticalOrientation, Mode=TwoWay}" 
                                  Margin="5,0,0,0" IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Vertical"/>
                        </ToolTipService.ToolTip>
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="verticaliphoneborder" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="15" Height="20">
                                        <Path x:Name="verticaliphonepath" Data="F1M631.848,775.862L558.848,775.862L558.848,666.862L631.848,666.862z M596.693,797.615C592.274,797.615,588.693,794.034,588.693,789.615C588.693,785.197,592.274,781.615,596.693,781.615C601.112,781.615,604.693,785.197,604.693,789.615C604.693,794.034,601.112,797.615,596.693,797.615 M603.848,652.924C603.848,653.995,602.981,654.862,601.911,654.862L588.786,654.862C587.716,654.862,586.848,653.995,586.848,652.924L586.848,652.799C586.848,651.729,587.716,650.862,588.786,650.862L601.911,650.862C602.981,650.862,603.848,651.729,603.848,652.799z M637.848,651.112C637.848,644.347,632.364,638.862,625.598,638.862L565.098,638.862C558.333,638.862,552.848,644.347,552.848,651.112L552.848,792.612C552.848,799.378,558.333,804.862,565.098,804.862L625.598,804.862C632.364,804.862,637.848,799.378,637.848,792.612z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticaliphoneborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticaliphonepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticaliphoneborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticaliphonepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticaliphoneborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticaliphonepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticaliphoneborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="verticaliphonepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=verticaliphoneborder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=verticaliphoneborder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=verticaliphone, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=verticaliphone, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="horizontaliphone" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.HorizontalOrientation, Mode=TwoWay}"
                                  Margin="50,0,0,0" IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  >
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Horizontal"/>
                        </ToolTipService.ToolTip>
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="horizontaliphoneborder" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="20" Height="15">
                                        <Path x:Name="horizontaliphonepath" Data="F1M836.848,758.862L727.848,758.862L727.848,685.862L836.848,685.862z M859.33,720.349C859.33,724.769,855.749,728.349,851.33,728.349C846.912,728.349,843.33,724.769,843.33,720.349C843.33,715.931,846.912,712.349,851.33,712.349C855.749,712.349,859.33,715.931,859.33,720.349 M715.848,728.924C715.848,729.995,714.981,730.862,713.911,730.862L713.786,730.862C712.716,730.862,711.848,729.995,711.848,728.924L711.848,715.8C711.848,714.729,712.716,713.862,713.786,713.862L713.911,713.862C714.981,713.862,715.848,714.729,715.848,715.8z M865.848,692.112C865.848,685.347,860.364,679.862,853.598,679.862L712.098,679.862C705.333,679.862,699.848,685.347,699.848,692.112L699.848,752.612C699.848,759.378,705.333,764.862,712.098,764.862L853.598,764.862C860.364,764.862,865.848,759.378,865.848,752.612z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontaliphoneborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontaliphonepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontaliphoneborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontaliphonepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontaliphoneborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontaliphonepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontaliphoneborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="horizontaliphonepath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=horizontaliphoneborder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=horizontaliphoneborder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=horizontaliphone, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=horizontaliphone, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <ToggleButton x:Name="iphonetransparent" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.TransparentBakground, Mode=TwoWay}" 
                                  Margin="100,0,0,0" 
                                  >
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="iphonetransparentborder" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="15" Height="20">
                                        <Path Data="F1M519.025,778.598L440.575,778.598L440.575,662.229L519.025,662.229z" Fill="White" Stretch="Fill" />
                                        <Path x:Name="iphonetransparentpath" Data="F1M514.848,775.862L441.848,775.862L441.848,666.862L514.848,666.862z M480.027,797.615C475.607,797.615,472.027,794.034,472.027,789.615C472.027,785.197,475.607,781.615,480.027,781.615C484.445,781.615,488.027,785.197,488.027,789.615C488.027,794.034,484.445,797.615,480.027,797.615 M486.848,652.924C486.848,653.995,485.981,654.862,484.911,654.862L471.786,654.862C470.716,654.862,469.848,653.995,469.848,652.924L469.848,652.799C469.848,651.729,470.716,650.862,471.786,650.862L484.911,650.862C485.981,650.862,486.848,651.729,486.848,652.799z M520.848,651.112C520.848,644.347,515.364,638.862,508.598,638.862L448.098,638.862C441.333,638.862,435.848,644.347,435.848,651.112L435.848,792.612C435.848,799.378,441.333,804.862,448.098,804.862L508.598,804.862C515.364,804.862,520.848,799.378,520.848,792.612z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetransparentborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetransparentpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetransparentborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetransparentpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetransparentborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetransparentpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetransparentborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetransparentpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=iphonetransparentborder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=iphonetransparentborder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonetransparent, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonetransparent, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>

                    <ToggleButton x:Name="iphonetopbar" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.TopBar, Mode=TwoWay}"
                                  Margin="150,0,0,0" 
                                  >
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="iphonetopbarborder" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="15" Height="20">
                                        <Path Data="F1M861.928,253.087L1028.72,253.087L1028.72,379.087L861.928,379.087z" Fill="White" Stretch="Fill" />
                                        <Path x:Name="iphonetopbarpath" Data="F1M864.848,253.862L1021.848,253.862L1021.848,379.862L864.848,379.862z M836.72,316.342C836.72,310.358,841.568,305.511,847.551,305.511C853.532,305.511,858.381,310.358,858.381,316.342C858.381,322.323,853.532,327.172,847.551,327.172C841.568,327.172,836.72,322.323,836.72,316.342 M1036.848,326.362C1036.848,327.743,1035.729,328.862,1034.348,328.862C1032.967,328.862,1031.848,327.743,1031.848,326.362L1031.848,308.362C1031.848,306.981,1032.967,305.862,1034.348,305.862C1035.729,305.862,1036.848,306.981,1036.848,308.362z M1044.949,387.586C1048.5,387.586,1051.379,384.707,1051.379,381.156L1051.379,251.528C1051.379,247.976,1048.5,245.097,1044.949,245.097L833.077,245.097C829.525,245.097,826.646,247.976,826.646,251.528L826.646,381.156C826.646,384.707,829.525,387.586,833.077,387.586z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetopbarborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetopbarpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetopbarborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetopbarpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetopbarborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetopbarpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetopbarborder" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonetopbarpath" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=iphonetopbarborder}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=iphonetopbarborder}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonetopbar, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonetopbar, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                </Grid>
                <Grid  Margin="20,15,0,0" Visibility="{Binding SelectedDiagram.SelectedItems.PropertiesList.SettingTab.IPhone, Converter={StaticResource booleanToVisibilityConverter}}">
                    <businessobject:CustomToggleButton x:Name="iphonepattern1" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Pattern1, Mode=TwoWay}"
                                  Margin="5,0,0,0" IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="iphonepattern1border" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="15" Height="20">
                                        <Path x:Name="iphonepattern1path" Data="F1M631.848,775.862L558.848,775.862L558.848,666.862L631.848,666.862z M596.693,797.615C592.274,797.615,588.693,794.034,588.693,789.615C588.693,785.197,592.274,781.615,596.693,781.615C601.112,781.615,604.693,785.197,604.693,789.615C604.693,794.034,601.112,797.615,596.693,797.615 M603.848,652.924C603.848,653.995,602.981,654.862,601.911,654.862L588.786,654.862C587.716,654.862,586.848,653.995,586.848,652.924L586.848,652.799C586.848,651.729,587.716,650.862,588.786,650.862L601.911,650.862C602.981,650.862,603.848,651.729,603.848,652.799z M637.848,651.112C637.848,644.347,632.364,638.862,625.598,638.862L565.098,638.862C558.333,638.862,552.848,644.347,552.848,651.112L552.848,792.612C552.848,799.378,558.333,804.862,565.098,804.862L625.598,804.862C632.364,804.862,637.848,799.378,637.848,792.612z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern1border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern1path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern1border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern1path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern1border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern1path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern1border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern1path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=iphonepattern1border}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=iphonepattern1border}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonepattern1, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonepattern1, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="iphonepattern2" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Pattern2, Mode=TwoWay}" 
                                  Margin="40,0,0,0" IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="iphonepattern2border" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="15" Height="20">
                                        <Path x:Name="iphonepattern2path" Data="F1M631.848,775.862L558.848,775.862L558.848,666.862L631.848,666.862z M596.693,797.615C592.274,797.615,588.693,794.034,588.693,789.615C588.693,785.197,592.274,781.615,596.693,781.615C601.112,781.615,604.693,785.197,604.693,789.615C604.693,794.034,601.112,797.615,596.693,797.615 M603.848,652.924C603.848,653.995,602.981,654.862,601.911,654.862L588.786,654.862C587.716,654.862,586.848,653.995,586.848,652.924L586.848,652.799C586.848,651.729,587.716,650.862,588.786,650.862L601.911,650.862C602.981,650.862,603.848,651.729,603.848,652.799z M637.848,651.112C637.848,644.347,632.364,638.862,625.598,638.862L565.098,638.862C558.333,638.862,552.848,644.347,552.848,651.112L552.848,792.612C552.848,799.378,558.333,804.862,565.098,804.862L625.598,804.862C632.364,804.862,637.848,799.378,637.848,792.612z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern2border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern2path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern2border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern2path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern2border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern2path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern2border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern2path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=iphonepattern2border}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=iphonepattern2border}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonepattern2, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonepattern2, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="iphonepattern3" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Pattern3, Mode=TwoWay}"
                                  Margin="80,0,0,0" IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="iphonepattern3border" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="15" Height="20">
                                        <Path x:Name="iphonepattern3path" Data="F1M631.848,775.862L558.848,775.862L558.848,666.862L631.848,666.862z M596.693,797.615C592.274,797.615,588.693,794.034,588.693,789.615C588.693,785.197,592.274,781.615,596.693,781.615C601.112,781.615,604.693,785.197,604.693,789.615C604.693,794.034,601.112,797.615,596.693,797.615 M603.848,652.924C603.848,653.995,602.981,654.862,601.911,654.862L588.786,654.862C587.716,654.862,586.848,653.995,586.848,652.924L586.848,652.799C586.848,651.729,587.716,650.862,588.786,650.862L601.911,650.862C602.981,650.862,603.848,651.729,603.848,652.799z M637.848,651.112C637.848,644.347,632.364,638.862,625.598,638.862L565.098,638.862C558.333,638.862,552.848,644.347,552.848,651.112L552.848,792.612C552.848,799.378,558.333,804.862,565.098,804.862L625.598,804.862C632.364,804.862,637.848,799.378,637.848,792.612z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern3border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern3path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern3border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern3path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern3border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern3path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern3border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern3path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=iphonepattern3border}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=iphonepattern3border}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonepattern3, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonepattern3, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton  x:Name="iphonepattern4" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Pattern4, Mode=TwoWay}"
                                  Margin="120,0,0,0" IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="iphonepattern4border" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="15" Height="20">
                                        <Path x:Name="iphonepattern4path" Data="F1M631.848,775.862L558.848,775.862L558.848,666.862L631.848,666.862z M596.693,797.615C592.274,797.615,588.693,794.034,588.693,789.615C588.693,785.197,592.274,781.615,596.693,781.615C601.112,781.615,604.693,785.197,604.693,789.615C604.693,794.034,601.112,797.615,596.693,797.615 M603.848,652.924C603.848,653.995,602.981,654.862,601.911,654.862L588.786,654.862C587.716,654.862,586.848,653.995,586.848,652.924L586.848,652.799C586.848,651.729,587.716,650.862,588.786,650.862L601.911,650.862C602.981,650.862,603.848,651.729,603.848,652.799z M637.848,651.112C637.848,644.347,632.364,638.862,625.598,638.862L565.098,638.862C558.333,638.862,552.848,644.347,552.848,651.112L552.848,792.612C552.848,799.378,558.333,804.862,565.098,804.862L625.598,804.862C632.364,804.862,637.848,799.378,637.848,792.612z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern4border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern4path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern4border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern4path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern4border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern4path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern4border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern4path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=iphonepattern4border}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=iphonepattern4border}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonepattern4, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonepattern4, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>

                    <businessobject:CustomToggleButton x:Name="iphonepattern5" IsChecked="{Binding SelectedDiagram.SelectedItems.DataContext.Pattern5, Mode=TwoWay}"
                                  Margin="160,0,0,0" IsLocked="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked, Mode=TwoWay}"
                                  >
                        <businessobject:CustomToggleButton.Template>
                            <ControlTemplate>
                                <Border x:Name="iphonepattern5border" Width="25" Height="25" CornerRadius="5">
                                    <Grid Width="15" Height="20">
                                        <Path x:Name="iphonepattern5path" Data="F1M631.848,775.862L558.848,775.862L558.848,666.862L631.848,666.862z M596.693,797.615C592.274,797.615,588.693,794.034,588.693,789.615C588.693,785.197,592.274,781.615,596.693,781.615C601.112,781.615,604.693,785.197,604.693,789.615C604.693,794.034,601.112,797.615,596.693,797.615 M603.848,652.924C603.848,653.995,602.981,654.862,601.911,654.862L588.786,654.862C587.716,654.862,586.848,653.995,586.848,652.924L586.848,652.799C586.848,651.729,587.716,650.862,588.786,650.862L601.911,650.862C602.981,650.862,603.848,651.729,603.848,652.799z M637.848,651.112C637.848,644.347,632.364,638.862,625.598,638.862L565.098,638.862C558.333,638.862,552.848,644.347,552.848,651.112L552.848,792.612C552.848,799.378,558.333,804.862,565.098,804.862L625.598,804.862C632.364,804.862,637.848,799.378,637.848,792.612z" Fill="#d1d3d4" Stretch="Fill"/>
                                    </Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern5border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern5path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnChecked">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern5border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#2e3138"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern5path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseEnter">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern5border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern5path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="MouseLeave">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern5border" Storyboard.TargetProperty="Background">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="iphonepattern5path" Storyboard.TargetProperty="Fill">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Interactivity:Interaction.Behaviors>
                                        <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=iphonepattern5border}">
                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=iphonepattern5border}">
                                            <Core:GoToStateAction StateName="MouseLeave"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonepattern5, Path=IsChecked}"  Value="True">
                                            <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=iphonepattern5, Path=IsChecked}" Value="False">
                                            <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                        </Core:DataTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                </Border>
                            </ControlTemplate>
                        </businessobject:CustomToggleButton.Template>
                    </businessobject:CustomToggleButton>
                </Grid>
                <Border Height="30"/>
            </StackPanel>
        </Popup>

        <Popup x:Name="linkProperties" IsOpen="{Binding SelectedDiagram.SelectedItems.OpenLinkPanel}"
               HorizontalOffset="{Binding SelectedDiagram.SelectedItems.PropertyPanelOffsetX, Mode=TwoWay}"
               VerticalOffset="{Binding SelectedDiagram.SelectedItems.PropertyPanelOffsetY, Mode=TwoWay}"
               Opened="Popup_Opened"
               >
            <StackPanel Background="#2e3138" Width="250" MaxHeight="430" PointerPressed="textpropertiespanel_PointerPressed" PointerReleased="textpropertiespanel_PointerReleased" PointerMoved="textProperties_PointerMoved">
                    <TextBlock Text="Links" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="20,15,0,0"/>
                    <Path Data="M482.2174,586.4791L567.4014,586.4791" Stretch="Fill"  Stroke="#7c7c7c" StrokeThickness="1" StrokeDashArray="3,3" Margin="0,14,0,0" />
                <ScrollViewer VerticalScrollBarVisibility="Auto"  HorizontalScrollBarVisibility="Disabled" MaxHeight="350" >
                    <ItemsControl x:Name="linksItemsControl" Margin="20,5,0,35" ItemsSource="{Binding SelectedDiagram.SelectedItems.Links}"
                              Tag="{Binding}" 
                              >
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Vertical"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <TextBlock Name="linkstitletextblock" Text="{Binding Title}" Tag="{Binding SelectedLinkIndex, Mode=TwoWay}" FontSize="14" FontStyle="Normal" Foreground="#d1d3d4" FontFamily="Segoe UI" Margin="0,10,0,0"/>                                    
                                    <Grid>                                        
                                        <ComboBox Tag="{Binding Path=Text, ElementName=linkstitletextblock}" 
                                                  Width="210" Height="30"
                                  HorizontalAlignment="Left"
                                  DataContext="{Binding Tag, ElementName=linksItemsControl}"
                                  SelectedIndex="{Binding Tag, ElementName=linkstitletextblock, Mode=TwoWay}"
                                  businessobject:LinkBinding.Command="{Binding TextChanged}"  
                                  ItemsSource="{Binding SelectedDiagram.SelectedItems.LinkedPages}"
                                 >
                                    </ComboBox>
                                        <TextBlock IsHitTestVisible="False" Text="{Binding WebURL}" FontSize="16" Foreground="Black" FontStyle="Normal" FontFamily="Segoe UI" Margin="7,5,5,5"/>
                                    </Grid>
                                </StackPanel>
                            </DataTemplate> 
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </StackPanel>            
        </Popup>

        <Popup x:Name="colorpickerpopup" IsOpen="{Binding ElementName=brushpicker, Path=IsOpen, Mode=TwoWay}"  >
            <viewProperty:BrushPicker x:Name="brushpicker" DataContext="{Binding Path=SelectedDiagram.SelectedItems}" Brush="{Binding Path=PickedBrush, Mode=TwoWay}"
                                      />
        </Popup>
    </Grid>
</Page>

    