<Page
    x:Class="Mockup.View.FrameStudio"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Mockup.View"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"    
    mc:Ignorable="d"
    xmlns:view="using:Mockup.View"
    xmlns:viewProperty="using:Mockup.View.Property"
    xmlns:radialmenu="using:Syncfusion.UI.Xaml.Controls.Navigation"
    xmlns:viewmodel="using:Mockup.ViewModel"
    xmlns:Interactivity="using:Microsoft.Xaml.Interactivity" 
    xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:dropdown="using:Syncfusion.UI.Xaml.Controls.SfRibbon"
    xmlns:businessobject="using:Mockup.BusinessObject"
    x:Name="This"
    xmlns:util="using:Syncfusion.UI.Xaml.Diagram.Utility"    
    >
    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="ms-appx:///Common/StandardStyles.xaml" />
                <ResourceDictionary Source="ms-appx:///Showcase/Mockup/Theme/MockupUI.xaml" />
            </ResourceDictionary.MergedDictionaries>
        <businessobject:VisibilityToBooleanConverter x:Key="visibilityToBooleanConverter"/>
        <businessobject:BooleanToVisibilityConverter x:Key="booleanToVisibilityConverter"/>
        <businessobject:BooleanToOppositeVisibilityConverter x:Key="booleanToOppositeVisibilityConverter"/>
        <viewmodel:DiagramBuilderVM x:Key="diagrambuilderVM"/>

        <viewmodel:CustomHyperlinkButton x:Key="customHyperlinkButto"></viewmodel:CustomHyperlinkButton>
        <Style TargetType="view:ConnectorView"/>
        <Style TargetType="view:NodeView">
            <Setter Property="Background" Value="Transparent"/>
        </Style>
        <Style TargetType="view:Diagram"/>
        <!--<Style TargetType="ToggleSwitch">
            <Setter Property="Margin" Value="10,10,0,0"></Setter>
            <Setter Property="HorizontalAlignment" Value="Left"></Setter>
            <Setter Property="VerticalAlignment" Value="Center"></Setter>
            <Setter Property="FontSize" Value="14"></Setter>
            <Setter Property="Background" Value="#fd4f3f"/>
            <Setter Property="OnContent" Value=""/>
        </Style>-->

        <SolidColorBrush x:Key="ToggleSwitchCurtainBackgroundThemeBrush" Color="#FF5729C1" />
        <SolidColorBrush x:Key="ToggleSwitchCurtainDisabledBackgroundThemeBrush" Color="Transparent" />
        <SolidColorBrush x:Key="ToggleSwitchCurtainPointerOverBackgroundThemeBrush" Color="#FF6E46CA" />
        <SolidColorBrush x:Key="ToggleSwitchCurtainPressedBackgroundThemeBrush" Color="#FF7E4FEC" />

        <SolidColorBrush x:Key="ToggleSwitchDisabledForegroundThemeBrush" Color="#66FFFFFF" />
        <SolidColorBrush x:Key="ToggleSwitchForegroundThemeBrush" Color="#FFFFFFFF" />

        <SolidColorBrush x:Key="ToggleSwitchHeaderDisabledForegroundThemeBrush" Color="#66FFFFFF" />
        <SolidColorBrush x:Key="ToggleSwitchHeaderForegroundThemeBrush" Color="#FFFFFFFF" />

        <SolidColorBrush x:Key="ToggleSwitchOuterBorderBorderThemeBrush" Color="#59FFFFFF" />
        <SolidColorBrush x:Key="ToggleSwitchOuterBorderDisabledBorderThemeBrush" Color="#33FFFFFF" />

        <SolidColorBrush x:Key="ToggleSwitchThumbBackgroundThemeBrush" Color="#FFFFFFFF" />
        <SolidColorBrush x:Key="ToggleSwitchThumbBorderThemeBrush" Color="#FFFFFFFF" />
        <SolidColorBrush x:Key="ToggleSwitchThumbDisabledBackgroundThemeBrush" Color="#FF7E7E7E" />
        <SolidColorBrush x:Key="ToggleSwitchThumbDisabledBorderThemeBrush" Color="#FF7E7E7E" />
        <SolidColorBrush x:Key="ToggleSwitchThumbPointerOverBackgroundThemeBrush" Color="#FFFFFFFF" />
        <SolidColorBrush x:Key="ToggleSwitchThumbPointerOverBorderThemeBrush" Color="#FFFFFFFF" />
        <SolidColorBrush x:Key="ToggleSwitchThumbPressedBackgroundThemeBrush" Color="#FFFFFFFF" />
        <SolidColorBrush x:Key="ToggleSwitchThumbPressedForegroundThemeBrush" Color="#FFFFFFFF" />

        <SolidColorBrush x:Key="ToggleSwitchTrackBackgroundThemeBrush" Color="#42FFFFFF" />
        <SolidColorBrush x:Key="ToggleSwitchTrackBorderThemeBrush" Color="Transparent" />
        <SolidColorBrush x:Key="ToggleSwitchTrackDisabledBackgroundThemeBrush" Color="#1FFFFFFF" />
        <SolidColorBrush x:Key="ToggleSwitchTrackPointerOverBackgroundThemeBrush" Color="#4AFFFFFF" />
        <SolidColorBrush x:Key="ToggleSwitchTrackPressedBackgroundThemeBrush" Color="#59FFFFFF" />


        <FontFamily x:Key="ContentControlThemeFontFamily">Segoe UI</FontFamily>
        <x:Double x:Key="ControlContentThemeFontSize">14.667</x:Double>
        <SolidColorBrush x:Key="FocusVisualBlackStrokeThemeBrush" Color="Black" />
        <SolidColorBrush x:Key="FocusVisualWhiteStrokeThemeBrush" Color="White" />

        <Style TargetType="ToggleSwitch">
            <Setter Property="Foreground" Value="{ThemeResource ToggleSwitchForegroundThemeBrush}" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}" />
            <Setter Property="MinWidth" Value="154" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleSwitch">
                        <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal" />
                                    <!--<VisualState x:Name="PointerOver">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SwitchCurtain"
                                                                   Storyboard.TargetProperty="Fill">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchCurtainPointerOverBackgroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="InnerBorder"
                                                                   Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchTrackPointerOverBackgroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SwitchKnob"
                                                                   Storyboard.TargetProperty="Fill">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchThumbPointerOverBackgroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SwitchKnob"
                                                                   Storyboard.TargetProperty="Stroke">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchThumbPointerOverBorderThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>-->
                                    <!--<VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SwitchCurtain"
                                                                   Storyboard.TargetProperty="Fill">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchCurtainPressedBackgroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="InnerBorder"
                                                                   Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchTrackPressedBackgroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SwitchKnob"
                                                                   Storyboard.TargetProperty="Fill">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchThumbPressedBackgroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SwitchKnob"
                                                                   Storyboard.TargetProperty="Stroke">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchThumbPressedForegroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>-->
                                    <VisualState x:Name="Disabled">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HeaderContentPresenter"
                                                                   Storyboard.TargetProperty="Foreground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchHeaderDisabledForegroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OffContentPresenter"
                                                                   Storyboard.TargetProperty="Foreground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchDisabledForegroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OnContentPresenter"
                                                                   Storyboard.TargetProperty="Foreground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchDisabledForegroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OuterBorder"
                                                                   Storyboard.TargetProperty="BorderBrush">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchOuterBorderDisabledBorderThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="InnerBorder"
                                                                   Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchTrackDisabledBackgroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SwitchKnob"
                                                                   Storyboard.TargetProperty="Fill">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchThumbDisabledBackgroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SwitchKnob"
                                                                   Storyboard.TargetProperty="Stroke">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchThumbDisabledBorderThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SwitchCurtain"
                                                                   Storyboard.TargetProperty="Fill">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ToggleSwitchCurtainDisabledBackgroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="ToggleStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition x:Name="DraggingToOnTransition"
                                                  From="Dragging"
                                                  To="On"
                                                  GeneratedDuration="0">
                                            <Storyboard>
                                                <RepositionThemeAnimation TargetName="SwitchKnob" FromHorizontalOffset="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.KnobCurrentToOnOffset}" />
                                                <RepositionThemeAnimation TargetName="SwitchCurtain" FromHorizontalOffset="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.CurtainCurrentToOnOffset}" />
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition x:Name="DraggingToOffTransition"
                                                  From="Dragging"
                                                  To="Off"
                                                  GeneratedDuration="0">
                                            <Storyboard>
                                                <RepositionThemeAnimation TargetName="SwitchKnob" FromHorizontalOffset="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.KnobCurrentToOffOffset}" />
                                                <RepositionThemeAnimation TargetName="SwitchCurtain" FromHorizontalOffset="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.CurtainCurrentToOffOffset}" />
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition x:Name="OnToOffTransition"
                                                  From="On"
                                                  To="Off"
                                                  GeneratedDuration="0">
                                            <Storyboard>
                                                <RepositionThemeAnimation TargetName="SwitchKnob" FromHorizontalOffset="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.KnobOnToOffOffset}" />
                                                <RepositionThemeAnimation TargetName="SwitchCurtain" FromHorizontalOffset="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.CurtainOnToOffOffset}" />
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition x:Name="OffToOnTransition"
                                                  From="Off"
                                                  To="On"
                                                  GeneratedDuration="0">
                                            <Storyboard>
                                                <RepositionThemeAnimation TargetName="SwitchKnob" FromHorizontalOffset="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.KnobOffToOnOffset}" />
                                                <RepositionThemeAnimation TargetName="SwitchCurtain" FromHorizontalOffset="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.CurtainOffToOnOffset}" />
                                            </Storyboard>
                                        </VisualTransition>
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Dragging" />
                                    <VisualState x:Name="Off">
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="CurtainTranslateTransform"
                                                     Storyboard.TargetProperty="X"
                                                     To="-44"
                                                     Duration="0" />
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="On">
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="CurtainTranslateTransform"
                                                     Storyboard.TargetProperty="X"
                                                     To="0"
                                                     Duration="0" />
                                            <DoubleAnimation Storyboard.TargetName="KnobTranslateTransform"
                                                     Storyboard.TargetProperty="X"
                                                     To="38"
                                                     Duration="0" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="ContentStates">
                                    <VisualState x:Name="OffContent">
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="OffContentPresenter"
                                                     Storyboard.TargetProperty="Opacity"
                                                     To="1"
                                                     Duration="0" />
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="IsHitTestVisible" Storyboard.TargetName="OffContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <x:Boolean>True</x:Boolean>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="OnContent">
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="OnContentPresenter"
                                                     Storyboard.TargetProperty="Opacity"
                                                     To="1"
                                                     Duration="0" />
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="IsHitTestVisible" Storyboard.TargetName="OnContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <x:Boolean>True</x:Boolean>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="FocusStates">
                                    <VisualState x:Name="Focused">
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="FocusVisualWhite"
                                                     Storyboard.TargetProperty="Opacity"
                                                     To="1"
                                                     Duration="0" />
                                            <DoubleAnimation Storyboard.TargetName="FocusVisualBlack"
                                                     Storyboard.TargetProperty="Opacity"
                                                     To="1"
                                                     Duration="0" />
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Unfocused" />
                                    <VisualState x:Name="PointerFocused" />
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <ContentPresenter x:Name="HeaderContentPresenter"
                                          Foreground="{ThemeResource ToggleSwitchHeaderForegroundThemeBrush}"
                                          Margin="6"
                                          Grid.ColumnSpan="2"
                                          Content="{TemplateBinding Header}"
                                          ContentTemplate="{TemplateBinding HeaderTemplate}"
                                          FontWeight="Semilight"
                                          AutomationProperties.AccessibilityView="Raw" />
                                <Grid Grid.Row="1" Margin="{TemplateBinding Padding}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="7" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ContentPresenter x:Name="OffContentPresenter"
                                              MinWidth="0"
                                              Margin="6,5,0,16"
                                              Opacity="0"
                                              IsHitTestVisible="False"
                                              
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                              AutomationProperties.AccessibilityView="Raw" />
                                    <ContentPresenter x:Name="OnContentPresenter"
                                              MinWidth="0"
                                              Margin="6,5,0,16"
                                              Opacity="0"
                                              IsHitTestVisible="False"
                                              
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                              AutomationProperties.AccessibilityView="Raw" />
                                    <Grid Grid.Column="2" Background="Transparent" ManipulationMode="None">
                                        <Grid x:Name="SwitchKnobBounds" Height="19" Margin="13,5,13,16">
                                            <Border x:Name="OuterBorder"
                                            BorderBrush="#a19f9f"
                                            BorderThickness="2" >
                                                <Border x:Name="InnerBorder"
                                                Background="#a19f9f"
                                                BorderBrush="{ThemeResource ToggleSwitchTrackBorderThemeBrush}"
                                                BorderThickness="1">
                                                    <ContentPresenter x:Name="SwitchCurtainBounds">
                                                        <ContentPresenter x:Name="SwitchCurtainClip">
                                                            <Rectangle x:Name="SwitchCurtain"
                                                               Fill="#fd4f3f"
                                                               Width="44">
                                                                <Rectangle.RenderTransform>
                                                                    <TranslateTransform x:Name="CurtainTranslateTransform" X="-44" />
                                                                </Rectangle.RenderTransform>
                                                            </Rectangle>
                                                            <!--<Ellipse x:Name="SwitchCurtain"
                                                                     Fill="{ThemeResource ToggleSwitchCurtainBackgroundThemeBrush}"
                                                                     Width="44"
                                                                     >
                                                                <Ellipse.RenderTransform>
                                                                    <TranslateTransform x:Name="CurtainTranslateTransform" X="-44" />
                                                                </Ellipse.RenderTransform>
                                                            </Ellipse>-->
                                                        </ContentPresenter>
                                                    </ContentPresenter>
                                                </Border>
                                            </Border>                                            
                                            <Rectangle x:Name="SwitchKnob" 
                                               Fill="#231c1c"
                                               Stroke="{ThemeResource ToggleSwitchThumbBorderThemeBrush}"
                                               StrokeThickness="0"
                                               HorizontalAlignment="Left"
                                               Width="12">
                                                <Rectangle.RenderTransform>
                                                    <TranslateTransform x:Name="KnobTranslateTransform" />
                                                </Rectangle.RenderTransform>
                                            </Rectangle>
                                            <!--<Rectangle x:Name="FocusVisualWhite"
                                               Stroke="{ThemeResource FocusVisualWhiteStrokeThemeBrush}"
                                               StrokeEndLineCap="Square"
                                               StrokeDashArray="1,1"
                                               Opacity="0"
                                               Margin="-3"
                                               StrokeDashOffset="1.5" />
                                            <Rectangle x:Name="FocusVisualBlack"
                                               Stroke="{ThemeResource FocusVisualBlackStrokeThemeBrush}"
                                               StrokeEndLineCap="Square"
                                               StrokeDashArray="1,1"
                                               Opacity="0"
                                               Margin="-3"
                                               StrokeDashOffset="0.5" />-->
                                        </Grid>
                                        <Thumb x:Name="SwitchThumb" AutomationProperties.AccessibilityView="Raw">
                                            <Thumb.Template>
                                                <ControlTemplate TargetType="Thumb">
                                                    <Rectangle Fill="Transparent" />
                                                </ControlTemplate>
                                            </Thumb.Template>
                                        </Thumb>
                                    </Grid>
                                </Grid>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        </ResourceDictionary>
    </Page.Resources>

     <Grid x:Name="rootgrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="45"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--<viewProperty:PropertyPanel Grid.Row="0" Grid.RowSpan="2" HorizontalAlignment="Left" VerticalAlignment="Top"></viewProperty:PropertyPanel>-->

        <Grid Grid.Row="0" Background="#23262b">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="75,0,0,0">
                <TextBlock Name="title" Text="Wireframe Studio" Foreground="#d1d3d4"  FontWeight="Normal" FontSize="22"  ></TextBlock>
            </StackPanel>
            
            <StackPanel x:Name="toolbar" HorizontalAlignment="Center" Orientation="Horizontal"
                        Visibility="{Binding ElementName=This, Path=EditMode, Converter={StaticResource booleanToVisibilityConverter}}"
                        >
                <Button x:Name="undobutton" BorderThickness="0"  Command="{Binding SelectedDiagram.Info.Commands.Undo}"   
                        Height="35" Width="35" IsEnabled="True"
                        >     
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Undo"/>
                    </ToolTipService.ToolTip>
                    <Button.Template> 
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Path x:Name="buttonpath" Stretch="Fill" Width="15.999" Fill="#d1d3d4" Height="8.867" Data="F1M57.5537,165.2327C57.8197,164.6307,57.9617,163.9767,57.9617,163.2987C57.9617,162.0177,57.4637,160.8127,56.5557,159.9067C55.6497,158.9987,54.4447,158.5007,53.1627,158.5007C51.8797,158.5007,50.6747,158.9987,49.7687,159.9067C49.0967,160.5787,48.6507,161.4167,48.4627,162.3267L50.7627,164.9007L44.0957,164.9007L44.6277,158.0297L46.8267,160.4907C47.1677,159.7207,47.6457,159.0117,48.2597,158.3967C49.5687,157.0877,51.3097,156.3657,53.1627,156.3657C55.0157,156.3657,56.7547,157.0877,58.0637,158.3967C59.3737,159.7077,60.0947,161.4477,60.0947,163.2987C60.0947,163.9627,59.9967,164.6137,59.8177,165.2327z"/>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates">
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                               <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>                                    
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                            
                        </ControlTemplate>
                        
                    </Button.Template>
                </Button>
                <Button x:Name="redobutton" BorderThickness="0" Command="{Binding SelectedDiagram.Info.Commands.Redo}"   
                        Height="35" Width="35" IsEnabled="True"
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Redo"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Path x:Name="buttonpath" Stretch="Fill" Fill="#d1d3d4" Width="15.999" Height="8.867" Data="F1M78.6571,165.2327C78.3911,164.6307,78.2491,163.9767,78.2491,163.2987C78.2491,162.0177,78.7471,160.8127,79.6551,159.9067C80.5611,158.9987,81.7661,158.5007,83.0481,158.5007C84.3311,158.5007,85.5361,158.9987,86.4421,159.9067C87.1141,160.5787,87.5601,161.4167,87.7481,162.3267L85.4491,164.9007L92.1151,164.9007L91.5831,158.0297L89.3851,160.4907C89.0431,159.7207,88.5651,159.0117,87.9511,158.3967C86.6421,157.0877,84.9011,156.3657,83.0481,156.3657C81.1951,156.3657,79.4561,157.0877,78.1471,158.3967C76.8371,159.7077,76.1161,161.4477,76.1161,163.2987C76.1161,163.9627,76.2141,164.6137,76.3931,165.2327z"/>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates">
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>

                        </ControlTemplate>

                    </Button.Template>                  
                  </Button>
                <Button x:Name="deleteButton" BorderThickness="0"  Command="{Binding SelectedDiagram.Info.Commands.Delete}"
                        IsEnabled="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}" Height="35" Width="35"                     
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Delete"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Grid Width="12" Height="16">
                                    <Path x:Name="buttonpath1" Stretch="Fill" Data="F1M117.576,167.799L109.576,167.799L109.576,157.799L117.576,157.799z M119.576,154.799L116.576,154.799L116.576,152.799L110.576,152.799L110.576,154.799L107.576,154.799L107.576,157.799L108.576,157.799L108.576,167.799L108.576,168.799L109.576,168.799L117.576,168.799L118.576,168.799L118.576,167.799L118.576,157.799L119.576,157.799z"/>
                                    <Path x:Name="buttonpath2" Stretch="Fill" HorizontalAlignment="Left" Margin="4,6,0,2" Width="1" Data="F1M112.576,158.799L111.576,158.799L111.576,166.799L112.576,166.799z"/>
                                    <Path x:Name="buttonpath3" Stretch="Fill" HorizontalAlignment="Right" Margin="0,6,4,2" Width="1" Data="F1M115.576,158.799L114.576,158.799L114.576,166.799L115.576,166.799z"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates" >
                                        <VisualState x:Name="Enabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"  Value="True">
                                        <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"  Value="False">
                                        <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>

                        </ControlTemplate>
                    </Button.Template>                    
                </Button>
                <Path Stretch="Fill" Stroke="#686868" StrokeThickness="1" HorizontalAlignment="Right" Height="35" Width="1" Margin="5,0,5,0" Data="M388.8,114.5 L388.8,405.6"/>                
                <Button x:Name="cutbutton" BorderThickness="0"  Command="{Binding SelectedDiagram.Info.Commands.Cut}"
                        IsEnabled="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}" Height="35" Width="35"                     
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Cut"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Path x:Name="buttonpath" Stretch="Fill" Width="16" Height="15.179" Data="F1M152.1872,164.0013C152.3852,164.3363,152.3962,164.8313,152.2162,165.4773C151.8982,166.6143,151.1402,167.1043,150.5882,167.1743C150.2892,167.2143,150.0412,167.1353,149.9432,166.9743C149.8572,166.8253,149.8612,166.5903,149.9262,166.3753L150.6292,164.8163L150.6942,164.7723L151.1312,163.7013L151.2512,163.4343C151.5592,163.4953,151.9742,163.6463,152.1872,164.0013 M149.5082,160.5033L148.4652,160.4273L148.0822,160.3843L148.0572,160.3973L146.3612,160.2733C145.7352,160.1553,145.5712,159.7603,145.9052,159.3013C146.2322,158.8523,147.0232,158.4193,148.1712,158.6823C148.8242,158.8303,149.2552,159.0763,149.4562,159.4123C149.6662,159.7683,149.5992,160.2043,149.5082,160.5033 M152.2942,160.8563L155.4202,153.2093L153.2752,154.4823L151.2642,158.3183L151.2042,160.1563L150.9742,160.7093L150.7442,160.6833C150.8732,160.1563,150.9252,159.4413,150.5282,158.7753C150.1462,158.1343,149.4492,157.6933,148.4502,157.4663C146.7082,157.0683,145.4482,157.8113,144.8962,158.5683C144.4192,159.2233,144.4122,160.1123,144.7692,160.7133C144.9412,161.0023,146.1512,161.5493,146.2322,161.5633L147.2692,161.6143L150.4772,161.9303L149.1882,165.0003L148.7662,165.9343C148.7482,165.9833,148.6482,167.2323,148.8242,167.5273C149.1812,168.1283,149.9262,168.4773,150.7282,168.3693C151.6572,168.2463,152.9362,167.5333,153.4162,165.8133C153.6922,164.8273,153.6382,164.0033,153.2572,163.3633C152.8682,162.7093,152.2362,162.4113,151.7162,162.2713L151.8062,162.0523L152.3662,162.1093L154.0272,162.9613L158.3742,163.0543L160.5182,161.7813z"/>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates">
                                        <VisualState x:Name="Enabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"  Value="True">
                                        <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"  Value="False">
                                        <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>                    
                </Button>
                <Button x:Name="duplicatebutton" BorderThickness="0"  Command="{Binding SelectedDiagram.Info.Commands.Copy}"
                        IsEnabled="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}" Height="35" Width="35"                     
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Copy"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Path x:Name="buttonpath" Stretch="Fill" Width="12.629" Height="16" Data="F1M182.2072,167.8572L180.3042,167.8572L177.9582,167.8572L177.7232,167.8572L177.7232,167.6222L177.7232,166.7012L177.7232,166.3372L177.7232,165.6612L177.7232,165.1962L177.7232,161.8972L179.4782,161.8892C179.4922,161.8902,179.5022,161.8872,179.5162,161.8882L181.0202,161.8882L181.0202,160.4612L181.0192,160.4612L181.0192,158.5782L182.2072,158.5782L182.8032,158.5782L183.9442,158.5782L184.5492,158.5782L184.7772,158.5782L184.7772,159.7522L184.7892,159.7522L184.7892,160.7992L184.7842,160.7992L184.7842,165.6192L184.7892,165.6192L184.7892,166.7012L184.7772,166.7012L184.7772,167.8572L184.5492,167.8572z M177.6402,160.7432L177.6382,160.7472L176.7832,161.6492L176.7832,163.0852L176.7832,165.1972L174.5252,165.1972L174.2382,165.1972L174.2382,164.9102L174.2382,163.0852L174.2382,157.9652L175.4362,157.9612L178.2162,157.9612L178.2162,156.6012C178.2292,156.5152,178.2352,156.4512,178.2352,156.4512L178.2352,153.9402L182.5182,153.9402C182.5182,153.9402,182.5212,153.9422,182.5232,153.9422L182.8042,153.9422L182.8042,156.1692L182.8032,156.1692L182.8032,157.6362L180.5872,157.6362L179.7282,158.5412L179.7162,158.5412z M185.7262,158.4942L185.7262,157.6542L185.7182,157.6542L184.7772,157.6542L184.6382,157.6542C184.6072,157.6512,184.5812,157.6362,184.5492,157.6362L183.9442,157.6362L183.9442,154.5222L183.9452,154.5222L183.9452,153.8032L183.9452,153.5182L183.9452,152.7992L182.5182,152.7992L181.3632,152.7992L177.7092,152.7992L176.6682,153.8972L176.6542,153.8972L174.1352,156.5662L174.1332,156.5722L173.0972,157.6662L173.0972,164.2842L173.0972,164.9112L173.0972,165.2662L173.0972,166.3202L173.0972,166.3222L174.4322,166.3222C174.4642,166.3242,174.4922,166.3382,174.5242,166.3382L176.7822,166.3382L176.7822,166.7012L176.7822,167.6232L176.7822,167.9592L176.7742,167.9592L176.7742,168.7992L176.7822,168.7992L177.7232,168.7992L177.9582,168.7992L178.8092,168.7992L183.6912,168.7992L184.5492,168.7992L184.7772,168.7992L185.7182,168.7992L185.7262,168.7992L185.7262,167.9592L185.7182,167.9592L185.7182,167.6612C185.7182,167.6482,185.7262,167.6362,185.7262,167.6232L185.7262,158.8132C185.7262,158.7992,185.7182,158.7882,185.7182,158.7742L185.7182,158.4942z"/>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates">
                                        <VisualState x:Name="Enabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"  Value="True">
                                        <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"  Value="False">
                                        <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>                    
                </Button>
                <Button x:Name="pastebutton" BorderThickness="0"  Command="{Binding Paste}"
                        Height="35" Width="35"                     
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Paste"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Grid Width="13" Height="16.012">
                                    <Path x:Name="buttonpath1" Fill="#C6C6C6" Stretch="Fill" Margin="0,0,1,0" Data="F1M208.3991,153.7932C208.9421,153.7932,209.3831,154.2342,209.3831,154.7772C209.3831,155.3202,208.9421,155.7622,208.3991,155.7622C207.8561,155.7622,207.4151,155.3202,207.4151,154.7772C207.4151,154.2342,207.8561,153.7932,208.3991,153.7932 M203.3991,156.8052L205.3991,156.8052L205.3991,157.8052L211.3991,157.8052L211.3991,156.8052L213.3991,156.8052L213.3991,158.8052L214.3991,159.8052L214.3991,158.8052L214.3991,158.3362L214.3991,155.8052L213.3991,155.8052L211.3991,155.8052L211.3991,154.8052L210.3801,154.8052C210.3801,154.8052,210.3831,154.7872,210.3831,154.7772C210.3831,153.6832,209.4931,152.7932,208.3991,152.7932C207.3051,152.7932,206.4151,153.6832,206.4151,154.7772C206.4151,154.7872,206.4171,154.7952,206.4171,154.7952L205.3991,154.8052L205.3991,155.8052L203.3991,155.8052L202.3991,155.8052L202.3991,167.8052L202.3991,168.8052L206.3991,168.8052L206.3991,167.8052L203.3991,167.8052z"/>
                                    <Path x:Name="buttonpath2" Fill="#C6C6C6" Stretch="Fill" Margin="5,6.012,0,0" Data="F1M208.3991,167.8049L208.3991,159.8049L211.3991,159.8049L211.3991,160.8049L211.3991,161.8049L211.3991,162.8049L212.1491,162.8049L212.3991,162.8049L214.3991,162.8049L214.3991,167.8049z M212.4131,158.8049L212.3991,158.8189L212.3991,158.8049L211.3991,158.8049L208.3991,158.8049L207.3991,158.8049L207.3991,159.8049L207.3991,167.8049L207.3991,168.8049L208.3991,168.8049L214.3991,168.8049L215.3991,168.8049L215.3991,161.8049z"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates" >
                                        <VisualStateGroup.Transitions>

                                        </VisualStateGroup.Transitions>                                        
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>                    
                </Button>
                <Button x:Name="copybutton"  BorderThickness="0"  Command="{Binding SelectedDiagram.Info.Commands.Duplicate}"
                        IsEnabled="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}" Height="35" Width="35"                     
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Duplicate"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Grid Width="13" Height="16">
                                    <Path x:Name="buttonpath1" Stretch="Fill" Data="F1M244.6151,167.7991L233.6151,167.7991L233.6151,158.7991L237.6151,158.7991L238.1151,158.7991L238.6151,158.7991L238.6151,153.7991L244.6151,153.7991z M244.6151,152.7991L237.6151,152.7991L232.6151,157.7991L232.6151,167.7991L232.6151,168.7991L245.6151,168.7991L245.6151,167.7991L245.6151,152.7991z"/>
                                    <Path  x:Name="buttonpath2" Stretch="Fill" Margin="5.247,7.315,3.968,2.935" Data="F1M241.64645,165.192425L241.64645,165.8643L237.8652,165.8643C237.849575,165.70805,237.880825,165.536175,237.943325,165.379925C238.037075,165.129925,238.1777,164.8643,238.39645,164.6143C238.6152,164.3643,238.912075,164.08305,239.318325,163.7393C239.943325,163.2393,240.3652,162.83305,240.58395,162.536175C240.8027,162.2393,240.912075,161.95805,240.912075,161.692425C240.912075,161.411175,240.8027,161.1768,240.6152,160.9893C240.412075,160.8018,240.14645,160.692425,239.83395,160.692425C239.4902,160.692425,239.224575,160.8018,239.02145,161.004925C238.818325,161.20805,238.70895,161.4893,238.70895,161.848675L237.9902,161.77055C238.037075,161.2393,238.224575,160.817425,238.5527,160.536175C238.8652,160.254925,239.3027,160.1143,239.849575,160.1143C240.39645,160.1143,240.83395,160.27055,241.14645,160.567425C241.45895,160.879925,241.630825,161.254925,241.630825,161.70805C241.630825,161.942425,241.58395,162.161175,241.4902,162.379925C241.39645,162.598675,241.2402,162.83305,241.02145,163.08305C240.8027,163.33305,240.443325,163.661175,239.943325,164.08305C239.52145,164.442425,239.255825,164.6768,239.130825,164.8018C239.005825,164.9268,238.912075,165.067425,238.83395,165.192425L241.64645,165.192425"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates" >
                                        <VisualStateGroup.Transitions>

                                        </VisualStateGroup.Transitions>
                                        <VisualState x:Name="Enabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"  Value="True">
                                        <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"  Value="False">
                                        <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>                    
                </Button>
                <Path Stretch="Fill" Stroke="#686868" StrokeThickness="1" HorizontalAlignment="Right" Height="35" Width="1" Margin="5,0,5,0" Data="M388.8,114.5 L388.8,405.6"/>               
                <ToggleButton x:Name="lockbutton" businessobject:LockButtonBinding.Command="{Binding TextChanged}" 
                               IsEnabled="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}" Height="35" Width="35"                     
                              IsChecked="{Binding SelectedDiagram.SelectedItems.IsNodeLocked, Mode=TwoWay}"
                              >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Lock"/>
                    </ToolTipService.ToolTip>
                    <ToggleButton.Template>
                        <ControlTemplate>
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Grid Width="13" Height="15.966">
                                    <Path x:Name="buttonpath1" Stretch="Fill" Margin="5.313,0,5.312,3.02" VerticalAlignment="Bottom" Height="4.187" Data="F1M280.6146,163.7459L280.6146,165.7619L281.8926,165.7619L281.8926,163.7259C282.2066,163.5129,282.4266,163.1699,282.4266,162.7619C282.4266,162.1049,281.8936,161.5749,281.2386,161.5749C280.5826,161.5749,280.0516,162.1049,280.0516,162.7619C280.0516,163.1839,280.2826,163.5359,280.6146,163.7459"/>
                                    <Path x:Name="buttonpath2" Stretch="Fill" Data="F1M286.739,167.782L275.739,167.782L275.739,159.783L286.739,159.783z M277.739,157.826C277.739,155.615,279.305,153.816,281.231,153.816C283.157,153.816,284.723,155.615,284.723,157.826L284.723,158.783L277.739,158.783z M285.723,158.783L285.723,157.826C285.723,155.064,283.707,152.816,281.231,152.816C278.753,152.816,276.739,155.064,276.739,157.826L276.739,158.783L274.739,158.783L274.739,168.782L287.739,168.782L287.739,158.783z"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates">
                                        <VisualState x:Name="Enabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Checked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="UnChecked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"  Value="True">
                                        <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsNodeSelected}"  Value="False">
                                        <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding ElementName=lockbutton, Path=IsChecked}"  Value="True">
                                        <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding ElementName=lockbutton, Path=IsChecked}" Value="False">
                                        <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>
                    </ToggleButton.Template>
                </ToggleButton>                
                <Button x:Name="groupbutton" BorderThickness="0"  Command="{Binding SelectedDiagram.Info.Commands.Group}"
                        IsEnabled="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}" Height="35" Width="35"                     
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Group"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Grid Width="16" Height="16">
                                    <Path x:Name="buttonpath1" Stretch="Fill" HorizontalAlignment="Left" VerticalAlignment="Top" Width="2" Height="2" Data="F1M303.793,154.799L305.793,154.799L305.793,152.799L303.793,152.799z"/>
                                    <Path x:Name="buttonpath2" Stretch="Fill" HorizontalAlignment="Right" VerticalAlignment="Bottom" Width="2" Height="2" Data="F1M317.793,168.799L319.793,168.799L319.793,166.799L317.793,166.799z"/>
                                    <Path x:Name="buttonpath3" Stretch="Fill" HorizontalAlignment="Right" VerticalAlignment="Top" Width="2" Height="2" Data="F1M317.793,154.799L319.793,154.799L319.793,152.799L317.793,152.799z"/>
                                    <Path x:Name="buttonpath4" Stretch="Fill" HorizontalAlignment="Left" VerticalAlignment="Bottom" Width="2" Height="2" Data="F1M303.793,168.799L305.793,168.799L305.793,166.799L303.793,166.799z"/>
                                    <Path x:Name="buttonpath5" Stretch="Fill" Margin="3,2.999,1.975,1.938" Data="F1M313.2867,165.8616C311.8657,165.8616,310.6447,165.0126,310.0847,163.7986L314.7927,163.7986L314.7927,159.1496C315.9857,159.7166,316.8177,160.9246,316.8177,162.3306C316.8177,164.2776,315.2337,165.8616,313.2867,165.8616 M309.7557,162.3306C309.7557,160.3836,311.3397,158.7996,313.2867,158.7996C313.4597,158.7996,313.6257,158.8256,313.7927,158.8506L313.7927,162.7986L309.8027,162.7986C309.7827,162.6446,309.7557,162.4906,309.7557,162.3306 M307.7927,162.7986L307.7927,156.7986L313.7927,156.7986L313.7927,157.8506C313.6237,157.8316,313.4597,157.7986,313.2867,157.7986C310.7877,157.7986,308.7557,159.8316,308.7557,162.3306C308.7557,162.4906,308.7867,162.6426,308.8027,162.7986z M314.7927,158.0756L314.7927,155.7986L306.7927,155.7986L306.7927,163.7986L309.0207,163.7986C309.6347,165.5746,311.3047,166.8616,313.2867,166.8616C315.7857,166.8616,317.8177,164.8286,317.8177,162.3306C317.8177,160.3616,316.5497,158.7006,314.7927,158.0756"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates" >
                                        <VisualStateGroup.Transitions>

                                        </VisualStateGroup.Transitions>
                                        <VisualState x:Name="Enabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath5" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath5" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Checked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath5" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="UnChecked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath5" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath5" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath5" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="True">
                                        <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsMultiNodeSelected}"  Value="False">
                                        <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding ElementName=groupbutton, Path=IsChecked}"  Value="True">
                                        <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding ElementName=groupbutton, Path=IsChecked}" Value="False">
                                        <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>                    
                </Button>
                <Button x:Name="ungroupbutton" BorderThickness="0"  Command="{Binding SelectedDiagram.Info.Commands.UnGroup}"
                        IsEnabled="{Binding SelectedDiagram.SelectedItems.IsGroupSelected}" Height="35" Width="35"                     
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Un Group"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Grid Width="15.999" Height="16">
                                    <Path x:Name="buttonpath1" Stretch="Fill" HorizontalAlignment="Right" Margin="0,0,4,4" VerticalAlignment="Bottom" Width="2" Height="2" Data="F1M344.132,164.799L346.132,164.799L346.132,162.799L344.132,162.799z"/>
                                    <Path x:Name="buttonpath2" Stretch="Fill" HorizontalAlignment="Right" Margin="0,0,4,0" VerticalAlignment="Top" Width="2" Height="2" Data="F1M346.132,152.799L344.132,152.799L344.132,154.799L346.132,154.799z"/>
                                    <Path x:Name="buttonpath3" Stretch="Fill" HorizontalAlignment="Right" VerticalAlignment="Bottom" Width="2" Height="2" Data="F1M348.132,168.799L350.132,168.799L350.132,166.799L348.132,166.799z"/>
                                    <Path x:Name="buttonpath4" Stretch="Fill" HorizontalAlignment="Left" Margin="4.999,0,0,0" VerticalAlignment="Bottom" Width="2" Height="2" Data="F1M339.132,168.799L341.132,168.799L341.132,166.799L339.132,166.799z"/>
                                    <Path x:Name="buttonpath5" Stretch="Fill" HorizontalAlignment="Left" Margin="4.999,5,0,0" VerticalAlignment="Top" Width="2" Height="2" Data="F1M339.132,159.799L341.132,159.799L341.132,157.799L339.132,157.799z"/>
                                    <Path x:Name="buttonpath6" Stretch="Fill" HorizontalAlignment="Right" Margin="0,5,0,0" VerticalAlignment="Top" Width="2" Height="2" Data="F1M348.132,159.799L350.132,159.799L350.132,157.799L348.132,157.799z"/>
                                    <Path x:Name="buttonpath7" Stretch="Fill" Margin="0,0,0.92,1.034" Data="F1M344.6808,166.7649C342.7338,166.7649,341.1498,165.1809,341.1498,163.2339C341.1498,163.0849,341.1758,162.9429,341.1938,162.7989L344.1318,162.7989L344.1318,159.7579C344.3118,159.7299,344.4938,159.7029,344.6808,159.7029C346.6278,159.7029,348.2118,161.2859,348.2118,163.2339C348.2118,165.1809,346.6278,166.7649,344.6808,166.7649 M343.1318,160.0759L343.1318,161.7989L341.4608,161.7989C341.7988,161.0459,342.3938,160.4399,343.1318,160.0759 M337.1318,161.7989L337.1318,155.7989L343.1318,155.7989L343.1318,158.9929C341.8458,159.4639,340.8428,160.4969,340.4048,161.7989z M344.6808,158.7019C344.4938,158.7019,344.3138,158.7359,344.1318,158.7579L344.1318,154.7989L336.1328,154.7989L336.1328,152.7989L334.1328,152.7989L334.1328,154.7989L336.1318,154.7989L336.1318,162.7989L334.1328,162.7989L334.1328,164.7989L336.1328,164.7989L336.1328,162.7989L340.1938,162.7989C340.1798,162.9439,340.1498,163.0849,340.1498,163.2339C340.1498,165.7319,342.1828,167.7649,344.6808,167.7649C347.1798,167.7649,349.2118,165.7319,349.2118,163.2339C349.2118,160.7349,347.1798,158.7019,344.6808,158.7019"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates" >
                                        <VisualStateGroup.Transitions>

                                        </VisualStateGroup.Transitions>
                                        <VisualState x:Name="Enabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath5" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath6" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath7" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath5" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath6" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath7" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Checked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath5" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath6" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath7" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="UnChecked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath5" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath6" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath7" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath5" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath6" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath7" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath5" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath6" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath7" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsGroupSelected}"  Value="True">
                                        <Core:GoToStateAction StateName="Enabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding SelectedDiagram.SelectedItems.IsGroupSelected}"  Value="False">
                                        <Core:GoToStateAction StateName="Disabled"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding ElementName=ungroupbutton, Path=IsChecked}"  Value="True">
                                        <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding ElementName=ungroupbutton, Path=IsChecked}" Value="False">
                                        <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>                    
                </Button>
                <ToggleButton x:Name="panbutton"
                                Height="35" Width="35"                     
                              IsChecked="{Binding SelectedDiagram.IsPanEnabled, Mode=TwoWay}"
                              >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Pan"/>
                    </ToolTipService.ToolTip>
                    <ToggleButton.Template>
                        <ControlTemplate>
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Grid Width="13" Height="15.966">
                                    <Path x:Name="buttonpath1" Fill="#d1d3d4" Stretch="Fill" VerticalAlignment="Bottom"  Data="F1M130.1514,158.6579C130.0414,158.6579,129.9384,158.6859,129.8484,158.7419C129.6904,158.8429,129.6274,158.9949,129.6024,159.1049C129.5604,159.2929,129.6014,159.5009,129.7144,159.6769L132.5774,164.0119C133.5174,165.4429,134.9224,166.1099,137.0014,166.1099C140.8794,166.1099,141.1804,163.1949,141.1804,162.3019L141.1804,153.9929C141.1804,153.7609,140.9904,153.5709,140.7554,153.5709C140.5264,153.5709,140.3334,153.7639,140.3334,153.9929L140.3334,157.9959C140.3334,158.4399,139.9704,158.8029,139.5264,158.8029C139.0804,158.8029,138.7174,158.4399,138.7174,157.9959L138.7174,152.1479C138.7174,151.9159,138.5284,151.7259,138.2964,151.7259C138.0624,151.7259,137.8724,151.9159,137.8724,152.1479L137.8724,157.3799C137.8724,157.8239,137.5094,158.1859,137.0644,158.1859C136.6184,158.1859,136.2554,157.8239,136.2554,157.3799L136.2554,151.5329C136.2554,151.2999,136.0674,151.1099,135.8354,151.1099C135.6014,151.1099,135.4124,151.2999,135.4124,151.5329L135.4124,157.3799C135.4124,157.8239,135.0484,158.1859,134.6014,158.1859C134.1574,158.1859,133.7964,157.8239,133.7964,157.3799L133.7964,152.7639C133.7964,152.5319,133.6064,152.3429,133.3744,152.3429C133.1404,152.3429,132.9514,152.5319,132.9514,152.7639L132.9514,161.9889L130.8004,159.0449C130.6384,158.7979,130.3954,158.6579,130.1514,158.6579 M137.0014,167.1099C134.5884,167.1099,132.8684,166.2759,131.7424,164.5609L128.8764,160.2209C128.6174,159.8169,128.5274,159.3339,128.6264,158.8879C128.7184,158.4719,128.9644,158.1189,129.3174,157.8949C130.0714,157.4279,131.1214,157.7059,131.6234,158.4769L131.9514,158.9259L131.9514,152.7639C131.9514,151.9799,132.5894,151.3429,133.3744,151.3429C133.7834,151.3429,134.1524,151.5159,134.4124,151.7939L134.4124,151.5329C134.4124,150.7489,135.0504,150.1099,135.8354,150.1099C136.5094,150.1099,137.0774,150.5839,137.2204,151.2179C137.4814,150.9169,137.8674,150.7259,138.2964,150.7259C139.0804,150.7259,139.7174,151.3639,139.7174,152.1479L139.7174,153.0209C139.9774,152.7449,140.3464,152.5709,140.7554,152.5709C141.5414,152.5709,142.1804,153.2089,142.1804,153.9929L142.1804,162.3019C142.1804,164.5189,140.8244,167.1099,137.0014,167.1099"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates">                                        
                                        <VisualState x:Name="Checked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="UnChecked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>

                                    <Core:DataTriggerBehavior Binding="{Binding ElementName=panbutton, Path=IsChecked}"  Value="True">
                                        <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding ElementName=panbutton, Path=IsChecked}" Value="False">
                                        <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>
                    </ToggleButton.Template>
                </ToggleButton>
                <Button x:Name="zoominbutton" BorderThickness="0"  Command="{Binding ZoomIn}" Height="35" Width="35"                     
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Zoom In"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Grid Width="14.804" Height="16.812">
                                    <Path x:Name="buttonpath1" Fill="#d1d3d4" Stretch="Fill" Data="F1M174.1309,157.0573C174.1309,154.3523,176.3309,152.1523,179.0359,152.1523C181.7409,152.1523,183.9419,154.3523,183.9419,157.0573C183.9419,159.7623,181.7409,161.9623,179.0359,161.9623C176.3309,161.9623,174.1309,159.7623,174.1309,157.0573 M187.9349,167.3393L183.1079,161.3233C184.2349,160.2473,184.9419,158.7343,184.9419,157.0573C184.9419,153.8013,182.2919,151.1523,179.0359,151.1523C175.7799,151.1523,173.1309,153.8013,173.1309,157.0573C173.1309,160.3133,175.7799,162.9623,179.0359,162.9623C180.2559,162.9623,181.3909,162.5903,182.3329,161.9543L187.1549,167.9643z"/>
                                    <Path x:Name="buttonpath2" Fill="#d1d3d4" Stretch="Fill" Margin="2.968,2.889,5.963,8.052" Data="F1M179.5361,154.0407L178.5361,154.0407L178.5361,156.4757L176.0991,156.4757L176.0991,157.4757L178.5351,157.4757L178.5351,159.9117L179.5351,159.9117L179.5351,157.4767L181.9721,157.4777L181.9721,156.4777L179.5361,156.4767z"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates" >
                                        <VisualStateGroup.Transitions>

                                        </VisualStateGroup.Transitions>
                                        <VisualState x:Name="Enabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Checked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="UnChecked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button x:Name="zoomoutbutton" BorderThickness="0"  Command="{Binding ZoomOut}" Height="35" Width="35"                     
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Zoom Out"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Grid Width="14.804" Height="16.812">
                                    <Path x:Name="buttonpath1" Fill="#d1d3d4" Stretch="Fill" Data="F1M153.1953,157.0573C153.1953,154.3523,155.3953,152.1523,158.1003,152.1523C160.8053,152.1523,163.0063,154.3523,163.0063,157.0573C163.0063,159.7623,160.8053,161.9623,158.1003,161.9623C155.3953,161.9623,153.1953,159.7623,153.1953,157.0573 M166.9993,167.3393L162.1733,161.3233C163.2993,160.2463,164.0063,158.7343,164.0063,157.0573C164.0063,153.8013,161.3563,151.1523,158.1003,151.1523C154.8443,151.1523,152.1953,153.8013,152.1953,157.0573C152.1953,160.3133,154.8443,162.9623,158.1003,162.9623C159.3213,162.9623,160.4563,162.5903,161.3983,161.9533L166.2193,167.9643z"/>
                                    <Path x:Name="buttonpath2" Fill="#d1d3d4" Stretch="Fill" Height="1.002" Margin="2.968,2.889,5.963,8.052" Data="F1M155.165,157.4752L161.036,157.4772L161.036,156.4772L155.165,156.4752z"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates" >
                                        <VisualStateGroup.Transitions>

                                        </VisualStateGroup.Transitions>
                                        <VisualState x:Name="Enabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#C6C6C6"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#686868"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Checked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#fd4f3f"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="UnChecked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button x:Name="resetbutton" BorderThickness="0"  Command="{Binding Reset}" Height="35" Width="35"                     
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Reset"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="buttonborder" Height="Auto" Background="Transparent" CornerRadius="5">
                                <Grid Width="15.001" Height="15">
                                    <Path x:Name="buttonpath1" Fill="#d1d3d4"  Stretch="Fill" HorizontalAlignment="Right" VerticalAlignment="Top" Width="6.604" Height="6.43" Data="F1M206.5488,151.0597L208.6408,153.1517L205.4108,156.3817L206.5188,157.4897L209.7488,154.2597L212.0148,156.5247L212.0148,151.0597z"/>
                                    <Path x:Name="buttonpath2" Fill="#d1d3d4"  Stretch="Fill" HorizontalAlignment="Left" Margin="0.001,0,0,0" VerticalAlignment="Bottom" Width="6.539" Height="6.713" Data="F1M202.4459,159.3465L199.1069,162.6855L197.0149,160.5935L197.0149,166.0595L202.4799,166.0595L200.2149,163.7945L203.5539,160.4545z"/>
                                    <Path x:Name="buttonpath3" Fill="#d1d3d4"  Stretch="Fill" HorizontalAlignment="Right" Margin="0,0,0.001,0" VerticalAlignment="Bottom" Width="6.43" Height="6.604" Data="F1M206.6924,159.4558L205.5844,160.5638L208.8144,163.7948L206.5494,166.0598L212.0144,166.0598L212.0144,160.5938L209.9224,162.6858z"/>
                                    <Path x:Name="buttonpath4" Fill="#d1d3d4"  Stretch="Fill" HorizontalAlignment="Left" VerticalAlignment="Top" Width="6.713" Height="6.54" Data="F1M202.4803,151.0597L197.0143,151.0597L197.0143,156.5247L199.2803,154.2597L202.6193,157.5997L203.7273,156.4907L200.3883,153.1517z"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CheckStates" >
                                        <VisualStateGroup.Transitions>
                                        </VisualStateGroup.Transitions>
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath3" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="buttonpath4" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=buttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
            
            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                <Button x:Name="viewmodebutton" BorderThickness="0" Visibility="{Binding ElementName=This, Path=EditMode, Converter={StaticResource booleanToVisibilityConverter}}"
                        Click="viewmodebutton_Click"                       
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="View Mode"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="viewmodebuttonborder" Height="35" Width="35"  Background="Transparent" CornerRadius="5">
                                <Grid Width="21" Height="11.455">
                                    <Path x:Name="viewmodebuttonpath1" Fill="#FFAFAFAF" Stretch="Fill" Data="F1M278.6351,234.5213C276.2931,234.5213,274.3941,232.4753,274.3941,229.9503C274.3941,227.4263,276.2931,225.3793,278.6351,225.3793C280.9771,225.3793,282.8731,227.4263,282.8731,229.9503C282.8731,232.4753,280.9771,234.5213,278.6351,234.5213 M278.9711,223.9433C271.1581,224.0943,268.3901,229.9593,268.3901,229.9593C272.7861,235.9743,278.8901,235.3733,278.8901,235.3733C285.8081,235.8233,289.3901,229.9593,289.3901,229.9593C286.1341,223.7923,278.9711,223.9433,278.9711,223.9433"/>
                                    <Path x:Name="viewmodebuttonpath2" Fill="#FFAFAFAF" Stretch="Fill" Margin="8.591,3.818,8.591,3.819" Data="F1M276.981,229.6705C276.981,228.6165,277.836,227.7615,278.89,227.7615C279.944,227.7615,280.799,228.6165,280.799,229.6705C280.799,230.7245,279.944,231.5795,278.89,231.5795C277.836,231.5795,276.981,230.7245,276.981,229.6705"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="viewmodebuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="viewmodebuttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="viewmodebuttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="viewmodebuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="viewmodebuttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="viewmodebuttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=viewmodebuttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=viewmodebuttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button x:Name="editmodebutton" BorderThickness="0" Visibility="{Binding ElementName=This, Path=ViewMode, Converter={StaticResource booleanToVisibilityConverter}}"
                        Click="editmodebutton_Click"                      
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Edit Mode"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="editmodebuttonborder" Height="35" Width="35"  Background="Transparent" CornerRadius="5">
                                <Path x:Name="editmodebuttonpath" Data="M0.98600006,17.579 L5.0870018,21.890047 0,22.623054 z M12.964007,3.9910348 L19.633007,10.999034 10.258007,19.918033 10.207007,18.406032 7.9190068,17.460033 7.9590068,15.862033 5.6690063,15.094034 5.5030069,13.281033 3.5910063,12.910034 z M17.954272,3.2233446E-05 C18.330131,0.00237473 18.678557,0.13239292 18.930128,0.39618444 L23.652307,5.3590771 C24.225333,5.9620291 24.074327,7.037015 23.315295,7.7589827 L22.285258,8.741015 15.484999,1.5931769 16.516043,0.61120602 C16.942432,0.20506496 17.471025,-0.0029793138 17.954272,3.2233446E-05 z" Fill="#FFAFAFAF" HorizontalAlignment="Center" Height="21"  Stretch="Fill" VerticalAlignment="Center" Width="21"/>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="editmodebuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="editmodebuttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="editmodebuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="editmodebuttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=editmodebuttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=editmodebuttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>

                    </Button.Template>
                </Button>                
                <Path Stretch="Fill" Stroke="#AAAAAA" StrokeThickness="1" HorizontalAlignment="Right" Height="35" Width="1" Margin="10,0,10,0" Data="M388.8,114.5 L388.8,405.6"/>
                <ToggleButton x:Name="settingbutton" BorderThickness="0" Visibility="{Binding ElementName=This, Path=EditMode, Converter={StaticResource booleanToVisibilityConverter}}"
                        Checked="settingbutton_Checked" Unchecked="settingbutton_Unchecked"                    
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Settings"/>
                    </ToolTipService.ToolTip>
                    <ToggleButton.Template>
                        <ControlTemplate TargetType="ToggleButton">
                            <Border x:Name="settingbuttonborder" Height="35" Width="35"  Background="Transparent" CornerRadius="5">
                                <Grid Width="21" Height="21">
                                    <Path x:Name="settingbuttonpath1" Fill="#FFAFAFAF" Stretch="Fill" Data="F1M294.3929,667.3186C291.6669,667.3016,289.4669,665.0736,289.4839,662.3436C289.4959,660.6616,290.3489,659.1856,291.6369,658.3006C291.7299,658.2446,291.8199,658.1866,291.9159,658.1376C291.9939,658.0906,292.0749,658.0516,292.1559,658.0086C293.5839,657.3666,295.2939,657.4056,296.7379,658.2756C299.0769,659.6846,299.8319,662.7216,298.4239,665.0596C297.9919,665.7766,297.3969,666.3246,296.7259,666.7276C296.0259,667.0976,295.2399,667.3246,294.3929,667.3186 M303.9059,664.2706C303.8489,663.9486,303.7669,663.7416,303.6799,663.6026C303.7759,662.7826,303.7729,661.9596,303.6549,661.1526L305.7429,659.5276C305.6279,659.0826,305.4809,658.6476,305.3159,658.2186C305.4199,658.2446,305.5279,658.2676,305.6289,658.2956C305.0519,656.7006,304.1489,655.2626,302.9909,654.0656L300.5169,655.0026C299.7349,654.3546,298.8449,653.8366,297.8809,653.4636L297.4879,650.8516C296.5349,650.5986,295.5359,650.4456,294.5019,650.4376C293.4689,650.4316,292.4689,650.5706,291.5089,650.8116L291.4959,650.8916C291.4689,650.8976,291.4409,650.8986,291.4149,650.9056L290.9619,653.4766C290.7919,653.5426,290.6349,653.6306,290.4699,653.7056C290.2849,653.7846,290.1019,653.8706,289.9219,653.9606C289.8289,654.0106,289.7299,654.0516,289.6389,654.1046C289.2069,654.3406,288.7919,654.6116,288.3959,654.9126L285.9669,653.9596C285.9469,653.9796,285.9309,654.0016,285.9119,654.0216L285.8429,653.9936C285.1349,654.6866,284.4959,655.4676,283.9629,656.3516C283.4309,657.2396,283.0399,658.1676,282.7569,659.1146L284.7839,660.8146C284.6029,661.8306,284.5789,662.8606,284.7199,663.8656L284.6929,663.8876L284.9649,663.8516L282.9089,665.4866C283.4459,667.4696,284.4709,669.2506,285.8619,670.6816L288.1539,669.8166C288.2759,669.8386,288.3739,669.8416,288.4569,669.8336C289.2109,670.4356,290.0549,670.9306,290.9719,671.2866L291.3599,673.8986C291.6169,673.9666,291.8839,674.0066,292.1459,674.0586C292.0909,674.1136,292.0359,674.1736,291.9809,674.2266C293.6479,674.5426,295.3459,674.5016,296.9659,674.1146L296.9849,674.0066C297.1019,673.9806,297.2239,673.9686,297.3389,673.9396L297.7599,671.3726C298.2119,671.1906,298.6489,670.9736,299.0699,670.7226C299.1699,670.6666,299.2629,670.6026,299.3609,670.5446C299.4429,670.4916,299.5239,670.4356,299.6049,670.3796C299.7769,670.2696,299.9489,670.1576,300.1129,670.0366L302.5369,671.0226C303.2419,670.3316,303.8819,669.5506,304.4179,668.6656C304.9489,667.7796,305.3399,666.8486,305.6229,665.9006L303.9329,664.4866C303.9239,664.4126,303.9159,664.3316,303.9059,664.2706"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="settingbuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="settingbuttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="settingbuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="settingbuttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Checked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="settingbuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="settingbuttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Red"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="UnChecked">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="settingbuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="settingbuttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:DataTriggerBehavior Binding="{Binding ElementName=settingbutton, Path=IsChecked}"  Value="True">
                                        <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:DataTriggerBehavior Binding="{Binding ElementName=settingbutton, Path=IsChecked}" Value="False">
                                        <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                    </Core:DataTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=settingbuttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=settingbuttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>
                    </ToggleButton.Template>
                </ToggleButton>
                <Button x:Name="markupbutton" BorderThickness="0"
                        Click="markupbutton_Click"
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Hide Markups"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="markupbuttonborder" Height="35" Width="35" Background="#2E3138" CornerRadius="5">
                                <Grid Width="16" Height="20.5">
                                    <Path x:Name="markupbuttonpath1" Fill="#FFAFAFAF" Stretch="Fill" Margin="0,3.5,0,0" Data="F1M367.6397,230.4249L366.6667,231.3979L364.1167,228.8479L361.5667,231.3979L360.5947,230.4249L363.1447,227.8749L360.5947,225.3249L361.5667,224.3529L364.1167,226.9029L366.6667,224.3529L367.6397,225.3249L365.0897,227.8749z M366.3897,217.3979C366.3897,218.7389,365.0467,219.8259,363.3897,219.8259C361.7337,219.8259,360.3897,218.7389,360.3897,217.3979L355.3897,217.3979L355.3897,234.3979L371.3897,234.3979L371.3897,217.3979z"/>
                                    <Path x:Name="markupbuttonpath2" Fill="#FFAFAFAF" Stretch="Fill" Margin="5.5,0" VerticalAlignment="Top" Height="5" Data="F1M360.8901,216.3978C360.8901,215.0168,362.0091,213.8978,363.3901,213.8978C364.7711,213.8978,365.8901,215.0168,365.8901,216.3978C365.8901,217.7788,364.7711,218.8978,363.3901,218.8978C362.0091,218.8978,360.8901,217.7788,360.8901,216.3978"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="markupbuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="markupbuttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="markupbuttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="markupbuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="markupbuttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="markupbuttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=markupbuttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=markupbuttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>

                    </Button.Template>
                </Button>
                <Button x:Name="showmarkupbutton" BorderThickness="0" Visibility="Collapsed"
                        Click="showmarkupbutton_Click"
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Show Markups"/>
                    </ToolTipService.ToolTip>
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="showmarkupbuttonborder" Height="35" Width="35" Background="#2E3138" CornerRadius="5">
                                <!--<Grid Width="16" Height="20.5">
                                    <Path x:Name="showmarkupbuttonpath1" Fill="#FFAFAFAF" Stretch="Fill" Margin="0,3.5,0,0" Data="F1M367.6397,230.4249L366.6667,231.3979L364.1167,228.8479L361.5667,231.3979L360.5947,230.4249L363.1447,227.8749L360.5947,225.3249L361.5667,224.3529L364.1167,226.9029L366.6667,224.3529L367.6397,225.3249L365.0897,227.8749z M366.3897,217.3979C366.3897,218.7389,365.0467,219.8259,363.3897,219.8259C361.7337,219.8259,360.3897,218.7389,360.3897,217.3979L355.3897,217.3979L355.3897,234.3979L371.3897,234.3979L371.3897,217.3979z"/>
                                    <Path x:Name="showmarkupbuttonpath2" Fill="#FFAFAFAF" Stretch="Fill" Margin="5.5,0" VerticalAlignment="Top" Height="5" Data="F1M360.8901,216.3978C360.8901,215.0168,362.0091,213.8978,363.3901,213.8978C364.7711,213.8978,365.8901,215.0168,365.8901,216.3978C365.8901,217.7788,364.7711,218.8978,363.3901,218.8978C362.0091,218.8978,360.8901,217.7788,360.8901,216.3978"/>
                                </Grid>-->
                                <Grid  Width="16" Height="20.5">
                                    <Path x:Name="showmarkupbuttonpath1" Data="F1M544.1042,698.9567L514.9362,700.3137L513.3562,666.3497L542.5242,664.9927z" Fill="#FF777777" Stretch="Fill" Margin="5.658,8.269,0,0"/>
                                    <Path x:Name="showmarkupbuttonpath2" Data="M539.525,696.876L508.198,696.876L508.198,660.398L539.525,660.398z" Fill="#FFD8D8D8" StrokeStartLineCap="Flat" Stretch="Fill" StrokeEndLineCap="Flat" Stroke="#FFBABABA" StrokeThickness="1" StrokeMiterLimit="10" StrokeLineJoin="Miter" Margin="0,3.174,4.079,2.938"/>
                                    <Path Data="M516.7333,659.9053C516.7333,658.2903,518.0003,657.4743,519.6153,657.4743L520.0323,657.4743C521.6473,657.4743,522.9563,658.7833,522.9563,660.3983L522.9563,669.5873C522.9563,671.2023,521.6473,672.5113,520.0323,672.5113L519.6153,672.5113C518.0003,672.5113,516.6913,671.2023,516.6913,669.5873L516.6913,665.1283" Height="16.537" StrokeStartLineCap="Flat" Stretch="Fill" StrokeEndLineCap="Flat" Stroke="#FF777777" StrokeThickness="1.5" StrokeMiterLimit="10" StrokeLineJoin="Miter" Width="7.765" HorizontalAlignment="Left" Margin="8.243,0,0,0" VerticalAlignment="Top"/>
                                </Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="showmarkupbuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="showmarkupbuttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="showmarkupbuttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="showmarkupbuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="showmarkupbuttonpath1" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="showmarkupbuttonpath2" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=showmarkupbuttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=showmarkupbuttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>

                    </Button.Template>
                </Button>
                <ToggleButton x:Name="linksbutton" BorderThickness="0" Visibility="{Binding ElementName=This, Path=ViewMode, Converter={StaticResource booleanToVisibilityConverter}}" 
                        Checked="linksbutton_Checked" Unchecked="linksbutton_Unchecked"
                        >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Links"/>
                    </ToolTipService.ToolTip>
                    <ToggleButton.Template>
                        <ControlTemplate TargetType="ToggleButton">
                            <Border x:Name="linksbuttonborder" Height="35" Width="35" Background="#2E3138" CornerRadius="5">
                                <Path x:Name="linksbuttonpath" Data="M8.3425472,9.8891591 C9.0669158,9.895824 9.7897048,10.157483 10.381753,10.680625 L9.0057137,12.058669 C8.5146998,11.698658 7.8756817,11.76366 7.4336693,12.208674 L2.3845253,17.288838 C1.9075117,17.769854 1.7165065,18.609881 2.2465215,19.140899 L4.6705904,21.562977 C5.1916053,22.080994 6.0166287,21.887987 6.5036426,21.402971 L11.548786,16.318807 C12.011799,15.855792 12.067801,15.217772 11.68879,14.732756 L13.062829,13.356711 C14.191861,14.596751 14.13186,16.477812 12.920825,17.686852 L7.8736816,22.770016 C6.6486467,24.000055 4.5635874,24.195063 3.3025517,22.934021 L0.87648249,20.513943 C-0.40455341,19.231901 -0.21454859,17.149834 1.0124865,15.923794 L6.0616299,10.83963 C6.6986169,10.201578 7.5215964,9.8816057 8.3425472,9.8891591 z M14.509984,8.0639815 L15.858987,9.4519832 9.0659664,16.058981 7.7159868,14.668966 z M18.651541,0.00033664703 C19.433382,0.011509895 20.205582,0.30124569 20.797161,0.91156626 L23.177229,3.3765993 C24.418264,4.6576164 24.190258,6.7396443 22.940222,7.9446606 L17.776074,12.908727 C16.548039,14.100743 14.665986,14.129743 13.443951,12.980728 L14.842991,11.62871 C15.321004,12.015715 15.960023,11.970714 16.430036,11.514708 L21.595183,6.5526419 C22.088198,6.0726354 22.295204,5.2506244 21.784189,4.7226176 L19.402121,2.2585845 C18.879107,1.7205772 18.036082,1.8985796 17.548068,2.3675857 L12.38692,7.3336523 C11.935908,7.7686581 11.859905,8.4066666 12.211915,8.9036732 L10.811875,10.257691 C9.7158442,8.9766743 9.8198471,7.1206494 11.040882,5.9396336 L16.205029,0.97456694 C16.866986,0.33280849 17.765455,-0.012326241 18.651541,0.00033664703 z" Fill="#FFAFAFAF" HorizontalAlignment="Center" Height="21" Stretch="Fill" VerticalAlignment="Center" Width="21"/>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="MouseEnter">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="linksbuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#161719"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="linksbuttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#ffffff"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="MouseLeave">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="linksbuttonborder" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="linksbuttonpath" Storyboard.TargetProperty="Fill">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d1d3d4"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=linksbuttonborder}">
                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=linksbuttonborder}">
                                        <Core:GoToStateAction StateName="MouseLeave"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </Border>
                        </ControlTemplate>

                    </ToggleButton.Template>
                </ToggleButton>
            </StackPanel>
        </Grid>
        
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <Grid Grid.Column="1">
                <view:TabbedDiagrams x:Name="tabbeddiagram" Tapped="TabbedDiagrams_Tapped" />            
                <viewProperty:PropertyPanel HorizontalAlignment="Left" VerticalAlignment="Top"></viewProperty:PropertyPanel>
                
            </Grid>

            <Grid Grid.Column="0" Visibility="{Binding ElementName=This, Path=EditMode, Converter={StaticResource booleanToVisibilityConverter}}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Border x:Name="collapsedStencilGrid" Grid.Column="0" BorderBrush="#54575e" BorderThickness="0.5" Background="#2E3138" Width="30" Height="Auto" Visibility="Collapsed">
                    <StackPanel>
                        <Border BorderBrush="#AAAAAA" BorderThickness="0" Width="28" Height="75" HorizontalAlignment="Left" VerticalAlignment="Top" >
                            <ToggleButton x:Name="searchAllButton" VerticalAlignment="Top" Width="30" Height="75" BorderThickness="0" Checked="ToggleButton_Checked">
                                <ToggleButton.Template>
                                    <ControlTemplate>
                                        <Border x:Name="searchAllButtonBorder" BorderBrush="#54575e" BorderThickness="0,0,0.5,0.5" Background="#2E3138">
                                            <TextBlock x:Name="searchAllButtonBox" Text="All" FontSize="12" Foreground="#939598" FontWeight="Normal" HorizontalAlignment="Center" VerticalAlignment="Center" RenderTransformOrigin="0.5, 0.5" Margin="-14,5,-10,10">
                                                <TextBlock.RenderTransform>
                                                    <RotateTransform Angle="270"/>
                                                </TextBlock.RenderTransform>
                                            </TextBlock>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CheckStates">
                                                    <VisualState x:Name="UnChecked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchAllButtonBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#2E3138"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchAllButtonBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#474b54"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchAllButtonBox" Storyboard.TargetProperty="Foreground">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="White"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                        
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchAllButtonBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#2E3138"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchAllButtonBox" Storyboard.TargetProperty="Foreground">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#939598"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=searchAllButtonBorder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=searchAllButtonBorder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                            </ToggleButton>
                        </Border>
                        <Border BorderBrush="#AAAAAA" BorderThickness="0" Width="28" Height="100" HorizontalAlignment="Left" VerticalAlignment="Top" >
                            <ToggleButton x:Name="searchCategoryButton" VerticalAlignment="Top" Width="30" Height="100" BorderThickness="0" Checked="ToggleButton_Checked">
                                <ToggleButton.Template>
                                    <ControlTemplate>
                                        <Border x:Name="searchCategoryButtonBorder" BorderBrush="#54575e" BorderThickness="0,0,0.5,0.5" Background="#2E3138">
                                            <TextBlock x:Name="searchCategoryButtonBox" Text="Category" FontSize="12" Foreground="#939598" FontWeight="Normal" HorizontalAlignment="Center" VerticalAlignment="Center" RenderTransformOrigin="0.5, 0.5" Margin="-21,-15,-15,-15">
                                                <TextBlock.RenderTransform>
                                                    <RotateTransform Angle="270"/>
                                                </TextBlock.RenderTransform>
                                            </TextBlock>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CheckStates">
                                                    <VisualState x:Name="UnChecked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchCategoryButtonBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#2E3138"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchCategoryButtonBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#474b54"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchCategoryButtonBox" Storyboard.TargetProperty="Foreground">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="White"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchCategoryButtonBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#2E3138"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchCategoryButtonBox" Storyboard.TargetProperty="Foreground">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#939598"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>                                                
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=searchCategoryButtonBorder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=searchCategoryButtonBorder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                            </ToggleButton>
                        </Border>
                        <Border  BorderBrush="#AAAAAA" BorderThickness="0" Width="28" Height="75" HorizontalAlignment="Left" VerticalAlignment="Top" >
                            <ToggleButton x:Name="searchsymbolButton" VerticalAlignment="Top" Width="30" Height="75" BorderThickness="0" Checked="ToggleButton_Checked">
                                <ToggleButton.Template>
                                    <ControlTemplate>
                                        <Border x:Name="searchsymbolButtonBorder" BorderBrush="#54575e" BorderThickness="0,0,0.5,0.5" Background="#2E3138">                                           
                                            <Path x:Name="searchsymbolpath" Fill="#939598" Data="F1M240.4267,135.7966C239.7377,134.9196,239.8907,133.6506,240.7667,132.9606C241.6427,132.2716,242.9117,132.4236,243.6017,133.2996C244.2897,134.1756,244.1397,135.4446,243.2637,136.1346C242.3867,136.8236,241.1167,136.6716,240.4267,135.7966 M247.4417,139.9096L244.7867,136.5356C245.6507,135.3316,245.6577,133.6596,244.6967,132.4376C243.5307,130.9546,241.3847,130.6986,239.9037,131.8646C238.4197,133.0306,238.1657,135.1766,239.3307,136.6576C240.3067,137.8986,241.9647,138.2756,243.3497,137.6876L245.9937,141.0466z" Stretch="Fill" Width="16" Height="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CheckStates">
                                                    <VisualState x:Name="UnChecked">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchsymbolButtonBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#2E3138"/>
                                                            </ObjectAnimationUsingKeyFrames>                                                            
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchsymbolButtonBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#474b54"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchsymbolpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="White"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseLeave">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchsymbolButtonBorder" Storyboard.TargetProperty="Background">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#2E3138"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="searchsymbolpath" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#939598"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=searchsymbolButtonBorder}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=searchsymbolButtonBorder}">
                                                    <Core:GoToStateAction StateName="MouseLeave"/>
                                                </Core:EventTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Border>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                            </ToggleButton>
                        </Border>
                    </StackPanel>
                </Border>

                <Grid Grid.Column="1" Name="childgrid" Background="#2E3138" Visibility="Visible">
                    <viewProperty:StencilView x:Name="stencilview" Visibility="Visible"/>
                    <Popup IsOpen="{Binding ElementName=childgrid, Path=Visibility, Converter={StaticResource visibilityToBooleanConverter}}" HorizontalOffset="25" Width="25" Height="25" VerticalAlignment="Center" HorizontalAlignment="Right">
                        <Button x:Name="collapseStencilButton" VerticalAlignment="Center" Click="collapseStencilButton_Click">
                            <Button.Template>
                                <ControlTemplate>
                                    <Border x:Name="collapseStencilButtonBorder">
                                        <!--<Path x:Name="collapseStencilButtonPath" Data="F1M21.5059,88.8662L18.9609,88.8662L13.7049,81.7502L18.9619,74.6302L21.5069,74.6302L16.2499,81.7502z M21.6069,61.8432L11.4099,61.8432L11.4099,102.3432L21.6069,102.3432C23.9919,102.3432,25.9249,100.7032,25.9249,98.6792L25.9249,65.5062C25.9249,63.4832,23.9919,61.8432,21.6069,61.8432" Fill="White" Height="40.5" Opacity="0.5" Stretch="Fill" Width="14.515"/>-->

                                        <Grid Height="40.5" Width="14.515">
                                            <Path Fill="#a5a5a5" Stretch="Fill" x:Name="collapseStencilButtonPath" Opacity="0.6" Stroke="#d6d4d5" StrokeEndLineCap="Flat" StrokeLineJoin="Miter" StrokeMiterLimit="10" StrokeStartLineCap="Flat" StrokeThickness="0.5" Data="M44.1665,31.6802L36.8745,31.6802L36.8745,64.5592L44.1665,64.5592C45.8165,64.5592,47.1665,63.2092,47.1665,61.5592L47.1665,34.6802C47.1665,33.0302,45.8165,31.6802,44.1665,31.6802z"/>
                                            <Path Fill="White" Stretch="Fill" x:Name="collapseStencilButtonPath1" Margin="1.683,12.736,3.689,12.985" Data="F1M43.7269,53.8238L40.0759,47.9958L43.7279,42.1658L41.9599,42.1658L38.3079,47.9958L41.9589,53.8238z"/>
                                        </Grid>
                                        
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CheckStates">
                                                <VisualState x:Name="MouseEnter">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="collapseStencilButtonPath" Storyboard.TargetProperty="Opacity">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="0.9"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="collapseStencilButtonPath1" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Black"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="MouseLeave">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="collapseStencilButtonPath" Storyboard.TargetProperty="Opacity">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="0.6"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="collapseStencilButtonPath1" Storyboard.TargetProperty="Fill">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="White"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Interactivity:Interaction.Behaviors>
                                            <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=collapseStencilButtonBorder}">
                                                <Core:GoToStateAction StateName="MouseEnter"/>
                                            </Core:EventTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=collapseStencilButtonBorder}">
                                                <Core:GoToStateAction StateName="MouseLeave"/>
                                            </Core:EventTriggerBehavior>
                                            <Core:EventTriggerBehavior EventName="PointerPressed" SourceObject="{Binding ElementName=collapseStencilButtonBorder}">
                                                <Core:GoToStateAction StateName="MouseLeave"/>
                                            </Core:EventTriggerBehavior>
                                        </Interactivity:Interaction.Behaviors>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </Popup>
                </Grid>
            </Grid>
        </Grid>

        <Popup Name="savepopup" HorizontalAlignment="Left"  VerticalAlignment="Center" IsOpen="False" Grid.Row="0" Grid.RowSpan="2" Opened="savepopup_Opened" Closed="savepopup_Closed">
            <Grid Background="#000000" Height="200" Width="{Binding ElementName=This, Path=ActualWidth, Mode=TwoWay}" VerticalAlignment="Center" Margin="0,-100,0,0">
                <TextBlock Text="Are you sure want to save this file before closing?" Foreground="#ffffff" FontSize="22" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,25,0,0"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" >
                <Button Name="savepopupbutton" Command="{Binding Delete}" Content="Yes" Width="100" Height="40" Click="savepopupbutton_Click" Background="#d1d3d4" Foreground="#1a1a1a" BorderThickness="0"/>
                <Button Name="nopopupbutton" Command="{Binding DeleteWithoutSave}" Content="No" Width="100" Height="40" Click="savepopupbutton_Click" Background="#d1d3d4" Foreground="#1a1a1a" BorderThickness="0" Margin="10,0,10,0"/>
                <Button Name="cancelpopupbutton" Content="Cancel" Width="100" Height="40" Click="cancelpopupbutton_Click" Background="#d1d3d4" Foreground="#1a1a1a" BorderThickness="0"/>
            </StackPanel>
            </Grid>
        </Popup>
        <Popup Grid.Row="1" Name="settingpopup" HorizontalAlignment="Right" Margin="20,0,220,0" VerticalAlignment="Top" IsOpen="False" >
            <Border Background="#efefef" BorderBrush="#0a0b0c" BorderThickness="2" Width="220">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Column="0" Grid.Row="0" Text="Show Ruler" Foreground="#000000" FontSize="16" Margin="10"/>
                    <ToggleSwitch x:Name="rulerVisiblitySwitch" Grid.Row="0" Grid.Column="1" IsOn="{Binding SelectedDiagram.PageSettings.Ruler, Mode=TwoWay}"/>
                    <Path Grid.Row="1" Grid.ColumnSpan="2" Data="M482.2174,586.4791L567.4014,586.4791" Stretch="Fill"  Stroke="#bcbcbc" StrokeThickness="1"  />
                    <TextBlock Grid.Column="0" Grid.Row="2" Text="Smart Guide" Foreground="#000000" FontSize="16" Margin="10"/>
                    <ToggleSwitch Grid.Row="2" Grid.Column="1" IsOn="{Binding SelectedDiagram.PageSettings.SnapToObject, Mode=TwoWay}"/>
                    <Path Grid.Row="3" Grid.ColumnSpan="2" Data="M482.2174,586.4791L567.4014,586.4791" Stretch="Fill"  Stroke="#bcbcbc" StrokeThickness="1"  />
                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Snap To Grid" Foreground="#000000" FontSize="16" Margin="10"/>
                    <ToggleSwitch Grid.Row="4" Grid.Column="1" IsOn="{Binding SelectedDiagram.PageSettings.SnapToGrid, Mode=TwoWay}"/>
                    <TextBlock Grid.Row="5" Grid.Column="0" Text="Grid Lines" Foreground="#000000" FontSize="16" Margin="10"/>
                    <ToggleSwitch Grid.Row="5" Grid.Column="1" IsOn="{Binding SelectedDiagram.PageSettings.GridLines, Mode=TwoWay}"/>
                    <Path Grid.Row="6" Grid.ColumnSpan="2" Data="M482.2174,586.4791L567.4014,586.4791" Stretch="Fill"  Stroke="#bcbcbc" StrokeThickness="1"  />
                    <TextBlock Grid.Row="7" Grid.Column="0" Text="Hide Library" Foreground="#000000" FontSize="16" Margin="10"/>
                    <ToggleSwitch x:Name="libraryToggleSwitch" Grid.Row="7" Grid.Column="1" IsOn="True" Toggled="ToggleSwitch_Toggled"/>
                </Grid>
            </Border>
        </Popup>
    </Grid>
    <Page.TopAppBar>
        <AppBar x:Name="topappbar" Background="#0c0d0f" BorderThickness="0" Height="90" BorderBrush="Transparent">
            <Grid x:Name="grid" Tag="{Binding ElementName=This, Path=EditMode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.Resources>
                    <SolidColorBrush x:Key="ToggleButtonCheckedBackgroundThemeBrush1" Color="#50545b"></SolidColorBrush>
                    <SolidColorBrush x:Key="ToggleButtonCheckedForegroundThemeBrush1" Color="#333333"></SolidColorBrush>
                    <SolidColorBrush x:Key="ToggleButtonBackgroundThemeBrush1" Color="#3e3f42"></SolidColorBrush>
                    <SolidColorBrush x:Key="ToggleButtonForegroundThemeBrush1" Color="#979aa0"></SolidColorBrush>
                    <SolidColorBrush x:Key="ToggleButtonPointerOverThemeBrush1"  Color="#18544D"></SolidColorBrush>
                    <SolidColorBrush x:Key="TooggleButtonPressedThemeBrush1" Color="#153D37"></SolidColorBrush>
                    <SolidColorBrush x:Key="ToggelButtonCheckedMouseOver" Color="#c9c9c9"></SolidColorBrush>
                    <SolidColorBrush x:Key="ToggleButtonCheckedPrssed" Color="#18544D"></SolidColorBrush>
                    
                    <DataTemplate x:Key="TabbedDiagramTitleNormalState">
                        <Border Background="Transparent" Width="135">
                            <TextBlock x:Name="tabbedDiagramTitleTextBlock" HorizontalAlignment="Left" VerticalAlignment="Center"                                                                                        
                                 Text="{Binding Title, Mode=TwoWay}" FontWeight="Normal" TextAlignment="Center" Margin="5,0,0,0"/>
                        </Border>
                    </DataTemplate>

                    <DataTemplate x:Key="TabbedDiagramTitleMouseHoverState">
                        <Grid Background="#7e8084" Width="135">
                            <TextBlock x:Name="tabbedDiagramTitleTextBlock" HorizontalAlignment="Left"  VerticalAlignment="Center"                                                                                        
                                    Text="{Binding Title, Mode=TwoWay}" TextAlignment="Center" Margin="5,0,0,0"/>
                            <Button x:Name="titleEditButton" Width="30" Height="30" HorizontalAlignment="Right" Margin="0,0,20,0"  Command="{Binding Rename}">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate>
                                                    <Grid>
                                                        <Ellipse Fill="#3f4144" Width="23" Height="23" Stretch="Fill" HorizontalAlignment="Center"/>
                                                        <Path Data="M0.98600006,17.579 L5.0870018,21.890047 0,22.623054 z M12.964007,3.9910348 L19.633007,10.999034 10.258007,19.918033 10.207007,18.406032 7.9190068,17.460033 7.9590068,15.862033 5.6690063,15.094034 5.5030069,13.281033 3.5910063,12.910034 z M17.954272,3.2233446E-05 C18.330131,0.00237473 18.678557,0.13239292 18.930128,0.39618444 L23.652307,5.3590771 C24.225333,5.9620291 24.074327,7.037015 23.315295,7.7589827 L22.285258,8.741015 15.484999,1.5931769 16.516043,0.61120602 C16.942432,0.20506496 17.471025,-0.0029793138 17.954272,3.2233446E-05 z" Fill="#cfd1d3" HorizontalAlignment="Center" Height="15"  Stretch="Fill" VerticalAlignment="Center" Width="15"/>
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </Grid>
                    </DataTemplate>

                    <Style TargetType="Button" x:Key="NormaCloseButton">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate>
                                    <Grid>
                                        <Path Fill="Gray" Stretch="Fill" Width="12" Height="12" HorizontalAlignment="Center"  VerticalAlignment="Center"  Data="F1M29.9009,24.3449L28.6769,23.1219L25.4679,26.3299L22.2589,23.1219L21.0359,24.3449L24.2439,27.5539L21.0359,30.7619L22.2589,31.9869L25.4679,28.7779L28.6769,31.9869L29.9009,30.7619L26.6919,27.5539z"/>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>

                    <Style TargetType="Button" x:Key="PointerEnteredOnCloseButton">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate>
                                    <Grid>
                                        <Ellipse Fill="#7e8084" Width="25" Height="25" Stretch="Fill" HorizontalAlignment="Center"/>
                                        <Path Fill="White" Stretch="Fill" Width="12" Height="12" HorizontalAlignment="Center"  VerticalAlignment="Center"  Data="F1M29.9009,24.3449L28.6769,23.1219L25.4679,26.3299L22.2589,23.1219L21.0359,24.3449L24.2439,27.5539L21.0359,30.7619L22.2589,31.9869L25.4679,28.7779L28.6769,31.9869L29.9009,30.7619L26.6919,27.5539z"/>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Grid.Resources>
                <ScrollViewer VerticalScrollBarVisibility="Disabled"  HorizontalScrollBarVisibility="Auto">
                    <ItemsControl ItemsSource="{Binding Diagrams}"
                          VerticalAlignment="Bottom" 
                          BorderThickness="0"
                          VerticalContentAlignment="Bottom">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <ToggleButton x:Name="selectDiagramToggleButton" Command="{Binding Select}"
                                          IsChecked="{Binding Path=IsSelected, Mode=TwoWay}"
                                          Background="{StaticResource ToggleButtonBackgroundThemeBrush1}"
                                          Foreground="{StaticResource ToggleButtonForegroundThemeBrush1}"
                                          Width="175"
                                          Height="55"
                                           Margin="5,20,5,5" PointerMoved="selectDiagramToggleButton_PointerMoved"
                                                  Checked="selectDiagramToggleButton_Checked"
                                                  Unchecked="selectDiagramToggleButton_Unchecked"
                                                  > 
                                        <ToggleButton.Style>
                                            <Style TargetType="ToggleButton">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="ToggleButton">
                                                            <!--<Grid>-->
                                                                <Border x:Name="Border"
                                                                Background="{StaticResource ToggleButtonBackgroundThemeBrush1}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="0"
                                                                Margin="3,0,0,0">

                                                                    <Grid>
                                                                        <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="*"/>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                    </Grid.ColumnDefinitions>
                                                                        <ContentPresenter x:Name="ContentPresenter"
                                                                              Content="{TemplateBinding Content}"
                                                                              ContentTransitions="{TemplateBinding ContentTransitions}"
                                                                              ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                              Margin="{TemplateBinding Padding}"
                                                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}" 
                                                                             />
                                                                    <Border x:Name="titleBorder" Grid.Column="0" VerticalAlignment="Center" Width="135" Margin="15,0,0,0" Height="40">
                                                                        <Grid Margin="5">
                                                                                <ContentControl x:Name="TabbedDiagramTitleControl" ContentTemplate="{StaticResource TabbedDiagramTitleNormalState}"
                                                                                            Visibility="{Binding EditTile, Mode=TwoWay, Converter={StaticResource booleanToOppositeVisibilityConverter}}"
                                                                                            HorizontalAlignment="Left" VerticalAlignment="Center">
                                                                            </ContentControl>
                                                                            <ContentControl x:Name="TabbedDiagramTitleControl1" ContentTemplate="{Binding TitleTemplate, Mode=TwoWay}"
                                                                                            Visibility="{Binding EditTile, Mode=TwoWay, Converter={StaticResource booleanToVisibilityConverter}}"
                                                                                            HorizontalAlignment="Left" VerticalAlignment="Center">
                                                                            </ContentControl>
                                                                            </Grid>
                                                                        </Border>
                                                                            <!--<Button Padding="5" Foreground="White" Background="Transparent" Margin="25,0,5,0" 
                                                                                    x:Name="closebutton" Command="{Binding Delete}" CommandParameter="{Binding}" Click="closebutton_Click"
                                                                                    HorizontalAlignment="Right" VerticalAlignment="Center" Content="&#x274C;" ></Button>-->
                                                                         <Border x:Name="closebuttonborder" Grid.Column="1" Width="25" Height="25" Margin="0,0,5,0">
                                                                    <Button Grid.Column="1" Width="25" Height="25"
                                                                                    x:Name="closebutton"  Click="closebutton_Click" Style="{StaticResource NormaCloseButton}"
                                                                                    VerticalAlignment="Center">                                                                        
                                                                    </Button>
                                                                    </Border>
                                                                    </Grid>
                                                                 <VisualStateManager.VisualStateGroups>
                                                                    <VisualStateGroup x:Name="States">
                                                                        <VisualState x:Name="Checked">
                                                                                <Storyboard>
                                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="Background">
                                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#50545b"/>
                                                                                    </ObjectAnimationUsingKeyFrames>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TabbedDiagramTitleControl" Storyboard.TargetProperty="Foreground">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="White"/>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                            </VisualState>
                                                                        <VisualState x:Name="UnChecked">
                                                                                <Storyboard>
                                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="Background">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#3e3f42"/>
                                                                                    </ObjectAnimationUsingKeyFrames>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TabbedDiagramTitleControl" Storyboard.TargetProperty="Foreground">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#979aa0"/>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                            </VisualState>
                                                                        <VisualState x:Name="Normal">
                                                                            <Storyboard>
                                                                                <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="titleBorder" Storyboard.TargetProperty="Background">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#3C998C"/>
                                                                                </ObjectAnimationUsingKeyFrames>-->
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TabbedDiagramTitleControl" Storyboard.TargetProperty="ContentTemplate">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource TabbedDiagramTitleNormalState}"/>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TabbedDiagramTitleControl" Storyboard.TargetProperty="Foreground">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#979aa0"/>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                        <VisualState x:Name="MouseEnter">
                                                                            <Storyboard>
                                                                                <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="titleBorder" Storyboard.TargetProperty="Background">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Gray"/>
                                                                                </ObjectAnimationUsingKeyFrames>-->
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TabbedDiagramTitleControl" Storyboard.TargetProperty="ContentTemplate">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource TabbedDiagramTitleMouseHoverState}"/>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TabbedDiagramTitleControl" Storyboard.TargetProperty="Foreground">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#d3d3d3"/>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                        <VisualState x:Name="MouseEnterOnCloseButton">
                                                                            <Storyboard>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="closebutton" Storyboard.TargetProperty="Style">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PointerEnteredOnCloseButton}"/>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                        <VisualState x:Name="MouseExitOnCloseButton">
                                                                            <Storyboard>
                                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="closebutton" Storyboard.TargetProperty="Style">
                                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource NormaCloseButton}"/>
                                                                                </ObjectAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </VisualState>
                                                                    </VisualStateGroup>
                                                                  </VisualStateManager.VisualStateGroups>
                                                                    <Interactivity:Interaction.Behaviors>
                                                                        <Core:DataTriggerBehavior Binding="{Binding ElementName=selectDiagramToggleButton, Path=IsChecked}"  Value="True">
                                                                        <Core:GoToStateAction StateName="Checked"></Core:GoToStateAction>
                                                                        </Core:DataTriggerBehavior>
                                                                              <Core:DataTriggerBehavior Binding="{Binding ElementName=selectDiagramToggleButton, Path=IsChecked}" Value="False">
                                                                        <Core:GoToStateAction StateName="UnChecked"></Core:GoToStateAction>
                                                                        </Core:DataTriggerBehavior>
                                                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=titleBorder}">
                                                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                                                    </Core:EventTriggerBehavior>
                                                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=titleBorder}">
                                                                        <Core:GoToStateAction StateName="Normal"/>
                                                                    </Core:EventTriggerBehavior>
                                                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=closebuttonborder}">
                                                                        <Core:GoToStateAction StateName="MouseEnterOnCloseButton"/>
                                                                    </Core:EventTriggerBehavior>
                                                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=closebuttonborder}">
                                                                        <Core:GoToStateAction StateName="MouseExitOnCloseButton"/>
                                                                    </Core:EventTriggerBehavior>
                                                                </Interactivity:Interaction.Behaviors>
                                                                </Border>
                                                            <!--</Grid>-->
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </ToggleButton.Style>
                                    </ToggleButton>
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">

                    <!--<Button x:Name="renameButon" Foreground="White" Background="Black" Padding="5" Command="{Binding Rename}">
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Rename"/>
                        </ToolTipService.ToolTip>
                        <Button.Style>
                            <Style  TargetType="ButtonBase" BasedOn="{StaticResource NewAppBarButtonStyle}">
                                <Setter Property="AutomationProperties.AutomationId" Value="OpenFileAppBarButton"/>
                                <Setter Property="AutomationProperties.Name" Value="New"/>
                                <Setter Property="Content" Value="&#xE109;"/>

                            </Style>
                        </Button.Style>
                    </Button>-->
                    
                    <Button x:Name="addNewPageButton" Margin="0,0,25,0" Foreground="White" Background="Black" Command="{Binding New}" Click="addNewPageButton_Click" Visibility="Visible" Width="40" Height="40" VerticalAlignment="Center">
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Add New Page"/>
                        </ToolTipService.ToolTip>
                        <Button.Style>
                            <Style  TargetType="ButtonBase" BasedOn="{StaticResource NewAppBarButtonStyle}">
                                <Setter Property="AutomationProperties.AutomationId" Value="OpenFileAppBarButton"/>
                                <Setter Property="AutomationProperties.Name" Value="New"/>
                                <!--<Setter Property="Content" Value="&#xE109;"/>-->
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate>
                                            <!--<DataTemplate>-->
                                            <Grid Width="40" Height="40" x:Name="addNewPageButtonGrid">
                                                <Path x:Name="addNewPageButtonPath1" Stretch="Fill" Stroke="#FFC6C6C6" StrokeEndLineCap="Flat" StrokeLineJoin="Miter" StrokeMiterLimit="10" StrokeStartLineCap="Flat" StrokeThickness="2" Data="M185.1951,99.6923C185.1951,89.2003,193.7011,80.6933,204.1951,80.6933C214.6871,80.6933,223.1951,89.2003,223.1951,99.6923C223.1951,110.1863,214.6871,118.6933,204.1951,118.6933C193.7011,118.6933,185.1951,110.1863,185.1951,99.6923z"/>
                                                <Path x:Name="addNewPageButtonPath2" Fill="#FFF7F5F5" Stretch="Fill" Margin="8.938,18.386,8.937,19.614" Data="F1M215.258,100.079L193.133,100.079L193.133,98.079L215.258,98.079z"/>
                                                <Path x:Name="addNewPageButtonPath3" Fill="#FFF7F5F5" Stretch="Fill" Margin="19,8.323,19,9.552" Data="F1M203.195,88.016L205.195,88.016L205.195,110.141L203.195,110.141z"/>
                                                <VisualStateManager.VisualStateGroups>
                                                    <VisualStateGroup x:Name="States">
                                                        <VisualState x:Name="Normal">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="addNewPageButtonPath1" Storyboard.TargetProperty="Fill">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                        <VisualState x:Name="MouseEnter">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="addNewPageButtonPath1" Storyboard.TargetProperty="Fill">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#595959"/>
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                    </VisualStateGroup>
                                                </VisualStateManager.VisualStateGroups>
                                                <Interactivity:Interaction.Behaviors>
                                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=addNewPageButtonGrid}">
                                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                                    </Core:EventTriggerBehavior>
                                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=addNewPageButtonGrid}">
                                                        <Core:GoToStateAction StateName="Normal"/>
                                                    </Core:EventTriggerBehavior>
                                                </Interactivity:Interaction.Behaviors>
                                            </Grid>
                                            <!--</DataTemplate>-->
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>

                            </Style>
                        </Button.Style>
                    </Button>
                    <Button Margin="0,0,25,0" x:Name="duplicateButon" Foreground="White" Background="Black" Command="{Binding Duplicate}" Width="40" Height="40" VerticalAlignment="Center">
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Duplicate"/>
                        </ToolTipService.ToolTip>
                        <Button.Style>
                            <Style  TargetType="ButtonBase" BasedOn="{StaticResource NewAppBarButtonStyle}">
                                <Setter Property="AutomationProperties.AutomationId" Value="OpenFileAppBarButton"/>
                                <Setter Property="AutomationProperties.Name" Value="New"/>
                                <!--<Setter Property="Content" Value="&#xE109;"/>-->
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate>
                                            <Grid Width="40" Height="40" x:Name="duplicateButtonGrid" Background="Transparent">
                                                <Path x:Name="duplicateButtonPath1" Stretch="Fill" Stroke="#FFC6C6C6" StrokeEndLineCap="Flat" StrokeLineJoin="Miter" StrokeMiterLimit="10" StrokeStartLineCap="Flat" StrokeThickness="2" Data="M257.5112,99.6923C257.5112,89.2003,266.0172,80.6933,276.5112,80.6933C287.0032,80.6933,295.5112,89.2003,295.5112,99.6923C295.5112,110.1863,287.0032,118.6933,276.5112,118.6933C266.0172,118.6933,257.5112,110.1863,257.5112,99.6923z"/>
                                                <Path x:Name="duplicateButtonPath2" Fill="White" Stretch="Fill" Margin="13.01,9.971,13.296,14.382" Data="F1M281.3995,94.2565L281.3995,94.2565L278.6225,91.4805L278.6225,93.6115C278.6225,93.7745,278.6865,93.9365,278.7975,94.0515L278.8105,94.0645C278.9265,94.1835,279.0975,94.2565,279.2675,94.2565z M282.0105,94.9825L282.0105,94.9825L279.2675,94.9825C278.8915,94.9825,278.5505,94.8245,278.2985,94.5775L278.2855,94.5555C278.0465,94.3125,277.9005,93.9705,277.9005,93.6115L277.9005,90.8695L271.1355,90.8695C271.0195,90.8695,270.9215,90.9205,270.8445,90.9895C270.7765,91.0615,270.7245,91.1645,270.7245,91.2795L270.7245,103.7005C270.7245,103.8075,270.7765,103.9145,270.8445,103.9865C270.9175,104.0685,271.0195,104.1105,271.1355,104.1105L281.6005,104.1105C281.7105,104.1105,281.8135,104.0685,281.8905,103.9865L281.8945,103.9865C281.9675,103.9145,282.0105,103.8075,282.0105,103.7005z M271.1355,89.6645L278.2595,89.6645C278.4265,89.6645,278.5755,89.7325,278.6865,89.8405L283.0395,94.1925C283.1505,94.3125,283.2145,94.4665,283.2145,94.6195L283.2145,94.6365L283.2145,103.7005C283.2145,104.1455,283.0305,104.5375,282.7405,104.8375L282.7365,104.8375L282.7275,104.8455C282.4335,105.1355,282.0355,105.3115,281.6005,105.3115L271.1355,105.3115C270.6905,105.3115,270.2895,105.1275,269.9945,104.8375C269.7045,104.5545,269.5205,104.1455,269.5205,103.7005L269.5205,91.2795C269.5205,90.8355,269.7045,90.4335,269.9945,90.1385C270.2895,89.8445,270.6905,89.6645,271.1355,89.6645"/>
                                                <Path x:Name="duplicateButtonPath3" Fill="White" Stretch="Fill" Margin="14.89,15.412,11.009,12.028" Data="F1M285.3214,96.1702L284.2564,95.1052L284.2564,96.9872L284.2574,96.9872L284.2574,106.0002C284.2574,106.0012,284.2564,106.0032,284.2564,106.0042L284.2564,106.4082L283.9114,106.4082C283.8854,106.4132,283.8604,106.4242,283.8334,106.4242L273.0144,106.4242C272.9854,106.4242,272.9614,106.4132,272.9344,106.4082L271.4014,106.4082C271.4774,106.7052,271.6274,106.9722,271.8354,107.1742C272.1394,107.4752,272.5544,107.6652,273.0144,107.6652L283.8334,107.6652C284.2834,107.6652,284.6944,107.4832,284.9984,107.1832L285.0074,107.1742L285.0124,107.1742C285.3124,106.8652,285.5024,106.4592,285.5024,106.0002L285.5024,96.6292L285.5024,96.6112C285.5024,96.4532,285.4354,96.2942,285.3214,96.1702"/>
                                                
                                                <VisualStateManager.VisualStateGroups>
                                                    <VisualStateGroup x:Name="States">
                                                        <VisualState x:Name="Normal">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="duplicateButtonPath1" Storyboard.TargetProperty="Fill">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                        <VisualState x:Name="MouseEnter">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="duplicateButtonPath1" Storyboard.TargetProperty="Fill">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#595959"/>
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                    </VisualStateGroup>
                                                </VisualStateManager.VisualStateGroups>
                                                <Interactivity:Interaction.Behaviors>
                                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=duplicateButtonGrid}">
                                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                                    </Core:EventTriggerBehavior>
                                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=duplicateButtonGrid}">
                                                        <Core:GoToStateAction StateName="Normal"/>
                                                    </Core:EventTriggerBehavior>
                                                </Interactivity:Interaction.Behaviors>
                                            </Grid>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                    <Button x:Name="importButton" Margin="0,0,25,0" Foreground="White" Background="Black" Command="{Binding Import}" Width="40" Height="40" VerticalAlignment="Center">
                        <ToolTipService.ToolTip>
                            <TextBlock Text="Import"/>
                        </ToolTipService.ToolTip>
                        <Button.Style>
                            <Style  TargetType="ButtonBase" BasedOn="{StaticResource NewAppBarButtonStyle}">
                                <Setter Property="AutomationProperties.AutomationId" Value="OpenFileAppBarButton"/>
                                <Setter Property="AutomationProperties.Name" Value="Open File"/>
                                <!--<Setter Property="Content" Value="&#xE1C1;"/>-->
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate>
                                            <Grid Width="40" Height="40" x:Name="importButtonGrid">
                                                <Path x:Name="importButtonPath1" Stretch="Fill" Stroke="#FFC6C6C6" StrokeEndLineCap="Flat" StrokeLineJoin="Miter" StrokeMiterLimit="10" StrokeStartLineCap="Flat" StrokeThickness="2" Data="M329.8274,99.6923C329.8274,89.2003,338.3334,80.6933,348.8274,80.6933C359.3194,80.6933,367.8274,89.2003,367.8274,99.6923C367.8274,110.1863,359.3194,118.6933,348.8274,118.6933C338.3334,118.6933,329.8274,110.1863,329.8274,99.6923z"/>
                                                <Path x:Name="importButtonPath2" Fill="White" Stretch="Fill" Margin="12.567,11.835,9.433,12.59" Data="F1M357.9286,98.1547L357.9286,98.1547L357.5056,98.1547L357.4916,98.1547L357.4716,98.1547L343.2976,98.1547L343.2776,98.1547L342.8646,98.1547L343.8036,105.6277L356.9896,105.6277z M343.9856,96.7677L343.9856,96.7677L356.7976,96.7677L356.7976,95.7557L351.1196,95.7557L351.1196,95.7457C350.9376,95.7457,350.7506,95.6717,350.6126,95.5287L348.1846,92.9137L343.9856,92.9137z M342.0876,96.7677L342.6046,96.7677L342.6046,92.2157C342.6046,91.8327,342.9136,91.5277,343.2976,91.5277L343.3116,91.5277L348.4886,91.5277C348.7056,91.5277,348.8926,91.6257,349.0196,91.7777L351.4186,94.3647L357.4916,94.3647C357.8696,94.3647,358.1796,94.6737,358.1796,95.0577L358.1796,95.0717L358.1796,96.7677L358.7056,96.7677C359.0886,96.7677,359.3936,97.0787,359.3936,97.4617C359.3936,97.4957,359.3936,97.5357,359.3896,97.5697L358.2876,106.4097C358.2626,106.6217,358.1346,106.8027,357.9726,106.9057C357.8496,107.0287,357.6826,107.1027,357.4916,107.1027L357.4716,107.1027L343.2976,107.1027C343.1106,107.1027,342.9436,107.0287,342.8256,106.9117C342.6386,106.7977,342.5156,106.6107,342.5006,106.3847L341.3996,97.5447C341.3496,97.1717,341.6256,96.8177,341.9996,96.7737z"/>
                                                
                                                <VisualStateManager.VisualStateGroups>
                                                    <VisualStateGroup x:Name="States">
                                                        <VisualState x:Name="Normal">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="importButtonPath1" Storyboard.TargetProperty="Fill">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                        <VisualState x:Name="MouseEnter">
                                                            <Storyboard>
                                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="importButtonPath1" Storyboard.TargetProperty="Fill">
                                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#595959"/>
                                                                </ObjectAnimationUsingKeyFrames>
                                                            </Storyboard>
                                                        </VisualState>
                                                    </VisualStateGroup>
                                                </VisualStateManager.VisualStateGroups>
                                                <Interactivity:Interaction.Behaviors>
                                                    <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=importButtonGrid}">
                                                        <Core:GoToStateAction StateName="MouseEnter"/>
                                                    </Core:EventTriggerBehavior>
                                                    <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=importButtonGrid}">
                                                        <Core:GoToStateAction StateName="Normal"/>
                                                    </Core:EventTriggerBehavior>
                                                </Interactivity:Interaction.Behaviors>
                                            </Grid>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
            </Grid>
        </AppBar>
    </Page.TopAppBar>    
    <Page.BottomAppBar>
        <AppBar Background="#0c0d0f" BorderThickness="0" BorderBrush="Transparent">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <!--<Button x:Name="printButton" Margin="0,0,25,0" Foreground="White" Background="Black" Padding="5" Command="{Binding Print}" >
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Print"/>
                    </ToolTipService.ToolTip>
                    <Button.Style>
                        <Style  TargetType="ButtonBase" BasedOn="{StaticResource NewAppBarButtonStyle}">
                            <Setter Property="AutomationProperties.AutomationId" Value="OpenFileAppBarButton"/>
                            <Setter Property="AutomationProperties.Name" Value="Print"/>
                            --><!--<Setter Property="Content" Value="F1M-759.602,-1584.92L-764.66,-1584.92 -764.66,-1604.68 -801.193,-1604.68 -801.193,-1584.92 -806.26,-1584.92C-811.043,-1584.92,-814.926,-1581.04,-814.926,-1576.25L-814.926,-1554.15 -801.193,-1554.15 -801.193,-1547.32 -764.66,-1547.32 -764.66,-1554.15 -750.926,-1554.15 -750.926,-1576.25C-750.926,-1581.04,-754.81,-1584.92,-759.602,-1584.92z M-769.352,-1552.02L-796.51,-1552.02 -796.51,-1561.01 -769.352,-1561.01 -769.352,-1552.02z M-769.352,-1578.31L-796.51,-1578.31 -796.51,-1599.98 -769.352,-1599.98 -769.352,-1578.31z"/>--><!--
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate>
                                        <Grid Width="40" Height="40" x:Name="printButtonGrid" Background="Transparent">
                                            <Path x:Name="printButtonPath1" Stretch="Fill" Stroke="#FFC6C6C6" StrokeEndLineCap="Flat" StrokeLineJoin="Miter" StrokeMiterLimit="10" StrokeStartLineCap="Flat" StrokeThickness="2" Data="M143.678,228.8527C143.678,218.3607,152.184,209.8537,162.678,209.8537C173.17,209.8537,181.678,218.3607,181.678,228.8527C181.678,239.3467,173.17,247.8537,162.678,247.8537C152.184,247.8537,143.678,239.3467,143.678,228.8527z"/>
                                            <Path x:Name="printButtonPath2" Fill="White" Stretch="Fill" Margin="10.801,11.756,10.803,11.757" Data="F1M166.58,228.191L158.773,228.191L158.773,221.961L166.58,221.961z M166.58,235.746L158.773,235.746L158.773,233.162L166.58,233.162z M169.383,226.289L167.928,226.289L167.928,220.61L157.426,220.61L157.426,226.289L155.971,226.289C154.596,226.289,153.479,227.404,153.479,228.782L153.479,235.134L157.426,235.134L157.426,237.097L167.928,237.097L167.928,235.134L171.875,235.134L171.875,228.782C171.875,227.404,170.76,226.289,169.383,226.289"/>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="States">
                                                    <VisualState x:Name="Normal">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="printButtonPath1" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="printButtonPath1" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#595959"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=printButtonGrid}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=printButtonGrid}">
                                                    <Core:GoToStateAction StateName="Normal"/>
                                                </Core:EventTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>-->
                <Button x:Name="saveButton" Margin="0,0,25,0" Foreground="White" Background="Black" Command="{Binding Save}">
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Save"/>
                    </ToolTipService.ToolTip>
                    <Button.Style>
                        <Style  TargetType="ButtonBase" BasedOn="{StaticResource NewAppBarButtonStyle}">
                            <Setter Property="AutomationProperties.AutomationId" Value="OpenFileAppBarButton"/>
                            <Setter Property="AutomationProperties.Name" Value="Save"/>
                            <!--<Setter Property="Content" Value="&#xE105;"/>-->                            
                            <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid Width="40" Height="40" x:Name="saveButtonGrid" Background="Transparent">
                                            <Path x:Name="saveButtonPath1" Stretch="Fill" Stroke="#FFC6C6C6" StrokeEndLineCap="Flat" StrokeLineJoin="Miter" StrokeMiterLimit="10" StrokeStartLineCap="Flat" StrokeThickness="2" Data="M218.7278,228.8527C218.7278,218.3607,227.2338,209.8537,237.7278,209.8537C248.2198,209.8537,256.7278,218.3607,256.7278,228.8527C256.7278,239.3467,248.2198,247.8537,237.7278,247.8537C227.2338,247.8537,218.7278,239.3467,218.7278,228.8527z"/>
                                            <Path x:Name="saveButtonPath2" Fill="White" Stretch="Fill" HorizontalAlignment="Left" Margin="15.959,12.844,0,0" VerticalAlignment="Top" Width="1.793" Height="3.65" Data="F1M233.687,221.698L235.48,221.698L235.48,225.348L233.687,225.348z"/>
                                            <Path x:Name="saveButtonPath3" Fill="White" Stretch="Fill" Margin="12.242,12.826,13.565,12.827" Data="F1M241.712,234.195L232.399,234.195L232.399,232.746L241.712,232.746z M241.712,221.68L241.712,226.067L232.335,226.067L232.335,221.68L229.97,221.68L229.97,236.027L244.163,236.027L244.163,221.68z"/>
                                            <VisualStateManager.VisualStateGroups>
                                                        <VisualStateGroup x:Name="States">
                                                            <VisualState x:Name="Normal">
                                                                <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="saveButtonPath1" Storyboard.TargetProperty="Fill">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                </Storyboard>
                                                            </VisualState>
                                                            <VisualState x:Name="MouseEnter">
                                                                <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="saveButtonPath1" Storyboard.TargetProperty="Fill">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#595959"/>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                </Storyboard>
                                                            </VisualState>
                                                        </VisualStateGroup>
                                                    </VisualStateManager.VisualStateGroups>
                                                    <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=saveButtonGrid}">
                                                            <Core:GoToStateAction StateName="MouseEnter"/>
                                                        </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=saveButtonGrid}">
                                                            <Core:GoToStateAction StateName="Normal"/>
                                                        </Core:EventTriggerBehavior>
                                                    </Interactivity:Interaction.Behaviors>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                        </Style>
                    </Button.Style>
                </Button>
                <Button x:Name="saveasButton" Margin="0,0,25,0" Foreground="White" Background="Black" Command="{Binding SaveAs}">
                    <ToolTipService.ToolTip>
                        <TextBlock Text="SaveAs"/>
                    </ToolTipService.ToolTip>
                    <Button.Style>
                        <Style  TargetType="ButtonBase" BasedOn="{StaticResource NewAppBarButtonStyle}">
                            <Setter Property="AutomationProperties.AutomationId" Value="OpenFileAppBarButton"/>
                            <Setter Property="AutomationProperties.Name" Value="SaveAs"/>
                            <!--<Setter Property="Content" Value="&#xE105;"/>-->
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate>
                                        <Grid Width="40" Height="40" x:Name="saveasButtonGrid" Background="Transparent">
                                            <Path x:Name="saveasButtonPath1" Stretch="Fill" Stroke="#FFC6C6C6" StrokeEndLineCap="Flat" StrokeLineJoin="Miter" StrokeMiterLimit="10" StrokeStartLineCap="Flat" StrokeThickness="2" Data="M293.7776,228.8527C293.7776,218.3607,302.2856,209.8537,312.7776,209.8537C323.2716,209.8537,331.7776,218.3607,331.7776,228.8527C331.7776,239.3467,323.2716,247.8537,312.7776,247.8537C302.2856,247.8537,293.7776,239.3467,293.7776,228.8527z"/>
                                            <Path x:Name="saveasButtonPath2" Fill="White" Stretch="Fill" HorizontalAlignment="Left" Margin="15.408,11.471,0,0" VerticalAlignment="Top" Width="1.791" Height="1.882" Data="F1M308.186,220.325L309.977,220.325L309.977,222.207L308.186,222.207z"/>
                                            <Path x:Name="saveasButtonPath3" Fill="White" Stretch="Fill" HorizontalAlignment="Left" Margin="11.689,11.454,0,14.198" Width="2.367" Data="F1M304.4671,234.6564L306.0491,234.6564L306.0491,222.2074L306.8341,222.2074L306.8341,220.3084L304.4671,220.3084z"/>
                                            <Path x:Name="saveasButtonPath4" Fill="White" Stretch="Fill" HorizontalAlignment="Left" Margin="17.834,14.215,0,0" VerticalAlignment="Top" Width="1.791" Height="3.651" Data="F1M310.612,223.069L312.403,223.069L312.403,226.72L310.612,226.72z"/>
                                            <Path x:Name="saveasButtonPath5" Fill="White" Stretch="Fill" Margin="14.115,14.197,11.692,11.455" Data="F1M318.635,235.567L309.322,235.567L309.322,234.117L318.635,234.117z M318.635,223.051L318.635,227.438L309.258,227.438L309.258,223.051L306.893,223.051L306.893,237.399L321.086,237.399L321.086,223.051z"/>
                                            <Path x:Name="saveasButtonPath6" Fill="White" Stretch="Fill" HorizontalAlignment="Right" Margin="0,11.455,14.118,0" VerticalAlignment="Top" Width="2.451" Height="1.901" Data="F1M317.7913,222.2072L318.6603,222.2072L318.6603,220.3092L316.2093,220.3092L316.2093,222.2102L317.7913,222.2102z"/>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="States">
                                                    <VisualState x:Name="Normal">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="saveasButtonPath1" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="saveasButtonPath1" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#595959"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=saveasButtonGrid}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=saveasButtonGrid}">
                                                    <Core:GoToStateAction StateName="Normal"/>
                                                </Core:EventTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>
                <!--<Button Foreground="White" Margin="0,0,25,0" x:Name="exportbutton" Background="Black" Command="{Binding Export}">
                    <ToolTipService.ToolTip>
                        <TextBlock Text="Export"/>
                    </ToolTipService.ToolTip>
                    <Button.Style>
                        <Style  TargetType="ButtonBase" BasedOn="{StaticResource NewAppBarButtonStyle}">
                            <Setter Property="AutomationProperties.AutomationId" Value="OpenFileAppBarButton"/>
                            <Setter Property="AutomationProperties.Name" Value="Export"/>
                            --><!--<Setter Property="Content" Value="M45.963548,8.269645L62.665147,25.065546 45.963548,39.871244 45.963548,31.963644C45.963548,31.963644 17.120617,24.075571 9.909945,39.871244 9.9099454,35.922571 12.530199,16.167482 45.963548,16.167483z M0,0L41.778571,0 41.778571,4.1795139 41.778571,8.3590277 37.598714,8.3590277 37.598714,4.1795139 4.1798577,4.1795139 4.1798577,45.954649 37.598714,45.954649 37.598714,41.775137 41.778571,41.775137 41.778571,45.954649 41.778571,50.134165 37.598714,50.134165 0,50.134165 0,45.954649 0,4.1795139z"/>--><!--
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate>
                                        <Grid Width="40" Height="40" x:Name="exportbuttonGrid" Background="Transparent">
                                            <Path x:Name="exportbuttonPath1" Stretch="Fill" Stroke="#FFC6C6C6" StrokeEndLineCap="Flat" StrokeLineJoin="Miter" StrokeMiterLimit="10" StrokeStartLineCap="Flat" StrokeThickness="2" Data="M368.8274,228.8527C368.8274,218.3607,377.3334,209.8537,387.8274,209.8537C398.3194,209.8537,406.8274,218.3607,406.8274,228.8527C406.8274,239.3467,398.3194,247.8537,387.8274,247.8537C377.3334,247.8537,368.8274,239.3467,368.8274,228.8527z"/>
                                            <Path x:Name="exportbuttonPath2" Fill="White" Stretch="Fill" Margin="15.233,15.092,9.353,15.674" Data="F1M398.4739,228.8527L393.5929,223.9457L393.5929,226.2537C383.8249,226.2537,383.0599,232.0257,383.0599,233.1797C385.1649,228.5627,393.5929,230.8697,393.5929,230.8697L393.5929,233.1797z"/>
                                            <Path x:Name="exportbuttonPath3" Fill="White" Stretch="Fill" Margin="12.337,12.675,15.456,12.676" Data="F1M391.1497,234.9572L381.3837,234.9572L381.3837,222.7492L391.1497,222.7492L391.1497,223.9712L392.3707,223.9712L392.3707,222.7492L392.3707,221.5292L380.1637,221.5292L380.1637,222.7492L380.1637,234.9572L380.1637,236.1782L391.1497,236.1782L392.3707,236.1782L392.3707,234.9572L392.3707,233.7362L391.1497,233.7362z"/>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="States">
                                                    <VisualState x:Name="Normal">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="exportbuttonPath1" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="MouseEnter">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="exportbuttonPath1" Storyboard.TargetProperty="Fill">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="#595959"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Interactivity:Interaction.Behaviors>
                                                <Core:EventTriggerBehavior EventName="PointerEntered" SourceObject="{Binding ElementName=exportbuttonGrid}">
                                                    <Core:GoToStateAction StateName="MouseEnter"/>
                                                </Core:EventTriggerBehavior>
                                                <Core:EventTriggerBehavior EventName="PointerExited" SourceObject="{Binding ElementName=exportbuttonGrid}">
                                                    <Core:GoToStateAction StateName="Normal"/>
                                                </Core:EventTriggerBehavior>
                                            </Interactivity:Interaction.Behaviors>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>-->
            </StackPanel>
        </AppBar>
    </Page.BottomAppBar>
</Page>
